{
  "title": "C文件的读取与写入",
  "cells": [
    {
      "type": "text",
      "data": "<div><br></div><div><br></div><div>#include &lt;iostream&gt;</div><div>#include &lt;iomanip&gt;</div><div>#include &lt;fstream&gt;</div><div><br></div><div>using namespace std;</div><div><br></div><div>int main(){</div><div>char buffer[256];</div><div>ifstream myfile (\"c:\\\\a.txt\");</div><div>ofstream outfile(\"c:\\\\b.txt\");</div><div><br></div><div>if(!myfile){</div><div>&nbsp; cout &lt;&lt; \"Unable to open myfile\";</div><div>&nbsp; &nbsp; &nbsp; &nbsp; exit(1); // terminate with error</div><div><br></div><div>}</div><div>if(!outfile){</div><div>&nbsp; &nbsp; cout &lt;&lt; \"Unable to open otfile\";</div><div>&nbsp; &nbsp; &nbsp; &nbsp; exit(1); // terminate with error</div><div><br></div><div>}</div><div>int a,b;</div><div>int i=0,j=0;</div><div>int data[6][2];</div><div>&nbsp; while (! myfile.eof() )</div><div>&nbsp; {</div><div>&nbsp; &nbsp; &nbsp;myfile.getline (buffer,10);</div><div>&nbsp; &nbsp; sscanf(buffer,\"%d %d\",&amp;a,&amp;b);</div><div>&nbsp; &nbsp; cout&lt;&lt;a&lt;&lt;\" \"&lt;&lt;b&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp;data[i][0]=a;</div><div>&nbsp; &nbsp; &nbsp;data[i][1]=b;</div><div>&nbsp; &nbsp; &nbsp;i++;</div><div>&nbsp; }</div><div>myfile.close();</div><div>&nbsp; for(int k=0;k&lt;i;k++){</div><div>&nbsp; &nbsp; &nbsp; outfile&lt;&lt;data[k][0] &lt;&lt;\" \"&lt;&lt;data[k][1]&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp;cout&lt;&lt;data[k][0] &lt;&lt;\" \"&lt;&lt;data[k][1]&lt;&lt;endl;</div><div>&nbsp; }</div><div><br></div><div>outfile.close();</div><div>return 0;</div><div>}</div><div><br></div><div>&nbsp;</div><div>无论读写都要包含&lt;fstream&gt;头文件</div><div><br></div><div>读：从外部文件中将数据读到程序中来处理</div><div>对于程序来说，是从外部读入数据，因此定义输入流，即定义输入流对象:ifsteam infile，infile就是输入流对象。</div><div>这个对象当中存放即将从文件读入的数据流。假设有名字为myfile.txt的文件，存有两行数字数据，具体方法：</div><div>int a,b;</div><div>ifstream infile;</div><div>infile.open(\"myfile.txt\"); &nbsp; &nbsp; &nbsp;//注意文件的路径</div><div>infile&gt;&gt;a&gt;&gt;b; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //两行数据可以连续读出到变量里</div><div>infile.close()</div><div><br></div><div>如果是个很大的多行存储的文本型文件可以这么读：</div><div>char buf[1024]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//临时保存读取出来的文件内容</div><div>string message;</div><div>ifstream infile;</div><div>infile.open(\"myfile.js\");</div><div>if(infile.is_open()) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//文件打开成功,说明曾经写入过东西</div><div>{</div><div>while(infile.good() &amp;&amp; !infile.eof())</div><div>{</div><div>&nbsp; &nbsp; memset(buf,0,1024);</div><div>&nbsp; &nbsp; infile.getline(buf,1204);</div><div>&nbsp; &nbsp; message = buf;</div><div>&nbsp; &nbsp; ...... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //这里可能对message做一些操作</div><div>&nbsp; &nbsp; cout&lt;&lt;message&lt;&lt;endl;</div><div>}</div><div>infile.close();</div><div>}</div><div><br></div><div>写：将程序中处理后的数据写到文件当中</div><div>对程序来说是将数据写出去，即数据离开程序，因此定义输出流对象ofstream outfile，outfile就是输出流对象，这个对象用来存放将要写到文件当中的数据。具体做法：</div><div>ofstream outfile;</div><div>outfile.open(\"myfile.bat\"); //myfile.bat是存放数据的文件名</div><div>if(outfile.is_open())</div><div>{</div><div>outfile&lt;&lt;message&lt;&lt;endl; &nbsp; &nbsp;//message是程序中处理的数据</div><div>&nbsp; &nbsp;outfile.close();&nbsp;</div><div>}</div><div>else</div><div>{</div><div>&nbsp; &nbsp;cout&lt;&lt;\"不能打开文件!\"&lt;&lt;endl;</div><div>}</div><div><br></div><div><br></div><div>c++对文件的读写操作的例子</div><div><br></div><div>/*/从键盘读入一行字符，把其中的字母依次放在磁盘文件fa2.dat中，再把它从磁盘文件读入程序，</div><div>将其中的小写字母改成大写字母，再存入磁盘fa3.dat中*/&nbsp;</div><div>＃i nclude&lt;fstream&gt;</div><div>＃i nclude&lt;iostream&gt;</div><div>＃i nclude&lt;cmath&gt;</div><div>using namespace std;</div><div>//////////////从键盘上读取字符的函数</div><div>void read_save(){</div><div>&nbsp; &nbsp; &nbsp; char c[80];</div><div>&nbsp; &nbsp; &nbsp; ofstream outfile(\"f1.dat\");//以输出方工打开文件</div><div>&nbsp; &nbsp; &nbsp; if(!outfile){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cerr&lt;&lt;\"open error!\"&lt;&lt;endl;//注意是用的是cerr&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;exit(1);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cin.getline(c,80);//从键盘读入一行字符</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(int i=0;c[i]!=0;i++) //对字符一个一个的处理，直到遇到'/0'为止&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(c[i]&gt;=65&amp;&amp;c[i]&lt;=90||c[i]&gt;=97&amp;&amp;c[i]&lt;=122){//保证输入的字符是字符&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outfile.put(c[i]);//将字母字符存入磁盘文件&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cout&lt;&lt;c[i]&lt;&lt;\"\";</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cout&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outfile.close();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div><div>void creat_data(){</div><div>&nbsp; &nbsp; &nbsp; char ch;</div><div>&nbsp; &nbsp; &nbsp; ifstream infile(\"f1.dat\",ios::in);//以输入的方式打开文件&nbsp;</div><div>&nbsp; &nbsp; &nbsp; if(!infile){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cerr&lt;&lt;\"open error!\"&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exit(1);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; ofstream outfile(\"f3.dat\");//定义输出流f3.dat文件</div><div>&nbsp; &nbsp; if(!outfile){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cerr&lt;&lt;\"open error!\"&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;exit(1);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp;while(infile.get(ch)){//当读取字符成功时&nbsp;</div><div>&nbsp; &nbsp; &nbsp;if(ch&lt;=122&amp;&amp;ch&gt;=97)</div><div>&nbsp; &nbsp; &nbsp;ch=ch-32;</div><div>&nbsp; &nbsp; &nbsp;outfile.put(ch);</div><div>&nbsp; &nbsp; &nbsp;cout&lt;&lt;ch;</div><div>&nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp;cout&lt;&lt;endl;</div><div>&nbsp; &nbsp; &nbsp;infile.close();</div><div>&nbsp; &nbsp; &nbsp;outfile.close();</div><div>&nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp;int main(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;read_save();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;creat_data();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; system(\"pause\");</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return 0;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp;</div><div><br></div>"
    }
  ]
}
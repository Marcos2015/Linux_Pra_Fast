{
  "title": "浮点运算为什么使用if ((x>=-EPSINON) && (x<=EPSINON)) ?",
  "cells": [
    {
      "type": "text",
      "data": "<span style=\"caret-color: rgb(102, 102, 102); color: rgb(102, 102, 102); font-family: arial, STHeiti, &quot;Microsoft YaHei&quot;, 宋体; font-size: 14px; background-color: rgb(255, 255, 255);\">浮点数在运算后存在截尾误差，所以在比较的时候要考虑这个误差，在误差允许范围内相等就是相等了。</span><div><span style=\"caret-color: rgb(102, 102, 102); color: rgb(102, 102, 102); font-family: arial, STHeiti, &quot;Microsoft YaHei&quot;, 宋体; font-size: 14px; background-color: rgb(255, 255, 255);\"><br></span></div><div><span style=\"caret-color: rgb(102, 102, 102); color: rgb(102, 102, 102); font-family: arial, STHeiti, &quot;Microsoft YaHei&quot;, 宋体; font-size: 14px; background-color: rgb(255, 255, 255);\">浮点数计算机不像整型那样表示的十分准确，所以是表示的是近似的值，所以是一个精度范围，所以与0进行比较的时候就要是一个范围区间进行比较.</span></div><div><span style=\"caret-color: rgb(102, 102, 102); color: rgb(102, 102, 102); font-family: arial, STHeiti, &quot;Microsoft YaHei&quot;, 宋体; font-size: 14px; background-color: rgb(255, 255, 255);\"><br></span></div><div><span style=\"caret-color: rgb(102, 102, 102); color: rgb(102, 102, 102); font-family: arial, STHeiti, &quot;Microsoft YaHei&quot;, 宋体; font-size: 14px; background-color: rgb(255, 255, 255);\"><br></span></div><div><span style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard; font-size: medium;\">链接：</span><a target=\"_blank\" href=\"https://www.nowcoder.com/questionTerminal/27a4f1de065943e68a26b05578659178?orderByHotValue=0&amp;pos=15&amp;mutiTagIds=616\" style=\"font-family: -webkit-standard;\">https://www.nowcoder.com/questionTerminal/27a4f1de065943e68a26b05578659178?orderByHotValue=0&amp;pos=15&amp;mutiTagIds=616</a><br style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><span style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard; font-size: medium;\">来源：牛客网</span><br style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><br style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><div style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><span style=\"color: rgb(51, 51, 51);\">&nbsp;不可将浮点变量用“==”或“！=”与任何数字比较。</span></div><span style=\"font-family: -webkit-standard; color: rgb(51, 51, 51);\">&nbsp; &nbsp; &nbsp; &nbsp;千万要留意，无论是float还是double类型的变量，都有<strong>精度限制</strong>。所以一定要避免将浮点变量用“==”或“！=”与数字比较，应该设法转化成“&gt;=”或“&lt;=”形式。</span><span style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard; font-size: medium;\"></span><br style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><div style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><span style=\"color: rgb(51, 51, 51);\">&nbsp; &nbsp; &nbsp; &nbsp;假设浮点变量的名字为x，应当将</span><span style=\"color: rgb(51, 51, 51);\">if (x == 0.0)&nbsp;</span><span style=\"color: rgb(51, 51, 51);\">转化为</span><span style=\"color: rgb(51, 51, 51);\"><strong>&nbsp;</strong></span><span style=\"color: rgb(51, 51, 51);\"><strong>if ((x&gt;=-EPSINON) &amp;&amp; (x&lt;=EPSINON))</strong></span></div><div style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><span style=\"color: rgb(51, 51, 51);\">或者</span><span style=\"color: rgb(51, 51, 51);\"><strong>if (</strong></span><span style=\"color: rgb(102, 102, 102);\"><strong>fabs(x)</strong></span><span style=\"color: rgb(51, 51, 51);\"><strong>&lt;=EPSINON) &nbsp;</strong>//</span><span style=\"color: rgb(102, 102, 102);\">fabs(x)取x的绝对值</span></div><div style=\"caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: -webkit-standard;\"><span style=\"color: rgb(51, 51, 51);\">其中EPSINON是允许的误差（即精度）。</span></div></div>"
    }
  ]
}
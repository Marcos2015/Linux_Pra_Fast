{
  "title": "[软件仓库]CentOS下配置yum本地源服务环境",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">环境 vmware + centos5.7<br>目录 /data/Centos/i386/</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">1、挂载文件<br>mkdir -p /mnt/soft<br>mount -o loop -t iso9660 /dev/cdrom /mnt/soft<br>cd /data/Centos/i386/</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">2.新建一个自定义的目录，用来放置你的RPM包，并复制一份。<br>mkdir -p /data/Centos/i386/<br>cp -rf /mnt/soft/CentOS/ /data/CentOS/i386/<br>&nbsp;<br>3.将/mnt/soft下的repodata/ 拷贝到/data/Centos/i386/CentOS下<br>cp -rf /mnt/soft/repodata/ /data/Centos/i386/CentOS/&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;<br>4.安装rpm -ivh /mnt/soft/CentOS/createrepo-0.4.11-3.el5.noarch.rpm&nbsp; （此包是用来安装服务端设置软件仓库及信息文件）</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">5.生成客户端所需的信息文件<br>createrepo -g /mnt/soft/repodata/comps.xml /data/Centos/i386/<br>&nbsp;<br>6.将key文件（用于客户端与服务端的认证）拷入指定目录/data/Centos/i386 下<br>cp /mnt/soft/RPM-GPG-KEY-CentOS-5 /data/Centos/i386/</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">7.更改yum的配置文件，更改之前CentOS-Base.repo要做好备份<br>vim CentOS-Base.repo<br>[base]<br>name=CentOS5.7-base<br>baseurl=<a href=\"file:///data/Centos/i386/\">file:///data/Centos/i386/</a><br>enable=1<br>gpgcheck=1<br>gpgkey=<a href=\"file:///data/Centos/i386/RPM-GPG-KEY-CentOS-5\">file:///data/Centos/i386/RPM-GPG-KEY-CentOS-5</a></p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">先执行下yum clean all<br>&nbsp;<br>验证结果<br>[root@lx_web_s1 CentOS]# yum install zlib<br>Loaded plugins: fastestmirror<br>Loading mirror speeds from cached hostfile<br>Setting up Install Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package zlib.i386 0:1.2.3-4.el5 set to be updated<br>--&gt; Finished Dependency Resolution</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">Dependencies Resolved</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">================================================================================<br>&nbsp;Package&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Arch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Repository&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size<br>================================================================================<br>Updating:<br>&nbsp;zlib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i386&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.3-4.el5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 51 k</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">Transaction Summary<br>================================================================================<br>Install&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 Package(s)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>Update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 Package(s)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>Remove&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 Package(s)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">Total download size: 51 k<br>Is this ok [y/N]: y<br>Downloading Packages:<br>Running rpm_check_debug<br>Running Transaction Test<br>Finished Transaction Test<br>Transaction Test Succeeded<br>Running Transaction<br>&nbsp; Updating&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : zlib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1/2&nbsp;<br>&nbsp; Cleanup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : zlib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2/2</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">Updated:<br>&nbsp; zlib.i386 0:1.2.3-4.el5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">Complete!<br>这样安装/升级软件比网络源快很多。</p>"
    }
  ]
}
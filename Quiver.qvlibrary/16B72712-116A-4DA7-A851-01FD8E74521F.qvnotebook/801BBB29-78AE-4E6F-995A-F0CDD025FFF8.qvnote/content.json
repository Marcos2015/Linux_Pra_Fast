{
  "title": "Git 基础",
  "cells": [
    {
      "type": "text",
      "data": "<div style=\"position: relative;\"><embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span class=\"ico ico_type_Repost\" style=\"color: rgb(0, 0, 0); font-family: 'Microsoft YaHei'; font-size: 20px; line-height: 30px; display: inline-block; width: 19px; height: 19px; margin: 0px 2px 0px 0px; background-image: url(http://static.blog.csdn.net/images/ico_Repost.gif); vertical-align: middle; background-position: 0px 0px;\"></span><span style=\"color: rgb(0, 0, 0); font-family: 'Microsoft YaHei'; font-size: 20px; line-height: 30px;\">&nbsp;</span><h1 style=\"color: rgb(0, 0, 0); font-family: 'Microsoft YaHei'; line-height: 30px; margin: 0px; padding: 0px; display: inline; font-weight: normal; font-size: 20px; vertical-align: middle;\"><span class=\"link_title\"><a href=\"http://blog.csdn.net/chun799/article/details/9095635\" style=\"color: rgb(0, 0, 0); text-decoration: none;\">Git 基础</a></span></h1><div class=\"article_manage\" style=\"font-family: Arial; padding: 5px 0px; color: rgb(153, 153, 153); font-size: 12px; line-height: 24px; text-align: right;\"><span style=\"font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px; color: rgb(51, 51, 51);\">读完本章你就能上手使用 Git 了。本章将介绍几个最基本的，也是最常用的 Git 命令，以后绝大多数时间里用到的也就是这几个命令。读完本章，你就能初始化一个新的代码仓库，做一些适当配置；开始或停止跟踪某些文件；暂存或提交某些更新。我们还会展示如何让 Git 忽略某些文件，或是名称符合特定模式的文件；如何既快且容易地撤消犯下的小错误；如何浏览项目的更新历史，查看某两次更新之间的差异；以及如何从远程仓库拉数据下来或者推数据上去。</span></div><div id=\"article_content\" class=\"article_content\" style=\"font-family: Arial; font-size: 14px; margin: 20px 0px 0px; line-height: 26px; color: rgb(51, 51, 51);\"><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t0\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-git-\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-git-\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>取得项目的 Git 仓库</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">有两种取得 Git 项目仓库的方法。第一种是在现存的目录下，通过导入所有文件来创建新的 Git 仓库。第二种是从已有的 Git 仓库克隆出一个新的镜像仓库来。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t1\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>在工作目录中初始化新仓库</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要对现有的某个项目开始用 Git 管理，只需到此项目所在的目录，执行：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git init\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">初始化后，在当前目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。不过目前，仅仅是按照既有的结构框架初始化好了里边所有的文件和目录，但我们还没有开始跟踪管理项目中的任何一个文件。（在第九章我们会详细说明刚才创建的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.git</code>&nbsp;目录中究竟有哪些文件，以及都起些什么作用。）</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果当前目录下有几个文件想要纳入版本控制，需要先用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;命令告诉 Git 开始对这些文件进行跟踪，然后提交：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add *.c\n$ git add README\n$ git commit -m 'initial project version'\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">稍后我们再逐一解释每条命令的意思。不过现在，你已经得到了一个实际维护着若干文件的 Git 仓库。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t2\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-1\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-1\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>从现有仓库克隆</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果想对某个开源项目出一份力，可以先把该项目的 Git 仓库复制一份出来，这就需要用到&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git clone</code>&nbsp;命令。如果你熟悉其他的 VCS 比如 Subversion，你可能已经注意到这里使用的是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">clone</code>&nbsp;而不是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">checkout</code>。这是个非常重要的差别，Git 收取的是项目历史的所有数据（每一个文件的每一个版本），服务器上有的数据克隆之后本地也都有了。实际上，即便服务器的磁盘发生故障，用任何一个克隆出来的客户端都可以重建服务器上的仓库，回到当初克隆时的状态（虽然可能会丢失某些服务器端的挂钩设置，但所有版本的数据仍旧还在，有关细节请参考第四章）。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">克隆仓库的命令格式为&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git clone [url]</code>。比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git clone <a href=\"git://github.com/schacon/grit.git\">git://github.com/schacon/grit.git</a>\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这会在当前目录下创建一个名为<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">grit</code>的目录，其中包含一个&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.git</code>&nbsp;的目录，用于保存下载下来的所有版本记录，然后从中取出最新版本的文件拷贝。如果进入这个新建的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">grit</code>&nbsp;目录，你会看到项目中的所有文件已经在里边了，准备好后续的开发和使用。如果希望在克隆的时候，自己定义要新建的项目目录名称，可以在上面的命令末尾指定新的名字：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git clone <a href=\"git://github.com/schacon/grit.git\">git://github.com/schacon/grit.git</a> mygrit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">唯一的差别就是，现在新建的目录成了&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">mygrit</code>，其他的都和上边的一样。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Git 支持许多数据传输协议。之前的例子使用的是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git://</code>&nbsp;协议，不过你也可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">http(s)://</code>&nbsp;或者&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">user@server:/path.git</code>&nbsp;表示的 SSH 传输协议。我们会在第四章详细介绍所有这些协议在服务器端该如何配置使用，以及各种方式之间的利弊。</p><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t3\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-2\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-2\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>记录每次更新到仓库</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在我们手上已经有了一个真实项目的 Git 仓库，并从这个仓库中取出了所有文件的工作拷贝。接下来，对这些文件作些修改，在完成了一个阶段的目标之后，提交本次更新到仓库。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">请记住，工作目录下面的所有文件都不外乎这两种状态：已跟踪或未跟踪。已跟踪的文件是指本来就被纳入版本控制管理的文件，在上次快照中有它们的记录，工作一段时间后，它们的状态可能是未更新，已修改或者已放入暂存区。而所有其他文件都属于未跟踪文件。它们既没有上次更新时的快照，也不在当前的暂存区域。初次克隆某个仓库时，工作目录中的所有文件都属于已跟踪文件，且状态为未修改。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在编辑过某些文件之后，Git 将这些文件标为已修改。我们逐步把这些修改过的文件放到暂存区域，直到最后一次性提交所有这些暂存起来的文件，如此重复。所以使用 Git 时的文件状态变化周期如图 2-1 所示。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Insert 18333fig0201.png 图 2-1. 文件的状态变化周期</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t4\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-3\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-3\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>检查当前文件状态</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要确定哪些文件当前处于什么状态，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;命令。如果在克隆仓库之后立即执行此命令，会看到类似这样的输出：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git status\n# On branch master\nnothing to commit (working directory clean)\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这说明你现在的工作目录相当干净。换句话说，所有已跟踪文件在上次提交后都未被更改过。此外，上面的信息还表明，当前目录下没有出现任何处于未跟踪的新文件，否则 Git 会在这里列出来。最后，该命令还显示了当前所在的分支是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">master</code>，这是默认的分支名称，实际是可以修改的，现在先不用考虑。下一章我们就会详细讨论分支和引用。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在让我们用 vim 创建一个新文件 README，保存退出后运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;会看到该文件出现在未跟踪文件列表中：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ vim README\n$ git status\n# On branch master\n# Untracked files:\n#   (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#   README\nnothing added to commit but untracked files present (use \"git add\" to track)\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在状态报告中可以看到新建的<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">README</code>文件出现在“Untracked files”下面。未跟踪的文件意味着Git在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”，因而不用担心把临时文件什么的也归入版本管理。不过现在的例子中，我们确实想要跟踪管理 README 这个文件。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t5\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-4\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-4\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>跟踪新文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">使用命令&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;开始跟踪一个新文件。所以，要跟踪 README 文件，运行：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add README\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">此时再运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;命令，会看到 README 文件已被跟踪，并处于暂存状态：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">只要在 “Changes to be committed” 这行下面的，就说明是已暂存状态。如果此时提交，那么该文件此时此刻的版本将被留存在历史记录中。你可能会想起之前我们使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git init</code>&nbsp;后就运行了&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;命令，开始跟踪当前目录下的文件。在&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;后面可以指明要跟踪的文件或目录路径。如果是目录的话，就说明要递归跟踪该目录下的所有文件。（译注：其实&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;的潜台词就是把目标文件快照放入暂存区域，也就是 add file into staged area，同时未曾跟踪过的文件标记为需要跟踪。这样就好理解后续 add 操作的实际意义了。）</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t6\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-5\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-5\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>暂存已修改文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在我们修改下之前已跟踪过的文件&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">benchmarks.rb</code>，然后再次运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">status</code>&nbsp;命令，会看到这样的状态报告：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#\n# Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#\n#   modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">文件&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">benchmarks.rb</code>&nbsp;出现在 “Changes not staged for commit” 这行下面，说明已跟踪文件的内容发生了变化，但还没有放到暂存区。要暂存这次更新，需要运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;命令（这是个多功能命令，根据目标文件的状态不同，此命令的效果也不同：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等）。现在让我们运行<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;将 benchmarks.rb 放到暂存区，然后再看看&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;的输出：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add benchmarks.rb\n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#   modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在两个文件都已暂存，下次提交时就会一并记录到仓库。假设此时，你想要在&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">benchmarks.rb</code>&nbsp;里再加条注释，重新编辑存盘后，准备好提交。不过且慢，再运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;看看：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ vim benchmarks.rb \n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#   modified:   benchmarks.rb\n#\n# Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#\n#   modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">怎么回事？&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">benchmarks.rb</code>&nbsp;文件出现了两次！一次算未暂存，一次算已暂存，这怎么可能呢？好吧，实际上 Git 只不过暂存了你运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;命令时的版本，如果现在提交，那么提交的是添加注释前的版本，而非当前工作目录中的版本。所以，运行了<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;之后又作了修订的文件，需要重新运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;把最新版本重新暂存起来：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add benchmarks.rb\n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#   modified:   benchmarks.rb\n#\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t7\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-6\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-6\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>忽略某些文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。我们可以创建一个名为&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.gitignore</code>&nbsp;的文件，列出要忽略的文件模式。来看一个实际的例子：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ cat .gitignore\n*.[oa]\n*~\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">第一行告诉 Git 忽略所有以&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.o</code>&nbsp;或&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.a</code>&nbsp;结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的，我们用不着跟踪它们的版本。第二行告诉 Git 忽略所有以波浪符（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">~</code>）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。此外，你可能还需要忽略&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">log</code>，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">tmp</code>&nbsp;或者&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">pid</code>&nbsp;目录，以及自动生成的文档等等。要养成一开始就设置好&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.gitignore</code>&nbsp;文件的习惯，以免将来误提交这类无用的文件。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">文件&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.gitignore</code>&nbsp;的格式规范如下：</p><ul style=\"margin: 15px 0px; padding: 0px 0px 0px 30px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\"><li style=\"margin: 0px; padding: 0px; border: 0px;\">所有空行或者以注释符号&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">＃</code>&nbsp;开头的行都会被 Git 忽略。</li><li style=\"margin: 0px; padding: 0px; border: 0px;\">可以使用标准的 glob 模式匹配。</li><li style=\"margin: 0px; padding: 0px; border: 0px;\">匹配模式最后跟反斜杠（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">/</code>）说明要忽略的是目录。</li><li style=\"margin: 0px; padding: 0px; border: 0px;\">要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">!</code>）取反。</li></ul><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">*</code>）匹配零个或多个任意字符；<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">[abc]</code>&nbsp;匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">?</code>）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">[0-9]</code>&nbsp;表示匹配所有 0 到 9 的数字）。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们再看一个&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.gitignore</code>&nbsp;文件的例子：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\"># 此为注释 – 将被 Git 忽略\n# 忽略所有 .a 结尾的文件\n*.a\n# 但 lib.a 除外\n!lib.a\n# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO\n/TODO\n# 忽略 build/ 目录下的所有文件\nbuild/\n# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt\ndoc/*.txt\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t8\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-7\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-7\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>查看已暂存和未暂存的更新</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">实际上&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;的显示比较简单，仅仅是列出了修改过的文件，如果要查看具体修改了什么地方，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>&nbsp;命令。稍后我们会详细介绍&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>，不过现在，它已经能回答我们的两个问题了：当前做的哪些更新还没有暂存？有哪些更新已经暂存起来准备好了下次提交？&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>&nbsp;会使用文件补丁的格式显示具体添加和删除的行。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">假如再次修改&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">README</code>&nbsp;文件后暂存，然后编辑&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">benchmarks.rb</code>&nbsp;文件后先别暂存，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">status</code>&nbsp;命令将会看到：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#   new file:   README\n#\n# Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#\n#   modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要查看尚未暂存的文件更新了哪些部分，不加参数直接输入&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git diff\ndiff --git a/benchmarks.rb b/benchmarks.rb\nindex 3cb747f..da65585 100644\n--- a/benchmarks.rb\n+++ b/benchmarks.rb\n@@ -36,6 +36,10 @@ def main\n           @commit.parents[0].parents[0].parents[0]\n         end\n\n+        run_code(x, 'commits 1') do\n+          git.commits.size\n+        end\n+\n         run_code(x, 'commits 2') do\n           log = git.commits('master', 15)\n           log.size\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">若要看已经暂存起来的文件和上次提交时的快照之间的差异，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff --cached</code>&nbsp;命令。（Git 1.6.1 及更高版本还允许使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff --staged</code>，效果是相同的，但更好记些。）来看看实际的效果：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git diff --cached\ndiff --git a/README b/README\nnew file mode 100644\nindex 0000000..03902a1\n--- /dev/null\n+++ b/README2\n@@ -0,0 +1,5 @@\n+grit\n+ by Tom Preston-Werner, Chris Wanstrath\n+ <a href=\"http://github.com/mojombo/grit\">http://github.com/mojombo/grit</a>\n+\n+Grit is a Ruby library for extracting information from a Git repository\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">请注意，单单&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>&nbsp;不过是显示还没有暂存起来的改动，而不是这次工作和上次提交之间的差异。所以有时候你一下子暂存了所有更新过的文件后，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>&nbsp;后却什么也没有，就是这个原因。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">像之前说的，暂存 benchmarks.rb 后再编辑，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;会看到暂存前后的两个版本：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add benchmarks.rb\n$ echo '# test line' &gt;&gt; benchmarks.rb\n$ git status\n# On branch master\n#\n# Changes to be committed:\n#\n#   modified:   benchmarks.rb\n#\n# Changes not staged for commit:\n#\n#   modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff</code>&nbsp;看暂存前后的变化：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git diff\ndiff --git a/benchmarks.rb b/benchmarks.rb\nindex e445e28..86b2f7c 100644\n--- a/benchmarks.rb\n+++ b/benchmarks.rb\n@@ -127,3 +127,4 @@ end\n main()\n\n ##pp Grit::GitRuby.cache_client.stats\n+# test line\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">然后用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git diff --cached</code>&nbsp;查看已经暂存起来的变化：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git diff --cached\ndiff --git a/benchmarks.rb b/benchmarks.rb\nindex 3cb747f..e445e28 100644\n--- a/benchmarks.rb\n+++ b/benchmarks.rb\n@@ -36,6 +36,10 @@ def main\n          @commit.parents[0].parents[0].parents[0]\n        end\n\n+        run_code(x, 'commits 1') do\n+          git.commits.size\n+        end\n+\n        run_code(x, 'commits 2') do\n          log = git.commits('master', 15)\n          log.size\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t9\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-8\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-8\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>提交更新</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在的暂存区域已经准备妥当可以提交了。在此之前，请一定要确认还有什么修改过的或新建的文件还没有&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;过，否则提交的时候不会记录这些还没暂存起来的变化。所以，每次准备提交前，先用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;看下，是不是都已暂存起来了，然后再运行提交命令&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git commit</code>：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git commit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这种方式会启动文本编辑器以便输入本次提交的说明。（默认会启用 shell 的环境变量&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">$EDITOR</code>&nbsp;所指定的软件，一般都是 vim 或 emacs。当然也可以按照第一章介绍的方式，使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git config --global core.editor</code>&nbsp;命令设定你喜欢的编辑软件。）</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">编辑器会显示类似下面的文本信息（本例选用 Vim 的屏显方式展示）：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\"># Please enter the commit message for your changes. Lines starting\n# with '#' will be ignored, and an empty message aborts the commit.\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       new file:   README\n#       modified:   benchmarks.rb\n~\n~\n~\n\".git/COMMIT_EDITMSG\" 10L, 283C\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以看到，默认的提交消息包含最后一次运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;的输出，放在注释行里，另外开头还有一空行，供你输入提交说明。你完全可以去掉这些注释行，不过留着也没关系，多少能帮你回想起这次更新的内容有哪些。（如果觉得这还不够，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-v</code>选项将修改差异的每一行都包含到注释中来。）退出编辑器时，Git 会丢掉注释行，将说明内容和本次更新提交到仓库。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">另外也可以用 -m 参数后跟提交说明的方式，在一行命令中提交更新：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git commit -m \"Story 182: Fix benchmarks for speed\"\n[master]: created 463dc4f: \"Fix benchmarks for speed\"\n 2 files changed, 3 insertions(+), 0 deletions(-)\n create mode 100644 README\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">好，现在你已经创建了第一个提交！可以看到，提交后它会告诉你，当前是在哪个分支（master）提交的，本次提交的完整 SHA-1 校验和是什么（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">463dc4f</code>），以及在本次提交中，有多少文件修订过，多少行添改和删改过。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">记住，提交时记录的是放在暂存区域的快照，任何还未暂存的仍然保持已修改状态，可以在下次提交时纳入版本管理。每一次运行提交操作，都是对你项目作一次快照，以后可以回到这个状态，或者进行比较。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t10\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-9\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-9\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>跳过使用暂存区域</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。Git 提供了一个跳过使用暂存区域的方式，只要在提交的时候，给&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git commit</code>&nbsp;加上&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-a</code>&nbsp;选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>步骤：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git status\n# On branch master\n#\n# Changes not staged for commit:\n#\n#   modified:   benchmarks.rb\n#\n$ git commit -a -m 'added new benchmarks'\n[master 83e38c7] added new benchmarks\n 1 files changed, 5 insertions(+), 0 deletions(-)\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">看到了吗？提交之前不再需要&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add</code>&nbsp;文件 benchmarks.rb 了。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t11\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-10\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-10\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>移除文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git rm</code>&nbsp;命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果只是简单地从工作目录中手工删除文件，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;时就会在 “Changes not staged for commit” 部分（也就是_未暂存_清单）看到：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ rm grit.gemspec\n$ git status\n# On branch master\n#\n# Changes not staged for commit:\n#   (use \"git add/rm &lt;file&gt;...\" to update what will be committed)\n#\n#       deleted:    grit.gemspec\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">然后再运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git rm</code>&nbsp;记录此次移除文件的操作：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git rm grit.gemspec\nrm 'grit.gemspec'\n$ git status\n# On branch master\n#\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       deleted:    grit.gemspec\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">最后提交的时候，该文件就不再纳入版本管理了。如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-f</code>（译注：即 force 的首字母），以防误删除文件后丢失修改的内容。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。换句话说，仅是从跟踪清单中删除。比如一些大型日志文件或者一堆&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.a</code>&nbsp;编译文件，不小心纳入仓库后，要移除跟踪但不删除文件，以便稍后在<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.gitignore</code>&nbsp;文件中补上，用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--cached</code>&nbsp;选项即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git rm --cached readme.txt\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">后面可以列出文件或者目录的名字，也可以使用 glob 模式。比方说：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git rm log/\\*.log\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">注意到星号&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">*</code>&nbsp;之前的反斜杠&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">\\</code>，因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开（译注：实际上不加反斜杠也可以运行，只不过按照 shell 扩展的话，仅仅删除指定目录下的文件而不会递归匹配。上面的例子本来就指定了目录，所以效果等同，但下面的例子就会用递归方式匹配，所以必须加反斜杠。）。此命令删除所有&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">log/</code>&nbsp;目录下扩展名为&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.log</code>的文件。类似的比如：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git rm \\*~\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">会递归删除当前目录及其子目录中所有&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">~</code>&nbsp;结尾的文件。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t12\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-11\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-11\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>移动文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">不像其他的 VCS 系统，Git 并不跟踪文件移动操作。如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。不过 Git 非常聪明，它会推断出究竟发生了什么，至于具体是如何做到的，我们稍后再谈。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">既然如此，当你看到 Git 的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">mv</code>&nbsp;命令时一定会困惑不已。要在 Git 中对文件改名，可以这么做：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git mv file_from file_to\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">它会恰如预期般正常工作。实际上，即便此时查看状态信息，也会明白无误地看到关于重命名操作的说明：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git mv README.txt README\n$ git status\n# On branch master\n# Your branch is ahead of 'origin/master' by 1 commit.\n#\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       renamed:    README.txt -&gt; README\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">其实，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git mv</code>&nbsp;就相当于运行了下面三条命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ mv README.txt README\n$ git rm README.txt\n$ git add README\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如此分开操作，Git 也会意识到这是一次改名，所以不管何种方式都一样。当然，直接用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git mv</code>&nbsp;轻便得多，不过有时候用其他工具批处理改名的话，要记得在提交前删除老的文件名，再添加新的文件名。</p><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t13\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-12\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-12\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>查看提交历史</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;命令查看。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">接下来的例子会用我专门用于演示的 simplegit 项目，运行下面的命令获取该项目源代码：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">git clone <a href=\"git://github.com/schacon/simplegit-progit.git\">git://github.com/schacon/simplegit-progit.git</a>\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">然后在此项目中运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>，应该会看到下面的输出：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test code\n\ncommit a11bef06a3f659402fe7563abf99ad00de2209e6\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sat Mar 15 10:31:28 2008 -0700\n\n    first commit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">默认不用任何参数的话，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;会按提交时间列出所有的更新，最近的更新排在最上面。看到了吗，每次更新都有一个 SHA-1 校验和、作者的名字和电子邮件地址、提交时间，最后缩进一个段落显示提交说明。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\"><code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;有许多选项可以帮助你搜寻感兴趣的提交，接下来我们介绍些最常用的。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们常用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-p</code>&nbsp;选项展开显示每次提交的内容差异，用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-2</code>&nbsp;则仅显示最近的两次更新：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log -p -2\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\ndiff --git a/Rakefile b/Rakefile\nindex a874b73..8f94139 100644\n--- a/Rakefile\n+++ b/Rakefile\n@@ -5,7 +5,7 @@ require 'rake/gempackagetask'\n spec = Gem::Specification.new do |s|\n-    s.version   =   \"0.1.0\"\n+    s.version   =   \"0.1.1\"\n     s.author    =   \"Scott Chacon\"\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test code\n\ndiff --git a/lib/simplegit.rb b/lib/simplegit.rb\nindex a0a60ae..47c6340 100644\n--- a/lib/simplegit.rb\n+++ b/lib/simplegit.rb\n@@ -18,8 +18,3 @@ class SimpleGit\n     end\n\n end\n-\n-if $0 == __FILE__\n-  git = SimpleGit.new\n-  puts git.show\n-end\n\\ No newline at end of file\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在做代码审查，或者要快速浏览其他协作者提交的更新都作了哪些改动时，就可以用这个选项。此外，还有许多摘要选项可以用，比如&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--stat</code>，仅显示简要的增改行数统计：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --stat \ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\n Rakefile |    2 +-\n 1 files changed, 1 insertions(+), 1 deletions(-)\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test code\n\n lib/simplegit.rb |    5 -----\n 1 files changed, 0 insertions(+), 5 deletions(-)\n\ncommit a11bef06a3f659402fe7563abf99ad00de2209e6\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sat Mar 15 10:31:28 2008 -0700\n\n    first commit\n\n README           |    6 ++++++\n Rakefile         |   23 +++++++++++++++++++++++\n lib/simplegit.rb |   25 +++++++++++++++++++++++++\n 3 files changed, 54 insertions(+), 0 deletions(-)\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">每个提交都列出了修改过的文件，以及其中添加和移除的行数，并在最后列出所有增减行数小计。还有个常用的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--pretty</code>&nbsp;选项，可以指定使用完全不同于默认格式的方式展示提交历史。比如用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">oneline</code>&nbsp;将每个提交放在一行显示，这在提交数很大时非常有用。另外还有&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">short</code>，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">full</code>&nbsp;和&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">fuller</code>&nbsp;可以用，展示的信息或多或少有些不同，请自己动手实践一下看看效果如何。</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --pretty=oneline\nca82a6dff817ec66f44342007202690a93763949 changed the version number\n085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary test code\na11bef06a3f659402fe7563abf99ad00de2209e6 first commit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">但最有意思的是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">format</code>，可以定制要显示的记录格式，这样的输出便于后期编程提取分析，像这样：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --pretty=format:\"%h - %an, %ar : %s\"\nca82a6d - Scott Chacon, 11 months ago : changed the version number\n085bb3b - Scott Chacon, 11 months ago : removed unnecessary test code\na11bef0 - Scott Chacon, 11 months ago : first commit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">表 2-1 列出了常用的格式占位符写法及其代表的意义。</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">选项   说明\n%H  提交对象（commit）的完整哈希字串\n%h  提交对象的简短哈希字串\n%T  树对象（tree）的完整哈希字串\n%t  树对象的简短哈希字串\n%P  父对象（parent）的完整哈希字串\n%p  父对象的简短哈希字串\n%an 作者（author）的名字\n%ae 作者的电子邮件地址\n%ad 作者修订日期（可以用 -date= 选项定制格式）\n%ar 作者修订日期，按多久以前的方式显示\n%cn 提交者(committer)的名字\n%ce 提交者的电子邮件地址\n%cd 提交日期\n%cr 提交日期，按多久以前的方式显示\n%s  提交说明\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">你一定奇怪_作者（author）_和_提交者（committer）_之间究竟有何差别，其实作者指的是实际作出修改的人，提交者指的是最后将此工作成果提交到仓库的人。所以，当你为某个项目发布补丁，然后某个核心成员将你的补丁并入项目时，你就是作者，而那个核心成员就是提交者。我们会在第五章再详细介绍两者之间的细微差别。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">用 oneline 或 format 时结合&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--graph</code>&nbsp;选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况。在我们之前提到的 Grit 项目仓库中可以看到：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --pretty=format:\"%h %s\" --graph\n* 2d3acf9 ignore errors from SIGCHLD on trap\n*  5e3ee11 Merge branch 'master' of <a href=\"git://github.com/dustin/grit\">git://github.com/dustin/grit</a>\n|\\\n| * 420eac9 Added a method for getting the current branch.\n* | 30e367c timeout code and tests\n* | 5a09431 add timeout protection to grit\n* | e1193f8 support for heads with slashes in them\n|/\n* d6016bc require time for xmlschema\n*  11d191e Merge branch 'defunkt' into local\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">以上只是简单介绍了一些&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;命令支持的选项。表 2-2 还列出了一些其他常用的选项及其释义。</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">选项  说明\n-p  按补丁格式显示每个更新之间的差异。\n--stat  显示每次更新的文件修改统计信息。\n--shortstat 只显示 --stat 中最后的行数修改添加移除统计。\n--name-only 仅在提交信息后显示已修改的文件清单。\n--name-status   显示新增、修改、删除的文件清单。\n--abbrev-commit 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。\n--relative-date 使用较短的相对时间显示（比如，“2 weeks ago”）。\n--graph 显示 ASCII 图形表示的分支合并历史。\n--pretty    使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t14\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-13\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-13\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>限制输出长度</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">除了定制输出格式的选项之外，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;还有许多非常实用的限制输出长度的选项，也就是只输出部分提交信息。之前我们已经看到过&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-2</code>&nbsp;了，它只显示最近的两条提交，实际上，这是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-&lt;n&gt;</code>&nbsp;选项的写法，其中的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">n</code>&nbsp;可以是任何自然数，表示仅显示最近的若干条提交。不过实践中我们是不太用这个选项的，Git 在输出所有提交时会自动调用分页程序（less），要看更早的更新只需翻到下页即可。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">另外还有按照时间作限制的选项，比如&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--since</code>&nbsp;和&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--until</code>。下面的命令列出所有最近两周内的提交：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --since=2.weeks\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">你可以给出各种时间格式，比如说具体的某一天（“2008-01-15”），或者是多久以前（“2 years 1 day 3 minutes ago”）。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">还可以给出若干搜索条件，列出符合的提交。用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--author</code>&nbsp;选项显示指定作者的提交，用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--grep</code>&nbsp;选项搜索提交说明中的关键字。（请注意，如果要得到同时满足这两个选项搜索条件的提交，就必须用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--all-match</code>&nbsp;选项。否则，满足任意一个条件的提交都会被匹配出来）</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">另一个真正实用的<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>选项是路径(path)，如果只关心某些文件或者目录的历史提交，可以在&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;选项的最后指定它们的路径。因为是放在最后位置上的选项，所以用两个短划线（<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--</code>）隔开之前的选项和后面限定的路径名。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">表 2-3 还列出了其他常用的类似选项。</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">选项  说明\n-(n)    仅显示最近的 n 条提交\n--since, --after    仅显示指定时间之后的提交。\n--until, --before   仅显示指定时间之前的提交。\n--author    仅显示指定作者相关的提交。\n--committer 仅显示指定提交者相关的提交。\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">来看一个实际的例子，如果要查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试脚本（位于项目的 t/ 目录下的文件），可以用下面的查询命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --pretty=\"%h - %s\" --author=gitster --since=\"2008-10-01\" \\\n   --before=\"2008-11-01\" --no-merges -- t/\n5610e3b - Fix testcase failure when extended attribute\nacd3b9e - Enhance hold_lock_file_for_{update,append}()\nf563754 - demonstrate breakage of detached checkout wi\nd1a43f2 - reset --hard/read-tree --reset -u: remove un\n51a94af - Fix \"checkout --track -b newbranch\" on detac\nb0ad11e - pull: allow \"git pull origin $something:$cur\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Git 项目有 20,000 多条提交，但我们给出搜索选项后，仅列出了其中满足条件的 6 条。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t15\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-14\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-14\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>使用图形化工具查阅提交历史</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">有时候图形化工具更容易展示历史提交的变化，随 Git 一同发布的 gitk 就是这样一种工具。它是用 Tcl/Tk 写成的，基本上相当于<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;命令的可视化版本，凡是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;可以用的选项也都能用在 gitk 上。在项目工作目录中输入 gitk 命令后，就会启动图 2-2 所示的界面。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Insert 18333fig0202.png 图 2-2. gitk 的图形界面</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">上半个窗口显示的是历次提交的分支祖先图谱，下半个窗口显示当前点选的提交对应的具体差异。</p><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t16\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-15\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-15\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>撤消操作</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">任何时候，你都有可能需要撤消刚才所做的某些操作。接下来，我们会介绍一些基本的撤消操作相关的命令。请注意，有些撤销操作是不可逆的，所以请务必谨慎小心，一旦失误，就有可能丢失部分工作成果。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t17\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-16\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-16\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>修改最后一次提交</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">有时候我们提交完了才发现漏掉了几个文件没有加，或者提交信息写错了。想要撤消刚才的提交操作，可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--amend</code>&nbsp;选项重新提交：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git commit --amend\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">此命令将使用当前的暂存区域快照提交。如果刚才提交完没有作任何改动，直接运行此命令的话，相当于有机会重新编辑提交说明，但将要提交的文件快照和之前的一样。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">启动文本编辑器后，会看到上次提交时的说明，编辑它确认没问题后保存退出，就会使用新的提交说明覆盖刚才失误的提交。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果刚才提交时忘了暂存某些修改，可以先补上暂存操作，然后再运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--amend</code>&nbsp;提交：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git commit -m 'initial commit'\n$ git add forgotten_file\n$ git commit --amend\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">上面的三条命令最终只是产生一个提交，第二个提交命令修正了第一个的提交内容。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t18\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-17\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-17\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>取消已经暂存的文件</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">接下来的两个小节将演示如何取消暂存区域中的文件，以及如何取消工作目录中已修改的文件。不用担心，查看文件状态的时候就提示了该如何撤消，所以不需要死记硬背。来看下面的例子，有两个修改过的文件，我们想要分开提交，但不小心用<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git add .</code>&nbsp;全加到了暂存区域。该如何撤消暂存其中的一个文件呢？其实，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;的命令输出已经告诉了我们该怎么做：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git add .\n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       modified:   README.txt\n#       modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">就在 “Changes to be committed” 下面，括号中有提示，可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git reset HEAD &lt;file&gt;...</code>&nbsp;的方式取消暂存。好吧，我们来试试取消暂存 benchmarks.rb 文件：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git reset HEAD benchmarks.rb\nbenchmarks.rb: locally modified\n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       modified:   README.txt\n#\n# Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#   (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory)\n#\n#       modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这条命令看起来有些古怪，先别管，能用就行。现在 benchmarks.rb 文件又回到了之前已修改未暂存的状态。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t19\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-18\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-18\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>取消对文件的修改</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果觉得刚才对 benchmarks.rb 的修改完全没有必要，该如何取消修改，回到之前的状态（也就是修改之前的版本）呢？<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git status</code>&nbsp;同样提示了具体的撤消方法，接着上面的例子，现在未暂存区域看起来像这样：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\"># Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#   (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory)\n#\n#       modified:   benchmarks.rb\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在第二个括号中，我们看到了抛弃文件修改的命令（至少在 Git 1.6.1 以及更高版本中会这样提示，如果你还在用老版本，我们强烈建议你升级，以获取最佳的用户体验），让我们试试看：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git checkout -- benchmarks.rb\n$ git status\n# On branch master\n# Changes to be committed:\n#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)\n#\n#       modified:   README.txt\n#\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以看到，该文件已经恢复到修改前的版本。你可能已经意识到了，这条命令有些危险，所有对文件的修改都没有了，因为我们刚刚把之前版本的文件复制过来重写了此文件。所以在用这条命令前，请务必确定真的不再需要保留刚才的修改。如果只是想回退版本，同时保留刚才的修改以便将来继续工作，可以用下章介绍的 stashing 和分支来处理，应该会更好些。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">记住，任何已经提交到 Git 的都可以被恢复。即便在已经删除的分支中的提交，或者用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--amend</code>&nbsp;重新改写的提交，都可以被恢复（关于数据恢复的内容见第九章）。所以，你可能失去的数据，仅限于没有提交过的，对 Git 来说它们就像从未存在过一样。</p><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t20\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-19\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-19\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>远程仓库的使用</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要参与任何一个 Git 项目的协作，必须要了解该如何管理远程仓库。远程仓库是指托管在网络上的项目仓库，可能会有好多个，其中有些你只能读，另外有些可以写。同他人协作开发某个项目时，需要管理这些远程仓库，以便推送或拉取数据，分享各自的工作进展。管理远程仓库的工作，包括添加远程库，移除废弃的远程库，管理各式远程库分支，定义是否跟踪这些分支，等等。本节我们将详细讨论远程库的管理和使用。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t21\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-20\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-20\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>查看当前的远程库</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要查看当前配置有哪些远程仓库，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote</code>&nbsp;命令，它会列出每个远程库的简短名字。在克隆完某个项目后，至少可以看到一个名为 origin 的远程库，Git 默认使用这个名字来标识你所克隆的原始仓库：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git clone <a href=\"git://github.com/schacon/ticgit.git\">git://github.com/schacon/ticgit.git</a>\nInitialized empty Git repository in /private/tmp/ticgit/.git/\nremote: Counting objects: 595, done.\nremote: Compressing objects: 100% (269/269), done.\nremote: Total 595 (delta 255), reused 589 (delta 253)\nReceiving objects: 100% (595/595), 73.31 KiB | 1 KiB/s, done.\nResolving deltas: 100% (255/255), done.\n$ cd ticgit\n$ git remote\norigin\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">也可以加上&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-v</code>&nbsp;选项（译注：此为&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--verbose</code>&nbsp;的简写，取首字母），显示对应的克隆地址：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote -v\norigin  <a href=\"git://github.com/schacon/ticgit.git\">git://github.com/schacon/ticgit.git</a>\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果有多个远程仓库，此命令将全部列出。比如在我的 Grit 项目中，可以看到：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ cd grit\n$ git remote -v\nbakkdoor  <a href=\"git://github.com/bakkdoor/grit.git\">git://github.com/bakkdoor/grit.git</a>\ncho45     <a href=\"git://github.com/cho45/grit.git\">git://github.com/cho45/grit.git</a>\ndefunkt   <a href=\"git://github.com/defunkt/grit.git\">git://github.com/defunkt/grit.git</a>\nkoke      <a href=\"git://github.com/koke/grit.git\">git://github.com/koke/grit.git</a>\norigin    <a href=\"mailto:git@github.com\">git@github.com</a>:mojombo/grit.git\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这样一来，我就可以非常轻松地从这些用户的仓库中，拉取他们的提交到本地。请注意，上面列出的地址只有 origin 用的是 SSH URL 链接，所以也只有这个仓库我能推送数据上去（我们会在第四章解释原因）。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t22\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-21\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-21\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>添加远程仓库</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote add [shortname] [url]</code>：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote\norigin\n$ git remote add pb <a href=\"git://github.com/paulboone/ticgit.git\">git://github.com/paulboone/ticgit.git</a>\n$ git remote -v\norigin  <a href=\"git://github.com/schacon/ticgit.git\">git://github.com/schacon/ticgit.git</a>\npb  <a href=\"git://github.com/paulboone/ticgit.git\">git://github.com/paulboone/ticgit.git</a>\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在可以用字符串&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">pb</code>&nbsp;指代对应的仓库地址了。比如说，要抓取所有 Paul 有的，但本地仓库没有的信息，可以运行<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git fetch pb</code>：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git fetch pb\nremote: Counting objects: 58, done.\nremote: Compressing objects: 100% (41/41), done.\nremote: Total 44 (delta 24), reused 1 (delta 0)\nUnpacking objects: 100% (44/44), done.\nFrom <a href=\"git://github.com/paulboone/ticgit\">git://github.com/paulboone/ticgit</a>\n * [new branch]      master     -&gt; pb/master\n * [new branch]      ticgit     -&gt; pb/ticgit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在，Paul 的主干分支（master）已经完全可以在本地访问了，对应的名字是&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">pb/master</code>，你可以将它合并到自己的某个分支，或者切换到这个分支，看看有些什么有趣的更新。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t23\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-22\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-22\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>从远程仓库抓取数据</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">正如之前所看到的，可以用下面的命令从远程仓库抓取数据到本地：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git fetch [remote-name]\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">此命令会到远程仓库中拉取所有你本地仓库中还没有的数据。运行完成后，你就可以在本地访问该远程仓库中的所有分支，将其中某个分支合并到本地，或者只是取出某个分支，一探究竟。（我们会在第三章详细讨论关于分支的概念和操作。）</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果是克隆了一个仓库，此命令会自动将远程仓库归于 origin 名下。所以，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git fetch origin</code>&nbsp;会抓取从你上次克隆以来别人上传到此远程仓库中的所有更新（或是上次 fetch 以来别人提交的更新）。有一点很重要，需要记住，fetch 命令只是将远端的数据拉到本地仓库，并不自动合并到当前工作分支，只有当你确实准备好了，才能手工合并。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果设置了某个分支用于跟踪某个远端仓库的分支（参见下节及第三章的内容），可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git pull</code>&nbsp;命令自动抓取数据下来，然后将远端分支自动合并到本地仓库中当前分支。在日常工作中我们经常这么用，既快且好。实际上，默认情况下&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git clone</code>&nbsp;命令本质上就是自动创建了本地的 master 分支用于跟踪远程仓库中的 master 分支（假设远程仓库确实有 master 分支）。所以一般我们运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git pull</code>，目的都是要从原始克隆的远端仓库中抓取数据后，合并到工作目录中的当前分支。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t24\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-23\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-23\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>推送数据到远程仓库</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">项目进行到一个阶段，要同别人分享目前的成果，可以将本地仓库中的数据推送到远程仓库。实现这个任务的命令很简单：<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git push [remote-name] [branch-name]</code>。如果要把本地的 master 分支推送到&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">origin</code>&nbsp;服务器上（再次说明下，克隆操作会自动使用默认的 master 和 origin 名字），可以运行下面的命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git push origin master\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">只有在所克隆的服务器上有写权限，或者同一时刻没有其他人在推数据，这条命令才会如期完成任务。如果在你推数据前，已经有其他人推送了若干更新，那你的推送操作就会被驳回。你必须先把他们的更新抓取到本地，合并到自己的项目中，然后才可以再次推送。有关推送数据到远程仓库的详细内容见第三章。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t25\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-24\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-24\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>查看远程仓库信息</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们可以通过命令&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote show [remote-name]</code>&nbsp;查看某个远程仓库的详细信息，比如要看所克隆的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">origin</code>&nbsp;仓库，可以运行：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote show origin\n* remote origin\n  URL: <a href=\"git://github.com/schacon/ticgit.git\">git://github.com/schacon/ticgit.git</a>\n  Remote branch merged with 'git pull' while on branch master\n    master\n  Tracked remote branches\n    master\n    ticgit\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">除了对应的克隆地址外，它还给出了许多额外的信息。它友善地告诉你如果是在 master 分支，就可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git pull</code>&nbsp;命令抓取数据合并到本地。另外还列出了所有处于跟踪状态中的远端分支。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">上面的例子非常简单，而随着使用 Git 的深入，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote show</code>&nbsp;给出的信息可能会像这样：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote show origin\n* remote origin\n  URL: <a href=\"mailto:git@github.com\">git@github.com</a>:defunkt/github.git\n  Remote branch merged with 'git pull' while on branch issues\n    issues\n  Remote branch merged with 'git pull' while on branch master\n    master\n  New remote branches (next fetch will store in remotes/origin)\n    caching\n  Stale tracking branches (use 'git remote prune')\n    libwalker\n    walker2\n  Tracked remote branches\n    acl\n    apiv2\n    dashboard2\n    issues\n    master\n    postgres\n  Local branch pushed with 'git push'\n    master:master\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">它告诉我们，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git push</code>&nbsp;时缺省推送的分支是什么（译注：最后两行）。它还显示了有哪些远端分支还没有同步到本地（译注：第六行的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">caching</code>&nbsp;分支），哪些已同步到本地的远端分支在远端服务器上已被删除（译注：<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">Stale tracking branches</code>&nbsp;下面的两个分支），以及运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git pull</code>&nbsp;时将自动合并哪些分支（译注：前四行中列出的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">issues</code>&nbsp;和&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">master</code>&nbsp;分支）。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t26\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-25\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-25\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>远程仓库的删除和重命名</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在新版 Git 中可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote rename</code>&nbsp;命令修改某个远程仓库在本地的简称，比如想把&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">pb</code>&nbsp;改成&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">paul</code>，可以这么运行：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote rename pb paul\n$ git remote\norigin\npaul\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">注意，对远程仓库的重命名，也会使对应的分支名称发生变化，原来的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">pb/master</code>&nbsp;分支现在成了&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">paul/master</code>。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">碰到远端仓库服务器迁移，或者原来的克隆镜像不再使用，又或者某个参与者不再贡献代码，那么需要移除对应的远端仓库，可以运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git remote rm</code>&nbsp;命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git remote rm paul\n$ git remote\norigin\n</code></pre><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t27\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-26\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-26\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>打标签</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">同大多数 VCS 一样，Git 也可以对某一时间点上的版本打上标签。人们在发布某个软件版本（比如 v1.0 等等）的时候，经常这么做。本节我们一起来学习如何列出所有可用的标签，如何新建标签，以及各种不同类型标签之间的差别。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t28\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-27\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-27\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>列显已有的标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">列出现有标签的命令非常简单，直接运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git tag</code>&nbsp;即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag\nv0.1\nv1.3\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">显示的标签按字母顺序排列，所以标签的先后并不表示重要程度的轻重。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们可以用特定的搜索模式列出符合条件的标签。在 Git 自身项目仓库中，有着超过 240 个标签，如果你只对 1.4.2 系列的版本感兴趣，可以运行下面的命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag -l 'v1.4.2.*'\nv1.4.2.1\nv1.4.2.2\nv1.4.2.3\nv1.4.2.4\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t29\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-28\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-28\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>新建标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Git 使用的标签有两种类型：轻量级的（lightweight）和含附注的（annotated）。轻量级标签就像是个不会变化的分支，实际上它就是个指向特定提交对象的引用。而含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息；当然，如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t30\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-29\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-29\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>含附注的标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">创建一个含附注类型的标签非常简单，用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-a</code>&nbsp;（译注：取&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">annotated</code>&nbsp;的首字母）指定标签名字即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag -a v1.4 -m 'my version 1.4'\n$ git tag\nv0.1\nv1.3\nv1.4\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">而&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-m</code>&nbsp;选项则指定了对应的标签说明，Git 会将此说明一同保存在标签对象中。如果没有给出该选项，Git 会启动文本编辑软件供你输入标签说明。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git show</code>&nbsp;命令查看相应标签的版本信息，并连同显示打标签时的提交对象。</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git show v1.4\ntag v1.4\nTagger: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Feb 9 14:45:11 2009 -0800\n\nmy version 1.4\ncommit 15027957951b64cf874c3557a0f3547bd83b3ff6\nMerge: 4a447f7... a6b4c97...\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sun Feb 8 19:02:46 2009 -0800\n\n    Merge branch 'experiment'\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们可以看到在提交对象信息上面，列出了此标签的提交者和提交时间，以及相应的标签说明。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t31\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-30\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-30\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>签署标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果你有自己的私钥，还可以用 GPG 来签署标签，只需要把之前的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-a</code>&nbsp;改为&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-s</code>&nbsp;（译注： 取&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">signed</code>&nbsp;的首字母）即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag -s v1.5 -m 'my signed 1.5 tag'\nYou need a passphrase to unlock the secret key for\nuser: \"Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\"\n1024-bit DSA key, ID F721C45A, created 2009-02-09\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在再运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git show</code>&nbsp;会看到对应的 GPG 签名也附在其内：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git show v1.5\ntag v1.5\nTagger: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Feb 9 15:22:20 2009 -0800\n\nmy signed 1.5 tag\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.8 (Darwin)\n\niEYEABECAAYFAkmQurIACgkQON3DxfchxFr5cACeIMN+ZxLKggJQf0QYiQBwgySN\nKi0An2JeAVUCAiJ7Ox6ZEtK+NvZAj82/\n=WryJ\n-----END PGP SIGNATURE-----\ncommit 15027957951b64cf874c3557a0f3547bd83b3ff6\nMerge: 4a447f7... a6b4c97...\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sun Feb 8 19:02:46 2009 -0800\n\n    Merge branch 'experiment'\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">稍后我们再学习如何验证已经签署的标签。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t32\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-31\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-31\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>轻量级标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">轻量级标签实际上就是一个保存着对应提交对象的校验和信息的文件。要创建这样的标签，一个&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-a</code>，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-s</code>&nbsp;或&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">-m</code>&nbsp;选项都不用，直接给出标签名字即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag v1.4-lw\n$ git tag\nv0.1\nv1.3\nv1.4\nv1.4-lw\nv1.5\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git show</code>&nbsp;查看此标签信息，就只有相应的提交对象摘要：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git show v1.4-lw\ncommit 15027957951b64cf874c3557a0f3547bd83b3ff6\nMerge: 4a447f7... a6b4c97...\nAuthor: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Sun Feb 8 19:02:46 2009 -0800\n\n    Merge branch 'experiment'\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t33\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-32\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-32\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>验证标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git tag -v [tag-name]</code>&nbsp;（译注：取&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">verify</code>&nbsp;的首字母）的方式验证已经签署的标签。此命令会调用 GPG 来验证签名，所以你需要有签署者的公钥，存放在 keyring 中，才能验证：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag -v v1.4.2.1\nobject 883653babd8ee7ea23e6a5c392bb739348b1eb61\ntype commit\ntag v1.4.2.1\ntagger Junio C Hamano &lt;<a href=\"mailto:junkio@cox.net\">junkio@cox.net</a>&gt; 1158138501 -0700\n\nGIT 1.4.2.1\n\nMinor fixes since 1.4.2, including git-mv and git-http with alternates.\ngpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A\ngpg: Good signature from \"Junio C Hamano &lt;<a href=\"mailto:junkio@cox.net\">junkio@cox.net</a>&gt;\"\ngpg:                 aka \"[jpeg image of size 1513]\"\nPrimary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">若是没有签署者的公钥，会报告类似下面这样的错误：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A\ngpg: Can't check signature: public key not found\nerror: could not verify the tag 'v1.4.2.1'\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t34\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-33\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-33\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>后期加注标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">你甚至可以在后期对早先的某次提交加注标签。比如在下面展示的提交历史中：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --pretty=oneline\n15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch 'experiment'\na6b4c97498bd301d84096da251c98a07c7723e65 beginning write support\n0d52aaab4479697da7686c15f77a3d64d9165190 one more thing\n6d52a271eda8725415634dd79daabbc4d9b6008e Merge branch 'experiment'\n0b7434d86859cc7b8c3d5e1dddfed66ff742fcbc added a commit function\n4682c3261057305bdd616e23b64b0857d832627b added a todo file\n166ae0c4d3f420721acbb115cc33848dfcc2121a started write support\n9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile\n964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo\n8a5cbc430f1a9c3d00faaeffd07798508422908a updated readme\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">我们忘了在提交 “updated rakefile” 后为此项目打上版本号 v1.2，没关系，现在也能做。只要在打标签的时候跟上对应提交对象的校验和（或前几位字符）即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag -a v1.2 9fceb02\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以看到我们已经补上了标签：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git tag\nv0.1\nv1.2\nv1.3\nv1.4\nv1.4-lw\nv1.5\n\n$ git show v1.2\ntag v1.2\nTagger: Scott Chacon &lt;<a href=\"mailto:schacon@gee-mail.com\">schacon@gee-mail.com</a>&gt;\nDate:   Mon Feb 9 15:32:16 2009 -0800\n\nversion 1.2\ncommit 9fceb02d0ae598e95dc970b74767f19372d61af8\nAuthor: Magnus Chacon &lt;<a href=\"mailto:mchacon@gee-mail.com\">mchacon@gee-mail.com</a>&gt;\nDate:   Sun Apr 27 20:43:35 2008 -0700\n\n    updated rakefile\n...\n</code></pre><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t35\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-34\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-34\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>分享标签</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">默认情况下，<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git push</code>&nbsp;并不会把标签传送到远端服务器上，只有通过显式命令才能分享标签到远端仓库。其命令格式如同推送分支，运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git push origin [tagname]</code>&nbsp;即可：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git push origin v1.5\nCounting objects: 50, done.\nCompressing objects: 100% (38/38), done.\nWriting objects: 100% (44/44), 4.56 KiB, done.\nTotal 44 (delta 18), reused 8 (delta 1)\nTo <a href=\"mailto:git@github.com\">git@github.com</a>:schacon/simplegit.git\n* [new tag]         v1.5 -&gt; v1.5\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果要一次推送所有本地新增的标签上去，可以使用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">--tags</code>&nbsp;选项：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git push origin --tags\nCounting objects: 50, done.\nCompressing objects: 100% (38/38), done.\nWriting objects: 100% (44/44), 4.56 KiB, done.\nTotal 44 (delta 18), reused 8 (delta 1)\nTo <a href=\"mailto:git@github.com\">git@github.com</a>:schacon/simplegit.git\n * [new tag]         v0.1 -&gt; v0.1\n * [new tag]         v1.2 -&gt; v1.2\n * [new tag]         v1.4 -&gt; v1.4\n * [new tag]         v1.4-lw -&gt; v1.4-lw\n * [new tag]         v1.5 -&gt; v1.5\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在，其他人克隆共享仓库或拉取数据同步后，也会看到这些标签。</p><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t36\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-35\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-35\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>技巧和窍门</h2><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在结束本章之前，我还想和大家分享一些 Git 使用的技巧和窍门。很多使用 Git 的开发者可能根本就没用过这些技巧，我们也不是说在读过本书后非得用这些技巧不可，但至少应该有所了解吧。说实话，有了这些小窍门，我们的工作可以变得更简单，更轻松，更高效。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t37\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-36\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-36\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>自动补全</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果你用的是 Bash shell，可以试试看 Git 提供的自动补全脚本。下载 Git 的源代码，进入&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">contrib/completion</code>&nbsp;目录，会看到一个&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git-completion.bash</code>&nbsp;文件。将此文件复制到你自己的用户主目录中（译注：按照下面的示例，还应改名加上点：<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">cp git-completion.bash ~/.git-completion.bash</code>），并把下面一行内容添加到你的&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">.bashrc</code>&nbsp;文件中：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">source ~/.git-completion.bash\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">也可以为系统上所有用户都设置默认使用此脚本。Mac 上将此脚本复制到&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">/opt/local/etc/bash_completion.d</code>&nbsp;目录中，Linux 上则复制到&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">/etc/bash_completion.d/</code>&nbsp;目录中。这两处目录中的脚本，都会在 Bash 启动时自动加载。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">如果在 Windows 上安装了 msysGit，默认使用的 Git Bash 就已经配好了这个自动补全脚本，可以直接使用。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">在输入 Git 命令的时候可以敲两次跳格键（Tab），就会看到列出所有匹配的可用命令建议：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git co&lt;tab&gt;&lt;tab&gt;\ncommit config\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">此例中，键入 git co 然后连按两次 Tab 键，会看到两个相关的建议（命令） commit 和 config。继而输入&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">m&lt;tab&gt;</code>&nbsp;会自动完成<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git commit</code>&nbsp;命令的输入。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">命令的选项也可以用这种方式自动完成，其实这种情况更实用些。比如运行&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git log</code>&nbsp;的时候忘了相关选项的名字，可以输入开头的几个字母，然后敲 Tab 键看看有哪些匹配的：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git log --s&lt;tab&gt;\n--shortstat  --since=  --src-prefix=  --stat   --summary\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这个技巧不错吧，可以节省很多输入和查阅文档的时间。</p><h3 style=\"margin: 0px; padding: 0px;\"><a name=\"t38\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"git--1\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#git--1\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>Git 命令别名</h3><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">Git 并不会推断你输入的几个字符将会是哪条命令，不过如果想偷懒，少敲几个命令的字符，可以用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git config</code>&nbsp;为命令设置别名。来看看下面的例子：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git config --global <a href=\"http://alias.co/\">alias.co</a> checkout\n$ git config --global <a href=\"http://alias.br/\">alias.br</a> branch\n$ git config --global alias.ci commit\n$ git config --global <a href=\"http://alias.st/\">alias.st</a> status\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">现在，如果要输入&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git commit</code>&nbsp;只需键入&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git ci</code>&nbsp;即可。而随着 Git 使用的深入，会有很多经常要用到的命令，遇到这种情况，不妨建个别名提高效率。</p><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">使用这种技术还可以创造出新的命令，比方说取消暂存文件时的输入比较繁琐，可以自己设置一下：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git config --global alias.unstage 'reset HEAD --'\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">这样一来，下面的两条命令完全等同：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git unstage fileA\n$ git reset HEAD fileA\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">显然，使用别名的方式看起来更清楚。另外，我们还经常设置&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">last</code>&nbsp;命令：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git config --global alias.last 'log -1 HEAD'\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">然后要看最后一次的提交信息，就变得简单多了：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git last\ncommit 66938dae3329c7aebe598c2246a8e6af90d04646\nAuthor: Josh Goebel &lt;<a href=\"mailto:dreamer3@example.com\">dreamer3@example.com</a>&gt;\nDate:   Tue Aug 26 19:48:51 2008 +0800\n\n    test for current head\n\n    Signed-off-by: Scott Chacon &lt;<a href=\"mailto:schacon@example.com\">schacon@example.com</a>&gt;\n</code></pre><p style=\"margin-top: 15px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;\">可以看出，实际上 Git 只是简单地在命令中替换了你设置的别名。不过有时候我们希望运行某个外部命令，而非 Git 的子命令，这个好办，只需要在命令前加上&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">!</code>&nbsp;就行。如果你自己写了些处理 Git 仓库信息的脚本的话，就可以用这种技术包装起来。作为演示，我们可以设置用&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">git visual</code>&nbsp;启动&nbsp;<code style=\"margin-right: 2px; margin-left: 2px; padding: 0px 5px; border: 1px solid rgb(221, 221, 221); font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); white-space: nowrap;\">gitk</code>：</p><pre style=\"margin-top: 15px; margin-bottom: 15px; padding: 6px 10px; border: 1px solid rgb(221, 221, 221); font-size: 13px; font-family: Consolas, 'Liberation Mono', Courier, monospace; background-color: rgb(248, 248, 248); line-height: 19px; overflow: auto;\"><code style=\"border-style: none; font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace;\">$ git config --global alias.visual '!gitk'\n</code></pre><h2 style=\"margin: 0px; padding: 0px;\"><a name=\"t39\" style=\"color: rgb(51, 102, 153);\"></a><a name=\"-37\" class=\"anchor\" href=\"https://github.com/progit/progit/blob/master/zh/02-git-basics/01-chapter2.markdown#-37\" style=\"color: rgb(65, 131, 196); text-decoration: none; margin: 0px 0px 0px -30px; padding: 0px 0px 0px 30px; border: 0px; display: block; position: absolute; top: 0px; left: 0px; bottom: 0px;\"></a>小结</h2><p style=\"margin-top: 15px; padding-top: 0px; padding-bottom: 0px; border: 0px; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px; margin-bottom: 0px !important;\">到目前为止，你已经学会了最基本的 Git 本地操作：创建和克隆仓库，做出修改，暂存并提交这些修改，以及查看所有历史修改记录。接下来，我们将学习 Git 的必杀技特性：分支模型。</p></div></div>"
    }
  ]
}
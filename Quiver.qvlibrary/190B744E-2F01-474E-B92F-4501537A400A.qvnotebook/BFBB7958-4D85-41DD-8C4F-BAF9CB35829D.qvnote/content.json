{
  "title": "grep的用法",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div id=\"cnblogs_post_body\" style=\"color: rgb(0, 0, 0); font-size: 14px; font-family: verdana; margin-bottom: 20px; line-height: 1.5;\"><h1 class=\"postTitle\" style=\"border: 0px solid red; padding: 10px 10px 10px 0px; font-size: 28px;\"><a id=\"cb_post_title_url\" class=\"postTitle2\" href=\"http://www.cnblogs.com/xuxm2007/archive/2011/01/10/1932288.html\" style=\"border-bottom-style: dotted; border-bottom-width: 1px; border-bottom-color: rgb(239, 239, 239); padding-bottom: 10px; color: rgb(8, 125, 168); text-decoration: none;\">grep的用法</a></h1><div id=\"cnblogs_post_body\" style=\"margin-bottom: 20px; line-height: 1.5;\"><p style=\"margin: 10px auto; line-height: normal;\"><a href=\"http://www.thegeekstuff.com/2009/03/15-practical-unix-grep-command-examples/\" style=\"color: rgb(8, 125, 168); text-decoration: none;\">http://www.thegeekstuff.com/2009/03/15-practical-unix-grep-command-examples/</a></p><p style=\"margin: 10px auto;\">首先创建我们练习grep命令时需要用到的demo文件demo_file。</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ cat demo_file<br style=\"line-height: normal;\">THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.<br style=\"line-height: normal;\">this line is the 1st lower case line in this file.<br style=\"line-height: normal;\">This Line Has All Its First Character Of The Word With Upper Case.<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">Two lines above this line is empty.<br style=\"line-height: normal;\">And this is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">1.从单个文件中搜索指定的字串</h3><p style=\"margin: 10px auto; line-height: normal;\">grep的基础用法是如下例的从指定的文件中搜索特定的字串。</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep \"literal_string\" filename</pre><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep \"this\" demo_file<br style=\"line-height: normal;\">this line is the 1st lower case line in this file.<br style=\"line-height: normal;\">Two lines above this line is empty.<br style=\"line-height: normal;\">And this is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">2. 在多个文件中检索指定的字串</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep \"string\" FILE_PATTERN</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>先拷贝demo_file为demo_file1。grep的结果在符合条件的行前将包括文件名。当文件名包含元字符时，linux shell会将匹配的所有文件作为输入到grep中去。</p><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ cp demo_file demo_file1<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">$ grep \"this\" demo_*<br style=\"line-height: normal;\">demo_file:this line is the 1st lower case line in this file.<br style=\"line-height: normal;\">demo_file:Two lines above this line is empty.<br style=\"line-height: normal;\">demo_file:And this is the last line.<br style=\"line-height: normal;\">demo_file1:this line is the 1st lower case line in this file.<br style=\"line-height: normal;\">demo_file1:Two lines above this line is empty.<br style=\"line-height: normal;\">demo_file1:And this is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">3. 用 grep -i 进行大小写无关的搜索</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -i \"string\" FILE</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>也是一个基本用法，对搜索的字串忽略大小写，因此下例中匹配“the”, “THE” and “The”。</p><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -i \"the\" demo_file<br style=\"line-height: normal;\">THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.<br style=\"line-height: normal;\">this line is the 1st lower case line in this file.<br style=\"line-height: normal;\">This Line Has All Its First Character Of The Word With Upper Case.<br style=\"line-height: normal;\">And this is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">4. 使用用正则表达式</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep \"REGEX\" filename</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>如果你能有效地利用正则表达式，这是个很有用的特点。在下面的例子中，搜索全部以“lines”开始以“empty”结束的字串，如搜索“lines[之间任意字]empty” ，并且忽略大小写。</p><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -i \"lines.*empty\" demo_file<br style=\"line-height: normal;\">Two lines above this line is empty.</pre><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><p style=\"margin: 10px auto; line-height: normal;\">正则表达式遵循的几个重复的操作</p><ul style=\"margin-left: 45px; padding-left: 0px; line-height: normal;\"><li style=\"list-style: inherit !important;\">? 最多匹配一次</li><li style=\"list-style: inherit !important;\">* 匹配零次或者任意多次</li><li style=\"list-style: inherit !important;\">+ 匹配一次以上</li><li style=\"list-style: inherit !important;\">{n} 匹配n次</li><li style=\"list-style: inherit !important;\">{n,} 最少匹配n次</li><li style=\"list-style: inherit !important;\">{,m} 最多匹配m次</li><li style=\"list-style: inherit !important;\">{n,m} 匹配n到m次</li></ul><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">5. 用grep -w搜索整个词，而不是词中的部分字串</h3><p style=\"margin: 10px auto; line-height: normal;\">使用-w选项搜索一个单词，并且避免搜索到词中的部分字串。<br><br>下例搜索\"is\"。如果不加-w选项，将显示“is”, “his”, “this” 等所有包含“is”的行。</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -i \"is\" demo_file<br style=\"line-height: normal;\">THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.<br style=\"line-height: normal;\"><strong style=\"line-height: normal;\">this</strong> line is the 1st lower case line in this file.<br style=\"line-height: normal;\"><strong style=\"line-height: normal;\">This Line Has All Its First Character Of The Word With Upper Case.</strong><br style=\"line-height: normal;\">Two lines above this line is empty.<br style=\"line-height: normal;\">And this is the last line.</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>下例使用了-w选项，请注意结果中不包含 “This Line Has All Its First Character Of The Word With Upper Case”, 虽然 “This”中包含“is”。</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -iw \"is\" demo_file<br style=\"line-height: normal;\">THIS LINE <strong style=\"line-height: normal;\">IS</strong> THE 1ST UPPER CASE LINE IN THIS FILE.<br style=\"line-height: normal;\">this line <strong style=\"line-height: normal;\">is</strong> the 1st lower case line in this file.<br style=\"line-height: normal;\">Two lines above this line is empty.<br style=\"line-height: normal;\">And this is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">6. 使用grep -A, -B and -C显示之前、之后、前后的几行</h3><p style=\"margin: 10px auto; line-height: normal;\">当使用grep搜索大文件时，显示匹配行附近的多行数据是一个很有用的功能。</p><p style=\"margin: 10px auto; line-height: normal;\"><br>创建如下文件</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ cat demo_text<br style=\"line-height: normal;\">4. Vim Word Navigation<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">You may want to do several navigation in relation to the words, such as:<br style=\"line-height: normal;\"><br style=\"line-height: normal;\"> * e - go to the end of the current word.<br style=\"line-height: normal;\"> * E - go to the end of the current WORD.<br style=\"line-height: normal;\"> * b - go to the previous (before) word.<br style=\"line-height: normal;\"> * B - go to the previous (before) WORD.<br style=\"line-height: normal;\"> * w - go to the next word.<br style=\"line-height: normal;\"> * W - go to the next WORD.<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">WORD - WORD consists of a sequence of non-blank characters, separated with white space.<br style=\"line-height: normal;\">word - word consists of a sequence of letters, digits and underscores.<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">Example to show the difference between WORD and word<br style=\"line-height: normal;\"><br style=\"line-height: normal;\"> * 192.168.1.1 - single WORD<br style=\"line-height: normal;\"> * 192.168.1.1 - seven words.</pre><h4>6.1 显示匹配行之后的N行</h4><p style=\"margin: 10px auto; line-height: normal;\">-A</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -A  \"string\" FILENAME</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>下例显示匹配行和之后的3行数据</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -A 3 -i \"example\" demo_text<br style=\"line-height: normal;\">Example to show the difference between WORD and word<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">* 192.168.1.1 - single WORD<br style=\"line-height: normal;\">* 192.168.1.1 - seven words.</pre><h4>6.2显示匹配行之前的N行</h4><p style=\"margin: 10px auto; line-height: normal;\">-B</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -B  \"string\" FILENAME</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>下例显示匹配行和之前的2行数据</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -B 2 \"single WORD\" demo_text<br style=\"line-height: normal;\">Example to show the difference between WORD and word<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">* 192.168.1.1 - single WORD</pre><h4>6.3显示匹配行前后的N行</h4><p style=\"margin: 10px auto; line-height: normal;\">-C 显示之前的n行，之后的n行数据.</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -C 2 \"Example\" demo_text<br style=\"line-height: normal;\">word - word consists of a sequence of letters, digits and underscores.<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">Example to show the difference between WORD and word<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">* 192.168.1.1 - single WORD</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">7.通过GREP_OPTIONS高亮显示搜索的字串</h3><p style=\"margin: 10px auto; line-height: normal;\">如果你希望搜索的字串高亮显示在结果中，可以试用以下的办法。</p><p style=\"margin: 10px auto; line-height: normal;\">通过修改GREP_OPTIONS对搜索字串高亮显示。</p><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ export GREP_OPTIONS='--color=auto' GREP_COLOR='100;8'<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">$ grep this demo_file<br style=\"line-height: normal;\"><strong style=\"line-height: normal;\">this</strong> line is the 1st lower case line in this file.<br style=\"line-height: normal;\">Two lines above <strong style=\"line-height: normal;\">this</strong> line is empty.<br style=\"line-height: normal;\">And <strong style=\"line-height: normal;\">this</strong> is the last line.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">8. 用grep -r递归搜索全部的文件</h3><p style=\"margin: 10px auto; line-height: normal;\">如果想查找当前目前以及其子目录的全部文件时，可以使用 -r 选项。如下例</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -r \"ramesh\" *</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">9. 使用grep -v进行不匹配</h3><p style=\"margin: 10px auto; line-height: normal;\">可以使用-v选项显示不匹配搜索字串的行。下例显示demo_text文件中不包含“go”的行</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -v \"go\" demo_text<br style=\"line-height: normal;\">4. Vim Word Navigation<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">You may want to do several navigation in relation to the words, such as:<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">WORD - WORD consists of a sequence of non-blank characters, separated with white space.<br style=\"line-height: normal;\">word - word consists of a sequence of letters, digits and underscores.<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">Example to show the difference between WORD and word<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">* 192.168.1.1 - single WORD<br style=\"line-height: normal;\">* 192.168.1.1 - seven words.</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">10. 显示不匹配全部模式的行</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -v -e \"pattern\" -e \"pattern\"</pre><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><p style=\"margin: 10px auto; line-height: normal;\">创建如下例子文件</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ cat test-file.txt<br style=\"line-height: normal;\">a<br style=\"line-height: normal;\">b<br style=\"line-height: normal;\">c<br style=\"line-height: normal;\">d<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">$ grep -v -e \"a\" -e \"b\" -e \"c\" test-file.txt<br style=\"line-height: normal;\">d</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">11.用grep -c 统计匹配的行数</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -c \"pattern\" filename</pre><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -c \"go\" demo_text<br style=\"line-height: normal;\">6</pre><p style=\"margin: 10px auto; line-height: normal;\"><br>统计不匹配的行数</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -v -c this demo_file<br style=\"line-height: normal;\">4</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">12. 用grep -l 只显示文件名</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -l this demo_*<br style=\"line-height: normal;\">demo_file<br style=\"line-height: normal;\">demo_file1</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">13. 只显示匹配的字串</h3><p style=\"margin: 10px auto; line-height: normal;\">缺省显示匹配字串的所在行，可以使用-o选项只显示匹配的字串。这项功能当使用正则表达式时比较有用处。</p><span style=\"color: rgb(51, 51, 51); line-height: 20px; font-family: Arial; border-spacing: 2px;\">$ grep -o \"is.*line\" demo_file<br style=\"line-height: normal;\"></span><pre style=\"margin-top: 0px; margin-bottom: 0px;\">is line is the 1st lower case line<br style=\"line-height: normal;\">is line<br style=\"line-height: normal;\">is is the last line</pre><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">14. 显示匹配的位置</h3><pre style=\"margin-top: 0px; margin-bottom: 0px;\">语法：<br style=\"line-height: normal;\">grep -o -b \"pattern\" file</pre><p style=\"margin: 10px auto; line-height: normal;\">&nbsp;</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ cat temp-file.txt<br style=\"line-height: normal;\">12345<br style=\"line-height: normal;\">12345<br style=\"line-height: normal;\"><br style=\"line-height: normal;\">$ grep -o -b \"3\" temp-file.txt<br style=\"line-height: normal;\">0:3<br style=\"line-height: normal;\">6:3</pre><p style=\"margin: 10px auto; line-height: normal;\"><br><strong>注意:</strong>&nbsp;以上输出显示的不是行内的位置，而是整个文件中的字节byte位置</p><h3 style=\"padding-top: 6px; padding-left: 10px; color: rgb(255, 255, 255); font-size: 16px; line-height: normal; height: 25px; background-image: url(http://www.cnblogs.com/skins/BJ2008/images/list.gif); background-repeat: no-repeat no-repeat;\">15. 用 grep -n 在输出时显示行号</h3><p style=\"margin: 10px auto; line-height: normal;\">行号从1开始</p><pre style=\"margin-top: 0px; margin-bottom: 0px;\">$ grep -n \"go\" demo_text<br style=\"line-height: normal;\">5: * e - go to the end of the current word.<br style=\"line-height: normal;\">6: * E - go to the end of the current WORD.<br style=\"line-height: normal;\">7: * b - go to the previous (before) word.<br style=\"line-height: normal;\">8: * B - go to the previous (before) WORD.<br style=\"line-height: normal;\">9: * w - go to the next word.<br style=\"line-height: normal;\">10: * W - go to the next WORD.<br>来源：<a href=\"http://www.cnblogs.com/xuxm2007/archive/2011/01/10/1932288.html\" style=\"color: rgb(8, 125, 168); text-decoration: none;\">http://www.cnblogs.com/xuxm2007/archive/2011/01/10/1932288.html</a></pre></div></div>"
    }
  ]
}
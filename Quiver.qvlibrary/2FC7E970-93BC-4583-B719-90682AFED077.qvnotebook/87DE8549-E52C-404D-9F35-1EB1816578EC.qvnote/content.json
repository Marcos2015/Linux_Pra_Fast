{
  "title": "C++编程对缓冲区的理解",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">下面介绍<strong>缓冲区</strong>的知识。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>一、什么是缓冲区</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">缓冲区又称为缓存，它是内存空间的一部分。也就是说，在内存空间中预留了一定的存储空间，这些存储空间用来缓冲输入或输出的数据，这部分预留的空间就叫做缓冲区。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">缓冲区根据其对应的是输入设备还是输出设备，分为输入缓冲区和输出缓冲区。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>二、为什么要引入缓冲区<br></strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">我们为什么要引入缓冲区呢？</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">比如我们从磁盘里取信息，我们先把读出的数据放在缓冲区，计算机再直接从缓冲区中取数据，等缓冲区的数据取完后再去磁盘中读取，这样就可以减少磁盘的读写次数，再加上计算机对缓冲区的操作大大快于对磁盘的操作，故应用缓冲区可大大提高计算机的运行速度。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">又比如，我们使用打印机打印文档，由于打印机的打印速度相对较慢，我们先把文档输出到打印机相应的缓冲区，打印机再自行逐步打印，这时我们的CPU可以处理别的事情。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">现在您基本明白了吧，缓冲区就是一块内存区，它用在输入输出设备和CPU之间，用来缓存数据。它使得低速的输入输出设备和高速的CPU能够协调工作，避免低速的输入输出设备占用CPU，解放出CPU，使其能够高效率工作。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>三、缓冲区的类型<br></strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">缓冲区 分为三种类型：全缓冲、行缓冲和不带缓冲。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>1、全缓冲</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">在这种情况下，当填满标准I/O缓存后才进行实际I/O操作。全缓冲的典型代表是对磁盘文件的读写。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>2、行缓冲</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">在这种情况下，当在输入和输出中遇到换行符时，执行真正的I/O操作。这时，我们输入的字符先存放在缓冲区，等按下回车键换行时才进行实际的I/O操作。典型代表是键盘输入数据。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>3、不带缓冲</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">也就是不进行缓冲，标准出错情况stderr是典型代表，这使得出错信息可以直接尽快地显示出来。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>四、缓冲区的刷新</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">下列情况会引发缓冲区的刷新:</p><ul style=\"padding: 0px 0px 15px; margin: 0px 0px 0px 55px; list-style: none; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><li style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 0px -20px; list-style-type: none; background-image: url(file:///Users/zhaofeng/Downloads/Quiver.app/Contents/Resources/images/icon.png); line-height: 30px; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\">缓冲区满时；</li><li style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 0px -20px; list-style-type: none; background-image: url(file:///Users/zhaofeng/Downloads/Quiver.app/Contents/Resources/images/icon.png); line-height: 30px; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\">执行flush语句；</li><li style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 0px -20px; list-style-type: none; background-image: url(file:///Users/zhaofeng/Downloads/Quiver.app/Contents/Resources/images/icon.png); line-height: 30px; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\">执行endl语句；</li><li style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 0px -20px; list-style-type: none; background-image: url(file:///Users/zhaofeng/Downloads/Quiver.app/Contents/Resources/images/icon.png); line-height: 30px; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\">关闭文件。</li></ul><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">可见，缓冲区满或关闭文件时都会刷新缓冲区，进行真正的I/O操作。另外，在C++中，我们可以使用flush函数来刷新缓冲区（执行I/O操作并清空缓冲区），如：</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">cout&lt;&lt;flush;&nbsp;</span><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); width: 635px; font-family: 'Microsoft Yahei';\">//将显存的内容立即输出到显示器上进行显示 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;</span></span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">endl控制符的作用是将光标移动到输出设备中下一行开头处，并且清空缓冲区。 &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">cout&lt;&lt;endl;&nbsp;</span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">相当于</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">cout&lt;&lt;”\\n”&nbsp;&lt;&lt;flush;&nbsp;</span></span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>五、实例演示</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>1、文件操作演示全缓冲<br></strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">创建一个控制台工程，输入如下代码：</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span class=\"preprocessor\" style=\"margin: 0px; padding: 0px; border: none; color: gray;\">#include&nbsp;&lt;fstream&gt; </span><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;</span></span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">using</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">namespace</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;std; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"datatypes\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(46, 139, 87); font-size: 14px; font-weight: bold;\">int</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;main() &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">{ &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//创建文件test.txt并打开 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">ofstream&nbsp;outfile(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"test.txt\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">); &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//向test.txt文件中写入4096个字符’a’ </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">for</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">(</span><span class=\"datatypes\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(46, 139, 87); font-size: 14px; font-weight: bold;\">int</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;n=0;n&lt;4096;n++) &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">{ &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">outfile&lt;&lt;</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">'a'</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">} &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//暂停，按任意键继续 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">system(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"PAUSE\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">); &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//继续向test.txt文件中写入字符’b’，也就是说，第4097个字符是’b’ </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">outfile&lt;&lt;</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">'b'</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">; &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//暂停，按任意键继续 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">system(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"PAUSE\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">); &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">return</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;0; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">}&nbsp;</span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">上面这段代码很容易理解，已经在代码内部作了注释。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">编写这段小代码的目的是验证WindowsXP下全缓冲的大小是4096个字节，并验证缓冲区满后会刷新缓冲区，执行真正的I/O操作。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">编译并执行，运行结果如下：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s2.51cto.com/wyfs02/M01/A1/A2/wKioL1mfrfXj7YL8AAAjKjm0BiQ87.jpeg-wh_651x-s_3217228992.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"运行结果\" src=\"quiver-image-url/0DC67FEB758C1C9C069D18BAA0FA3008.jpg\" style=\"border: none;\" width=\"268\" height=\"213\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">此时打开工程所在文件夹下的test.txt文件，您会发现该文件是空的，这说明4096个字符“a”还在缓冲区，并没有真正执行I/O操作。敲一下回车键，窗口变为如下：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s3.51cto.com/wyfs02/M02/02/F2/wKiom1mfrgHh6_PyAAAnO_cVwrY99.jpeg-s_3303986517.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"\" src=\"quiver-image-url/67BDD993B0A3B292BFE272C2E1D04865.jpg\" style=\"border: none;\" width=\"268\" height=\"213\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">此时再打开test.txt文件，您就会发下该文件中已经有了4096个字符“a”。这说明全缓冲区的大小是4K（4096），缓冲区满后执行了I/O操作，而字符“b”还在缓冲区。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">再次敲一下回车键，窗口变为如下：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s3.51cto.com/wyfs02/M00/A1/A2/wKioL1mfrfWyfrx3AAAsWmKZmPU57.jpeg-s_2934490463.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"\" src=\"quiver-image-url/E06B2F174708F74E83D363DBB49BE7B4.jpg\" style=\"border: none;\" width=\"266\" height=\"212\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">此时再打开test.txt文件，您就会发现字符“b”也在其中了。这一步验证了文件关闭时刷新了缓冲区。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>2、键盘操作演示行缓冲<br></strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">先介绍getchar()函数。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">函数原型：int getchar(void);</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">说明：当程序调用getchar()函数时，程序就等着用户按键，用户输入的字符被存放在键盘缓冲区中，直到用户按回车为止（回车字符也放在缓冲区中）。当用户键入回车之后，getchar()函数才开始从键盘缓冲区中每次读入一个字符。也就是说，后续的getchar()函数调用不会等待用户按键，而直接读取缓冲区中的字符，直到缓冲区中的字符读完后，才重新等待用户按键。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">不知道您明白了没有，再通俗一点讲，当程序调用getchar()函数时，程序就等着用户按键，并等用户按下回车键返回。期间按下的字符存放在缓冲区，第一个字符作为函数返回值。继续调用getchar()函数，将不再等用户按键，而是返回您刚才输入的第2个字符；继续调用，返回第3个字符，直到缓冲区中的字符读完后，才等待用户按键。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">如果您还没有明白，只能怨我表达能力有限，您可以结合以下实例体会。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">创建一个控制台工程，输入如下代码：</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span class=\"preprocessor\" style=\"margin: 0px; padding: 0px; border: none; color: gray;\">#include&nbsp;&lt;iostream&gt; </span><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;</span></span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">using</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">namespace</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;std; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"datatypes\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(46, 139, 87); font-size: 14px; font-weight: bold;\">int</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;main() &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">{ &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"datatypes\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(46, 139, 87); font-size: 14px; font-weight: bold;\">char</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;c; &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//第一次调用getchar()函数 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//程序执行时，您可以输入一串字符并按下回车键，按下回车键后该函数才返回 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">c=getchar(); &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//显示getchar()函数的返回值 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">cout&lt;&lt;c&lt;&lt;endl; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//暂停 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">system(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"PAUSE\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">); &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//循环多次调用getchar()函数 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//将每次调用getchar()函数的返回值显示出来 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//直到遇到回车符才结束 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">while</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">((c=getchar())!=</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">'\\n'</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">) &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">{ &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">printf(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"%c\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">,c); &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">} &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"comment\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); font-size: 14px; width: 635px; font-family: 'Microsoft Yahei';\">//暂停 </span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">system(</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue; font-size: 14px;\">\"PAUSE\"</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">); &nbsp;</span></li><li style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: rgb(92, 92, 92); padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-size: 14px; font-weight: bold;\">return</span><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">&nbsp;0; &nbsp;</span></li><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\">}&nbsp;</span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">这段小代码也很简单，同样在代码内部都有注释。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">getchar()函数的执行就是采用了行缓冲。第一次调用getchar()函数，会让程序使用者（用户）输入一行字符并直至按下回车键 函数才返回。此时用户输入的字符和回车符都存放在行缓冲区。再次调用getchar()函数，会逐步输出行缓冲区的内容。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">好了，本人表达能力有限，还是编译运行程序，通过运行结果自己领会吧。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">编译运行程序，会提示您输入字符，您可以交替按下一些字符，如下：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s1.51cto.com/wyfs02/M02/A1/A2/wKioL1mfrfXBc7mhAABDTpxsXe047.jpeg-s_820676664.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"\" src=\"quiver-image-url/356A1DE82D07C0A7EF9BE9D760BC4953.jpg\" style=\"border: none;\" width=\"414\" height=\"270\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">您一直按下去，您就会发现当您按到第4094个字符时，不允许您继续输入字符。这说明行缓冲区的大小也是4K。</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">此时您按下回车键，返回第一个字符’a’，如下图：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s5.51cto.com/wyfs02/M00/A1/A2/wKioL1mfrfWRy0P_AAEgsVkht3Y81.jpeg-s_2596444817.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"\" src=\"quiver-image-url/2BD6A76BBA68281EB8B986529B6CE929.jpg\" style=\"border: none;\" width=\"415\" height=\"270\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">继续敲一下回车键，将缓冲区的其它的字符全部输出，如下图：</p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: center; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><a target=\"_blank\" href=\"https://s1.51cto.com/wyfs02/M00/A1/A2/wKioL1mfrfXAxT_uAAEyHEfjSAM10.jpeg-s_723165065.jpeg\" style=\"color: rgb(255, 66, 0); transition: all 0.5s ease; text-decoration: none;\"><img border=\"0\" alt=\"\" src=\"quiver-image-url/B27810F6C44FEC4AC6B3BC9776A3F90A.jpg\" style=\"border: none;\" width=\"415\" height=\"270\"></a></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><strong>3、标准错误输出不带缓冲</strong></p><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">如错误输出时使用：</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">cerr&lt;&lt;”错误，请检查输入的参数!”;&nbsp;</span></span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">这条语句等效于：</p><pre style=\"padding: 0px; margin-top: 0px; margin-bottom: 1em; font-family: 'Courier New', monospace; font-size: 12px; width: 643.5px; overflow: auto; background-color: rgb(230, 230, 230); color: rgb(51, 51, 51); font-variant-ligatures: normal; orphans: 2; widows: 2; background-position: initial initial; background-repeat: initial initial;\"><ol class=\"dp-cpp\" style=\"padding: 5px 0px 15px; margin-left: 55px; list-style-position: initial; list-style-image: initial; border: none; background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 1px !important; background-position: initial initial; background-repeat: initial initial;\"><li class=\"alt\" style=\"list-style-type: decimal; border: none; line-height: 21px; font-family: Arial; background-image: url(http://images.51cto.com/images/art1105/images/0.gif); background-attachment: scroll; color: inherit; padding: 0px 3px 0px 10px !important; margin: 0px !important; list-style-position: outside !important; background-position: -498px -70px; background-repeat: no-repeat repeat;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black; font-size: 14px;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">fprintf(stderr,&nbsp;”错误，请检查输入的参数!”);&nbsp;</span></span></li></ol></pre><p style=\"padding: 0px 0px 15px; margin: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei'; font-size: 16px; text-align: justify; line-height: 30px; word-wrap: break-word; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">好了，就说到这吧，祝您好运，希望能对您有所帮助。</p>"
    }
  ]
}
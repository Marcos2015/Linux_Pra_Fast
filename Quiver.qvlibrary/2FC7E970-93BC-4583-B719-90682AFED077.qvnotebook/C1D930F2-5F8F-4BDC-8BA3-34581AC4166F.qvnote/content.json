{
  "title": "关于string类型的字符串是否以\\0结尾",
  "cells": [
    {
      "type": "text",
      "data": "<div style=\"position: relative;\"><embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; line-height: 35px;\">今天在带大一学生C++上机时，涉及到一个string类型的字符串是否以\\0结尾的问题，本来我很坚定string类型结尾并没有\\0，C风格的字符数组才会那样。但是程序运行结果却说明string类型的字符串后面确实有\\0。</span><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"><br></span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\">于是回实验室后自己又实验了下，才发现这和编译器有关，真坑爹。</span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\">对于如下一段测试程序，在C-free 5.0和g++ 4.1上输出yes，而在VS2010上执行时报错！</span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"></span></p><div class=\"dp-highlighter bg_cpp\" style=\"font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 940.5px; overflow: hidden; padding-top: 1px; border-color: rgb(204, 204, 204); color: rgb(85, 85, 85); line-height: 35px; margin: 18px 0px !important;\"><div class=\"bar\" style=\"padding-left: 45px;\"><div class=\"tools\" style=\"padding: 3px 8px 10px 10px; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108);\"><b>[cpp]</b>&nbsp;<a href=\"http://blog.csdn.net/prstaxy/article/details/8333712#\" class=\"ViewSource\" title=\"view plain\" style=\"text-decoration: none; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); border: none; padding: 1px; margin: 0px 10px 0px 0px; color: rgb(12, 137, 207); display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-position: 0% 0%; background-repeat: no-repeat no-repeat;\">view plain</a><a href=\"http://blog.csdn.net/prstaxy/article/details/8333712#\" class=\"CopyToClipboard\" title=\"copy\" style=\"text-decoration: none; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); border: none; padding: 1px; margin: 0px 10px 0px 0px; color: rgb(12, 137, 207); display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-position: 0% 0%; background-repeat: no-repeat no-repeat;\">copy</a><div style=\"position: absolute; left: 461px; top: 621px; width: 18px; height: 18px; z-index: 99;\"><embed id=\"ZeroClipboardMovie_1\" src=\"http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.swf\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"18\" height=\"18\" name=\"ZeroClipboardMovie_1\" align=\"middle\" allowscriptaccess=\"always\" allowfullscreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"id=1&amp;width=18&amp;height=18\" wmode=\"transparent\"></div></div></div><ol start=\"1\" class=\"dp-cpp\" style=\"padding: 0px; border: none; list-style-position: initial; list-style-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); margin: 0px 0px 1px 45px !important;\"><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\"><span class=\"preprocessor\" style=\"margin: 0px; padding: 0px; border: none; color: gray;\">#include&lt;iostream&gt;</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;&nbsp;</span></span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\"><span class=\"preprocessor\" style=\"margin: 0px; padding: 0px; border: none; color: gray;\">#include&lt;string&gt;</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\"><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold;\">using</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;</span><span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold;\">namespace</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;std;&nbsp;&nbsp;</span></span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\"><span class=\"datatypes\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(46, 139, 87); font-weight: bold;\">int</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;main()&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">{&nbsp;&nbsp;</span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;str=<span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue;\">\"x\"</span><span style=\"margin: 0px; padding: 0px; border: none;\">;&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold;\">if</span><span style=\"margin: 0px; padding: 0px; border: none;\">(str[1]==</span><span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue;\">'\\0'</span><span style=\"margin: 0px; padding: 0px; border: none;\">)&nbsp;&nbsp;</span></span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue;\">\"yes\"</span><span style=\"margin: 0px; padding: 0px; border: none;\">;&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold;\">else</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;&nbsp;</span></span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;<span class=\"string\" style=\"margin: 0px; padding: 0px; border: none; color: blue;\">\"no\"</span><span style=\"margin: 0px; padding: 0px; border: none;\">;&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold;\">return</span><span style=\"margin: 0px; padding: 0px; border: none;\">&nbsp;0;&nbsp;&nbsp;</span></span></li><li class=\"\" style=\"border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"margin: 0px; padding: 0px; border: none; color: black;\">}&nbsp;&nbsp;</span></li></ol></div><span style=\"font-size: 14px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; line-height: 35px;\">VS报错如下图：</span><br style=\"color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"><img src=\"quiver-image-url/05B67859EE0DCBA0D525E99257129817.jpg\" alt=\"\" style=\"border: none;\" width=\"353\" height=\"267\"><br></span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\">当把上面代码中str[1]改成str[2]时，VS2010依然报错，但C-free 5.0输出了no，而g++ 4.1还是输出yes</span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"><img src=\"quiver-image-url/A1088F32C5A958516E6AEFD1EBBAC86F.jpg\" alt=\"\" style=\"border: none;\" width=\"250\" height=\"45\"><br></span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\">另外，在网上查资料时发现：</span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"><span style=\"font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 24px;\"><strong><span style=\"color: rgb(255, 0, 0);\">全局的std::getline返回std::string，这个不一定是'\\0'结尾。有的编译器会加，有的编译器不会加。但是，注意：新的C++标准</span><span style=\"color: rgb(204, 51, 204);\">C++11里面规定std::string一定是以'\\0'结尾</span><span style=\"color: rgb(255, 0, 0);\">，就看你的编译器有没有实现新标准了。</span></strong></span></span></p><p style=\"margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px;\"><span style=\"font-size: 14px;\"><span style=\"font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 24px;\"><span style=\"color: rgb(255, 0, 0);\"><strong>istream::getline返回c字符数组，这个一定是'\\0'结尾。</strong></span></span><br></span></p><div><span style=\"font-size: 14px;\"><span style=\"font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 24px;\"><span style=\"color: rgb(255, 0, 0);\"><strong><br></strong></span></span></span></div></div>"
    }
  ]
}
{
  "title": "C++ Metaprogramming 和 Boost MPL （三）",
  "cells": [
    {
      "type": "text",
      "data": "<p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 36pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -36pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">（二）<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">模板元编程的基本用途</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 18pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -18pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" times=\"\" new=\"\" roman\"\"=\"\"><font face=\"Times New Roman\">1．<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">数值计算</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">上文提及的所有关于模板元编程的例子都是在编译时的数值计算，这是模板元编程的最简单直接的使用方法。数值计算主要利用模板的特化和局部特化能力进行递归演算，模板类被视为元函数，利用类中的一个静态常量保存结果。由于</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">模板对非类型的参数有限制，一般只有整型和布尔型可以参加运算。元函数的结果一般放在一个静态的常量中，但对于整型而言还有一个更好的选择，可以放置在枚举中，其唯一的优点是静态常量是左值必须在运行期占有内存地址，也就是分配了内存空间，而枚举值不能作为左值，所以不占用内存空间，显得有些微的优势。这样，阶乘计算的例子可以改写如下：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">#include &lt;iostream&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;unsigned n&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct factorial</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value = n * factorial&lt;n-1&gt;::value</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct factorial&lt;0&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value = 1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">int main()</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;std::cout&lt;&lt;factorial&lt;6&gt;::value&lt;&lt;std::endl; //6!=720</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">无论是编译期的递归还是运行期内存的节省，对比起模板元编程在数值计算上的不足，都显得有点得不偿失。主要有以下四点：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -21pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">运算范围仅限于整型和布尔型，用途有限。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -21pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">递归式的编程难于实行和理解。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -21pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">编译器对编译期的递归都是有一定的限制的，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">标准建议进行</span><span lang=\"EN-US\"><font face=\"Times New Roman\">17</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">层递归实例化，这无疑不能满足稍复杂的程序。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -21pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">大量消耗编译器资源的同时，降低了编译效率。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">因此，用模板元编程作编译期数值计算并不在实践中经常使用，但它作为一个“中心设施”在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库中发挥着重要的作用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">[6]</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 18pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -18pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" times=\"\" new=\"\" roman\"\"=\"\"><font face=\"Times New Roman\">2．<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">解开循环（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Loop Unrolling</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">当计算两个向量进行点乘，而维数不定时，例如：</span><font face=\"Times New Roman\"></font></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">int a[]={1,3,5,7};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">int b[]={2,4,6,8};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">考虑下面计算点乘的代码：</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">inline T dot_product(int dim, T* a, T* b) {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;T result(0);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;for (int i=0; i&lt;dim; i++) {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result+=a[i]*b[i];</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 52.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 52.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">return result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">这里的代码很平常，但对于性能要求极高并大量使用点乘的应用程序，也许想再节省一点开销。如果能减少循环的计数，对性能也有比较可观的提升。这样代码应该展开以直接计算：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">T result=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">但是我们希望泛化这个表达式，以便应用于不同维数的向量计算，这里，模板元编程正好可以发挥出它编译时计算和生成代码的能力。我们可以把代码改写成：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;int DIM, class T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct DotProduct {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static T result(T* a, T* b) {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return *a * *b + DotProduct&lt;DIM-1, T&gt;::result(a+1, b+1);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">局部特化，用于结束递归</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct DotProduct&lt;1, T&gt; {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static T result(T* a, T* b) {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return *a * *b;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">包装函数</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;int DIM, class T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">inline T doc_product(T* a, T* b) {</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return DotProduct&lt;DIM, T&gt;::result(a, b);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">}</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这种方法是定义了一个类模板</span><span lang=\"EN-US\"><font face=\"Times New Roman\">DotProduct</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">作为元函数，通过递归调用不断展开表达式，还定义了一个局部特化的版本，使它在维数递减到</span><span lang=\"EN-US\"><font face=\"Times New Roman\">1</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">时能够终结递归。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">我们还留意到一个习惯，元函数都用</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">struct</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">而不是用</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">class</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">定义，这是因为</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">struct</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的成员可见性默认为</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">public</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，在编写元函数时可以省却</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">public:</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这个声明。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">注意包装函数的接口已经改变，利用普通方法的函数是这样使用的：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">doc_product(4, a, b);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">现在的写法是：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">doc_product&lt;4&gt;(a, b);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为什么不能使用相同的接口呢？原因是模板参数必须在编译时确定，所以</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">DIM</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">必须是一个常量，而不可能是一个变量。所以这是对此种编程技术的一个重大限制。当然，对于这类计算而言，向量的维数一般都能在编译时确定。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">Todd Veldhuizen</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">1995</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">年第一次提出了这项技术，并且把这种技术运用到高性能数学计算的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Blitz++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库中。此外，在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Blitz++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库中还大量运用到一种称为“表达式模板（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Expression Template</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）”的技术，同样是为了减少线性代数计算中的循环次数和临时对象的开销。表达式模板尽管不属于模板元编程的范畴（因为它不是依赖编译时计算进行优化的），但它与模板元编程具有异曲同工的妙用，特别在高性能数学计算中能够发挥极大的用途。</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Todd Veldhuizen</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">指出，通过这一系列的优化手段，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在科学计算上的性能已经达到甚至超过</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Fortran</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的性能。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 18pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -18pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\" times=\"\" new=\"\" roman\"\"=\"\"><font face=\"Times New Roman\">3．<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">类型处理</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">对类型的处理是模板元编程最重要和最具有现实意义的应用。由于模板可以接受类型参数，也可以通过</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">typedef</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">或</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">定义内嵌类建立模板类的成员类型，再加以强大的模板特化的能力，使得类型计算几乎能有着数值计算所有的全部能力。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 36pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -36pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">（1）<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">类型分支选择</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">利用模板局部特化的能力，编译时的类型选择可以很容易做到：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">默认值，如果</span></i><i><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\"\"=\"\">C</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">为</span></i><i><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\"\"=\"\">true</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">就把第二个类型作为返回值</span></i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool C</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename T1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename T2</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct if</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef T1 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">局部特化，如果</span></i><i><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\"\"=\"\">C</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">为</span></i><i><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\"\"=\"\">false</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">就把第二个类型作为返回值</span></i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename T1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename T2</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct if&lt;false,T1,T2&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef T2 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">不过，有某些旧式编译器并不支持模板局部特化，这种情况下增加一层包装就可以巧妙地转为使用全局特化。</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; bool C &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct if_impl</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename T1, typename T2 &gt; struct result</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef T1 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct if_impl&lt;false&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename T1, typename T2 &gt; struct result</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef T2 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool C</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename T1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename T2</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct if</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename if_impl&lt; C &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::template result&lt;T1,T2&gt;::type type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">元函数</span><span lang=\"EN-US\"><font face=\"Times New Roman\">if</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">是模板元编程中最简单但运用得最多的基础设施。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 36pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: -36pt; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">（2）<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">类型的数据结构</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">把类型作为普通数据一样管理，这初看起来有点匪夷所思：普通数据可以运用</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">struct</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">或者</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">array</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">来组织，但</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">并没有为类型提供一个专用的数据结构，可以利用的唯一设施是模板的参数列表。比如我们可以定义一个类型的“数组”如下</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class a, class b, class c, class d, class e&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct type_array;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">但是为了使它真正像数组一样使用，还需要在其中定义一系列的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">typedef</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，比如某一下标的类型的提取等，类似于：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef a type1;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef b type2;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">……</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在这里，数组长度也无法动态变化是一个重大的缺陷。当然，有时候数组仍然是有用的，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">就提供了一个框架为任何自定义的类型数据结构提供支持，下文会有所提及。现在先介绍一种更自动的类型组织方法——</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">2</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">上面提到过模板元编程是函数式的编程，参照其他一些函数式编程语言对数据的组织，很容易得到一些启发。比如在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Scheme</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">（一种</span><span lang=\"EN-US\"><font face=\"Times New Roman\">LISP</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的变体）中，基本的数据结构是表，其他数据结构都必须用表的形式来表达。一个表可以这样定义：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">（</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">”A” (“B” () (“C” () () ) )&nbsp;&nbsp;(“D” () () )&nbsp;</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">）</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">这个表可以表示出一个二叉搜索树：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: 'Microsoft YaHei'; text-indent: 2em; word-break: break-all; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span lang=\"EN-US\"><group id=\"_x0000_s1026\" coordsize=\"7140,2230\" coordorigin=\"2339,2396\" editas=\"canvas\" style=\"width: 451.5pt; height: 140.4pt;\"><lock aspectratio=\"t\" v:ext=\"edit\"><shapetype id=\"_x0000_t75\" coordsize=\"21600,21600\" stroked=\"f\" filled=\"f\" path=\"m@4@5l@4@11@9@11@9@5xe\" o:preferrelative=\"t\" o:spt=\"75\"><stroke joinstyle=\"miter\"><formulas><f eqn=\"if lineDrawn pixelLineWidth 0\"><f eqn=\"sum @0 1 0\"><f eqn=\"sum 0 0 @1\"><f eqn=\"prod @2 1 2\"><f eqn=\"prod @3 21600 pixelWidth\"><f eqn=\"prod @3 21600 pixelHeight\"><f eqn=\"sum @0 0 1\"><f eqn=\"prod @6 1 2\"><f eqn=\"prod @7 21600 pixelWidth\"><f eqn=\"sum @8 21600 0\"><f eqn=\"prod @7 21600 pixelHeight\"><f eqn=\"sum @10 21600 0\"></f></f></f></f></f></f></f></f></f></f></f></f></formulas><path o:connecttype=\"rect\" gradientshapeok=\"t\" o:extrusionok=\"f\"><lock aspectratio=\"t\" v:ext=\"edit\"></lock></path></stroke></shapetype><shape id=\"_x0000_s1027\" type=\"#_x0000_t75\" o:preferrelative=\"f\" style=\"left: 2339px; width: 7140px; position: absolute; top: 2396px; height: 2230px;\"><font size=\"2\"><fill o:detectmouseclick=\"t\"><path o:connecttype=\"none\" o:extrusionok=\"t\"><lock v:ext=\"edit\" text=\"t\"></lock></path></fill></font></shape><rect id=\"_x0000_s1028\" style=\"left: 4830px; width: 830px; position: absolute; top: 2520px; height: 248px;\"><textbox inset=\"0,0,0,0\"></textbox></rect></lock></group></span></p><table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" style=\"font-size: 14px; color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><tbody><tr><td style=\"margin: 0px; padding: 0px; border: rgb(236, 233, 216);\"><div style=\"margin: 0px; padding: 0px;\"><p class=\"MsoNormal\" align=\"center\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all; text-align: center;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">A</font></span></p></div></td></tr></tbody></table><rect id=\"_x0000_s1029\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 3501px; width: 831px; position: absolute; top: 3015px; height: 249px;\"><textbox inset=\"0,0,0,0\"><table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" style=\"font-size: inherit;\"><tbody><tr><td style=\"margin: 0px; padding: 0px; border: rgb(236, 233, 216);\"><div style=\"margin: 0px; padding: 0px;\"><p class=\"MsoNormal\" align=\"center\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all; text-align: center;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">B</font></span></p></div></td></tr></tbody></table></textbox></rect><rect id=\"_x0000_s1030\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 4332px; width: 831px; position: absolute; top: 3635px; height: 248px;\"><textbox inset=\"0,0,0,0\"><table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" style=\"font-size: inherit;\"><tbody><tr><td style=\"margin: 0px; padding: 0px; border: rgb(236, 233, 216);\"><div style=\"margin: 0px; padding: 0px;\"><p class=\"MsoNormal\" align=\"center\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all; text-align: center;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">C</font></span></p></div></td></tr></tbody></table></textbox></rect><rect id=\"_x0000_s1031\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 5992px; width: 831px; position: absolute; top: 3015px; height: 249px;\"><textbox inset=\"0,0,0,0\"><table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" style=\"font-size: inherit;\"><tbody><tr><td style=\"margin: 0px; padding: 0px; border: rgb(236, 233, 216);\"><div style=\"margin: 0px; padding: 0px;\"><p class=\"MsoNormal\" align=\"center\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all; text-align: center;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">D</font></span></p></div></td></tr></tbody></table></textbox></rect><line id=\"_x0000_s1032\" to=\"5162,3015\" from=\"3916,2768\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1033\" to=\"6407,3015\" from=\"5162,2768\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1034\" to=\"4747,3635\" from=\"3916,3263\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1035\" to=\"6407,3635\" from=\"5494,3263\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1036\" to=\"7403,3635\" from=\"6407,3263\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1037\" to=\"4747,4130\" from=\"3833,3883\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1038\" to=\"3916,3635\" from=\"3003,3263\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><line id=\"_x0000_s1039\" to=\"5743,4130\" from=\"4747,3883\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); position: absolute;\"><font face=\"Times New Roman\" size=\"2\"></font></line><rect id=\"_x0000_s1040\" fillcolor=\"#eaeaea\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 2588px; width: 913px; position: absolute; top: 3635px; height: 248px;\"><font face=\"Times New Roman\" size=\"2\"></font></rect><rect id=\"_x0000_s1041\" fillcolor=\"#eaeaea\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 5328px; width: 913px; position: absolute; top: 3635px; height: 248px;\"><font face=\"Times New Roman\" size=\"2\"></font></rect><rect id=\"_x0000_s1042\" fillcolor=\"#eaeaea\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 6739px; width: 913px; position: absolute; top: 3635px; height: 248px;\"><font face=\"Times New Roman\" size=\"2\"></font></rect><rect id=\"_x0000_s1043\" fillcolor=\"#eaeaea\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 3418px; width: 914px; position: absolute; top: 4130px; height: 249px;\"><font face=\"Times New Roman\" size=\"2\"></font></rect><rect id=\"_x0000_s1044\" fillcolor=\"#eaeaea\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); left: 5162px; width: 913px; position: absolute; top: 4130px; height: 249px;\"><font face=\"Times New Roman\" size=\"2\"></font></rect><wrap type=\"none\" style=\"color: rgb(92, 92, 92); font-family: 'Microsoft YaHei'; font-size: 14px; font-variant-ligatures: normal; letter-spacing: 1px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><anchorlock><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">通过简单的表的递归，就可以构造出各种数据结构。注意到</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">模板的实现体也是一种类型，利用类型的递归，同样的风格也可以吸收到模板元编程中。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的定义是很简单的：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class T, class U&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct Typelist</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef T Head;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef U Tail;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">另外我们需要定义一个特殊的标记：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct Nulltype;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这个无定义的类不能产生对象，它的存在仅仅为了提供一个结束的标记。现在我们定义一个</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，并在这一节里面反复使用：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef Typelist&lt;int,</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">Typelist&lt;float,</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 52.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">Typelist&lt;long, Nulltype&gt; &gt; &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typelist;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这样的结构比起“数组”有什么优点呢？由于它的结构是递归的，我们可以很容易写一个通用的元函数提取它某一个位置的类型，我们甚至可以插入、修改和删除元素，然后返回一个新的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）提取</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的类型</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">如果需要按照位置来提取</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">类型，可以定义这样一个元函数：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">声明</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class List, unsigned int i&gt; struct typeat;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">局部特化，当处理到需要提取的位置时，</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Head</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">就是要返回的类型</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class Head, class Tail&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct typeat&lt;Typelist&lt;Head, Tail&gt;, 0&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Head result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如果未到需要提取的位置，在下一个位置继续递归</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class Head, class Tail, unsigned int i&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct typeat&lt; Typelist&lt;Head, Tail&gt;, i&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename typeat&lt;Tail, i-1&gt;::result result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 21pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这里使用了局部特化，对于不能支持局部特化的编译器，可以类似上面的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">if</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">元函数的处理手法，适当修改这里的代码。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">这个元函数按照以下方式调用：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef typeat&lt;typelist, 0&gt;::result result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如果试图定义一个变量：</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">result a=<chmetcnv w:st=\"on\" unitname=\"F\" sourcevalue=\"1.2\" hasspace=\"False\" negative=\"False\" numbertype=\"1\" tcsc=\"0\">1.2f</chmetcnv>;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">编译器会抱怨无法把一个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">float</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">类型转换为</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">result</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">类型，因为上面定义的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">的第一个类型是</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">int</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">。而把下标</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">0</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">改为</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">1</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">以后，则可以编译通过，这证明元函数可以在编译时正确选择出所需的类型。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 36pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -36pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-bidi-font-family:=\"\" 宋体\"=\"\">（3）<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">修改</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">中的元素</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">实例化以后的模板已经成为一种类型，所以是不可能进行修改的，要达到修改的效果，唯一的方法是返回一种新的类型，使它带有新的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">比如，如果要在一个已有的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">中添加一个类型，可以定义一个这样的元函数：</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">声明</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class List, class T&gt; struct append;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如遇到把空类型加入空类型，只需要返回</span></i><i><span courier=\"\" new\"\"=\"\">&nbsp;</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">一个空类型</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct append&lt;Nulltype, Nulltype&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Nulltype result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如果把一个非空类型加入空类型，那么就可以直接返回</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">一个只有一个元素的</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class T&gt; struct append &lt;Nulltype, T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef&nbsp;&nbsp;Typelist&lt;T, Nulltype&gt; result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如果把一个</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">加入空类型，那么就可以</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">直接返回这个</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class Head, class Tail&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct append &lt;Nulltype, Typelist&lt;Head, Tail&gt; &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Typelist&lt;Head, Tail&gt; result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">当未到达</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">尾部（遇到空类型）时，递归调用</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">append</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">元函数</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class Head, class Tail, class T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct append &lt;Typelist&lt;Head, Tail&gt;, T&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Typelist&lt;Head,</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename append &lt; Tail, T&gt;::result&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">这个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">append</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">元函数不仅能插入一个类型，也可以把一个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">添加到另一个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">尾部。如果这样使用的话：</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef append&lt;typelist, double&gt;::result newlist;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">那么就会得到一个新的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">newlist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">，里面共有</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">4</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">个类型。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">利用很类似的方法，还可以为</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">编写删除或者修改某个元素的元函数，这可以参阅</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">[18]</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">的论述。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 36pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -36pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-bidi-font-family:=\"\" 宋体\"=\"\">（4）<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">小结</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">用合适的数据结构组织类型，我们可以得到这样的一些好处：</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -21pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">编译时可以根据情况自动决定选择的类型。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -21pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">由于模板中没有数据成员，它们在运行时不占用任何空间。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -21pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" style=\"font-family: Wingdings;\">l<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">可以运用于代码的自动生成，或者实现某种设计模式。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">下面分析</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Boost</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库时，还会遇到更多和更复杂的类型数据结构。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 18pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: -18pt; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\" times=\"\" new=\"\" roman\"\"=\"\"><font face=\"Times New Roman\">4．<span times=\"\" new=\"\" roman\"\"=\"\">&nbsp;&nbsp;</span></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">自动生成代码</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">上面曾经提到的解开循环技术其实已经是一种代码生成了，但这个独立出来的小节专门用于说明代码生成在设计模式中的应用，这些精巧的设计承接着上文提到的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Typelist</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，也是来源于</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Alexandrescu</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Loki</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库</span><span lang=\"EN-US\"><font face=\"Times New Roman\">[18]</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">首先，引入一个类模板</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">GenScatterHierarchy</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">，这个模板通过递归的定义进行多重继承，从而构造出一种复杂而散乱的体系。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">模板定义</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class TList, template &lt;class&gt; class Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class GenScatterHierarchy;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">当未到达</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">尾部时，继承</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Head</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">和</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Tail</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">各一次</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template &lt;class T1, class T2, template &lt;class&gt; class Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class GenScatterHierarchy&lt;Typelist&lt;T1, T2&gt;, Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: public GenScatterHierarchy&lt;T1, Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, public GenScatterHierarchy&lt;T2, Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">遇到单个</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Unit</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">类型时，直接继承</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Unit</span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class AtomicType, template &lt;class&gt; class Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class GenScatterHierarchy : public Unit&lt;AtomicType&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">遇到</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">NullType</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">时，不继承</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template &lt;template &lt;class&gt; class Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class GenScatterHierarchy&lt;NullType, Unit&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">另外还需要定义一个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Holder</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">来持有一个类型的对象，这也是为了包装基本类型，以便它们可以被继承。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template &lt;class T&gt; struct Holder</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T value;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">现在可以定义一个</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">GenScatterHierarchy</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">的实现体了：</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef GenScatterHierarchy&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 52.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">Typelist&lt;int, Typelist&lt;string, Typelist&lt;Widget, NullType&gt; &gt; &gt;,</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 52.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">Holder&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">WidgetInfo;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这里的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">嵌套定义显得有点繁琐，在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Loki</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库里面有定义相对应的宏来简化使用，这里为了展示的方便而展开了。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">WidgetInfo</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的继承体系如下图所示：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\"></font></span></p><p class=\"MsoNormal\" align=\"center\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all; text-align: center;\"><span lang=\"EN-US\"><font size=\"2\"></font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为什么要使用这样复杂的一个体系呢？这种体系对于程序设计有什么实质性的帮助呢？首先，</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">是一个可扩展的结构，不但可以定制任意长度的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，在更改</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">以后，</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">WidgetInfo</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">不需要作任何改变就可以自动适应并产生新的代码。其次，</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">WidgetInfo</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">继承了有</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Typelist</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">长度个的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Holder</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">实体，它们拥有相同的接口，可以加入一个成员模板函数用统一的接口来操纵这些实体。再次，分别继承的</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">Holder</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">实体并不会互相干扰，</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">WidgetInfo</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">可以根据需要上调成它们中的任何一种。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">Alexandrescu</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Loki</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">库中把这种体系发挥得淋漓尽致</span><span lang=\"EN-US\"><font face=\"Times New Roman\">[18]</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，他以这个体系（以及其它辅助方法）构造出一个非常灵活的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Abstract Factory</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">模式，避免了</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Abstract Factory</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">通常耦合度较高的缺点。</span></font></p></anchorlock></wrap>"
    }
  ]
}
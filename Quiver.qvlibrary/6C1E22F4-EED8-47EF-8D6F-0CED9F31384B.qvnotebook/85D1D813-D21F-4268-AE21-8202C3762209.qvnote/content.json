{
  "title": "C++ Metaprogramming 和 Boost MPL （七）",
  "cells": [
    {
      "type": "text",
      "data": "<div class=\"top\" style=\"margin: 0px; padding: 10px 140px 10px 20px; width: 520px; height: auto; border: 0px; display: inline-block; color: rgb(0, 0, 0); font-family: arial, helvetica, clean, sans-serif; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><div class=\"tag\" style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); font-family: 'Microsoft YaHei'; cursor: default;\">作者：<a href=\"http://kuibyshev.bokee.com/\" style=\"text-decoration: none; color: rgb(33, 33, 33); margin: 0px; padding: 0px; font-weight: bold;\"><span itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\" style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); cursor: default;\">&nbsp;<span itemprop=\"name\" style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); cursor: default;\">古比雪夫</span></span></a></span><span itemprop=\"datePublished\" content=\"2005-05-19 22:48\" style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); font-family: 'Microsoft YaHei'; cursor: default;\">2005-05-19 22:48</span><span style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); font-family: 'Microsoft YaHei'; cursor: default;\">分类：<a href=\"http://kuibyshev.bokee.com/category/0/1\" style=\"text-decoration: none; color: rgb(33, 33, 33); margin: 0px; padding: 0px; font-weight: bold;\">默认分类</a></span><span style=\"margin: 0px 10px 0px 0px; line-height: 20px; color: rgb(117, 117, 117); font-family: 'Microsoft YaHei'; cursor: default;\">标签：</span></div></div><span style=\"color: rgb(0, 0, 0); font-family: arial, helvetica, clean, sans-serif; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div class=\"cnt\" style=\"margin: 0px; padding: 10px 20px; text-align: center; color: rgb(0, 0, 0); font-family: arial, helvetica, clean, sans-serif; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><div itemprop=\"articleBody\" class=\"txt clearfix\" style=\"margin: 0px; padding: 5px 0px; zoom: 1; width: 640px; word-wrap: break-word; line-height: 24px; color: rgb(92, 92, 92); font-size: 14px; font-family: &quot;Microsoft YaHei&quot;; cursor: default; letter-spacing: 1px; text-align: left;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">（四）</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的迭代器</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">1</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．迭代器的定义和分类</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">迭代器是一类指向某一个或一定范围序列元素的实体，在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中起着解耦算法和序列关系的作用，由于这个作用，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的算法甚至可以用于任何编译时的类型，只要这种类型符合迭代器的要求就可以了。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的迭代器一共分为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">种：前向迭代器（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Forward Iterator</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）、双向迭代器（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Bidirectional Iterator</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）和随机访问迭代器（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">&nbsp;Random Access Iterator</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）。按照定义，这</span><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">种迭代器按照从先到后的顺序访问能力逐步增强。前向迭代器拥有产生指向到下一个元素的迭代器的能力，双向迭代器比起前向迭代器增加了产生指向前一个元素的迭代器的能力，随机访问迭代器则在双向迭代器的基础上能够根据特定的整数值产生同一序列中相对位置的迭代器。序列中也有</span><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">种访问方式的分类（前向、双向、随机访问），实际上序列的访问方式正是根据它可以产生的迭代器能力大小来分类的。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在目前的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">实现中，随机访问迭代器与双向迭代器实际上是等价的，因为有且只有</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">和</span><span lang=\"EN-US\"><font face=\"Times New Roman\">range_c</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">同时支持这两个迭代器。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">2</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．迭代器的操作</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">迭代器支持以下</span><span lang=\"EN-US\"><font face=\"Times New Roman\">6</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">个操作：</span></font></p><div align=\"center\" style=\"margin: 0px; padding: 0px;\"><table class=\"MsoTableGrid\" cellspacing=\"0\" cellpadding=\"0\" border=\"1\" style=\"font-size: inherit; border: medium none;\"><tbody><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-width: 1.5pt 1pt 1pt 1.5pt; border-color: windowtext; width: 101.45pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">advance</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: windowtext windowtext windowtext rgb(236, 233, 216); border-top-width: 1.5pt; width: 302.95pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">把迭代器移动一个相对的位置</span><span lang=\"EN-US\"><font face=\"Times New Roman\">N</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。双向迭代器中</span><span lang=\"EN-US\"><font face=\"Times New Roman\">N</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">可为负值。</span></font></p></td></tr><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1pt; border-color: rgb(236, 233, 216) windowtext windowtext; border-left-width: 1.5pt; width: 101.45pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">distance</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: rgb(236, 233, 216) windowtext windowtext rgb(236, 233, 216); width: 302.95pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">计算出两个迭代器之间的距离，并包装在整型常量类中返回。</font></span></p></td></tr><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1pt; border-color: rgb(236, 233, 216) windowtext windowtext; border-left-width: 1.5pt; width: 101.45pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">next</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: rgb(236, 233, 216) windowtext windowtext rgb(236, 233, 216); width: 302.95pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">返回序列下一个迭代器，取决于序列的定义。</span><font face=\"Times New Roman\"></font></font></p></td></tr><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1pt; border-color: rgb(236, 233, 216) windowtext windowtext; border-left-width: 1.5pt; width: 101.45pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">prior</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: rgb(236, 233, 216) windowtext windowtext rgb(236, 233, 216); width: 302.95pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">返回序列上一个迭代器，取决于序列的定义。</font></span></p></td></tr><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1pt; border-color: rgb(236, 233, 216) windowtext windowtext; border-left-width: 1.5pt; width: 101.45pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">deref</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: rgb(236, 233, 216) windowtext windowtext rgb(236, 233, 216); width: 302.95pt; border-bottom-width: 1pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">解引用，也就是提取迭代器指向的类型。</font></span></p></td></tr><tr><td valign=\"top\" width=\"135\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1pt; border-color: rgb(236, 233, 216) windowtext windowtext; border-left-width: 1.5pt; width: 101.45pt; border-bottom-width: 1.5pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"2\">iterator_category</font></span></p></td><td valign=\"top\" width=\"404\" style=\"margin: 0px; padding: 0cm 5.4pt; border-right-width: 1.5pt; border-color: rgb(236, 233, 216) windowtext windowtext rgb(236, 233, 216); width: 302.95pt; border-bottom-width: 1.5pt;\"><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">返回一个迭代器分类标记类型。</font></span></p></td></tr></tbody></table></div><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．源代码分析</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">由于每一个迭代器的操作包括了好几个实现版本，本文将不逐一分析每个实现，仅以</span><span lang=\"EN-US\"><font face=\"Times New Roman\">advance</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">和</span><span lang=\"EN-US\"><font face=\"Times New Roman\">prior</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为例分析迭代器的一些基本实现手段。首先观察</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">prior</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的源代码：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename Vector</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, long, n_</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct prior&lt; v_iter&lt;Vector,n_&gt; &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef v_iter&lt;Vector,(n_ - 1)&gt; type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">现在这个通用接口又把具体的实现交还给了序列的迭代器</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_iter</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，这段代码充分体现了随机访问迭代器的特点。迭代器</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_iter</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中有这样定义：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename v_at&lt;Vector,n_&gt;::type type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">这个绣球抛到内部函数</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">v_at</span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">那里去了，那是实现类型检索的最核心部件。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; typename Vector, long n_ &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct v_at</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;: aux::wrapped_type&lt; typename v_at_impl&lt;Vector,n_&gt;::type &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; typename Vector, long n_ &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct v_at_impl</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef long_&lt; (Vector::lower_bound_::value + n_) &gt; index_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef __typeof__( Vector::item_(index_()) ) type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">上文在分析</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_item</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">时曾经提到过一个静态的成员函数</span><span lang=\"EN-US\"><font face=\"Times New Roman\">item_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，其特别之处在于</span><span lang=\"EN-US\"><font face=\"Times New Roman\">index_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">是一个整型常量类，函数</span><span lang=\"EN-US\"><font face=\"Times New Roman\">item_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">在以</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_item</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为桥梁的连串的继承（从</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector0</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">继承到</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector<i>n</i></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）中不断被重载，于是，对于</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector<i>n</i></font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的某个索引值，只要调用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">item_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，编译器就可以知道被重载的相应的类型值。最为巧妙的是，函数</span><span lang=\"EN-US\"><font face=\"Times New Roman\">item_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">完全不需要定义，它仅仅在编译期用于快速索引</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中的一个类型。代码中似乎新建了一个</span><span lang=\"EN-US\"><font face=\"Times New Roman\">index_</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">对象，但其实这个对象在运行期不会产生任何作用，因为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">__typeof__</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">只运行在编译期。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">现在来分析</span><span lang=\"EN-US\"><font face=\"Times New Roman\">advance</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的实现，它的底层需要以</span><span lang=\"EN-US\"><font face=\"Times New Roman\">prior</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">和</span><span lang=\"EN-US\"><font face=\"Times New Roman\">next</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为基础以移动迭代器：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">外层通用接口，参见下一节“标记分派元函数”的说明</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename BOOST_MPL_AUX_NA_PARAM(Iterator)</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, typename BOOST_MPL_AUX_NA_PARAM(N)</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct advance</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">根据</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">tag</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">标记来选择相应迭代器的实现版本</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">: advance_impl&lt; typename tag&lt;Iterator&gt;::type &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::template apply&lt;Iterator,N&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; typename Tag &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct advance_impl</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//Iterator</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">为要执行操作的迭代器，</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">N</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">是偏移值，可能为负</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; typename Iterator, typename N &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">如果</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">N</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">小于</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">0</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">，则需要向反方向移动迭代器，</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 63pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//less</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">见下文分析</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 63pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef typename less</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 63pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&lt; N,long_&lt;0&gt; &gt;::type backward_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 63pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">保证偏移值为正值，</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">if_</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">的原理上文已分析过</span></i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename if_</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 31.5pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&lt; backward_, negate&lt;N&gt;, N &gt;::type offset_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">根据是否反方向移动，执行辅助元函数，见下面的代码</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 42pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 31.5pt; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">此处代码已展开宏以方便阅读</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename if_&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;backward_</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, aux::advance_backward&lt; offset_::value &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, aux::advance_forward&lt; offset_::value &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;::type f_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename apply_wrap1&lt;f_,Iterator&gt;::type type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">apply_wrap<i>n</i></font></span><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">是一个元函数的包装器，只是为了用更短的写法调用一个元函数类。</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename F, typename T1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct apply_wrap1</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;: F::template apply&lt;T1&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">advance_backward</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">利用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">prior</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">逐位反向移动，直到递归到特化版本为止，当中利用了一种称为“解循环</span><span lang=\"EN-US\"><font face=\"Times New Roman\">/</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">递归”的特殊方法，目的是用预定义的大块移动减少循环次数，提高执行效率。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">特化版本，包括了从</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">0</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">到</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">4</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">共五个</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; long N &gt; struct advance_backward;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct advance_backward&lt;0&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename Iterator &gt; struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Iterator iter0;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef iter0 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct advance_backward&lt;1&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename Iterator &gt; struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef Iterator iter0;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename prior&lt;iter0&gt;::type iter1;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef iter1 type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">......</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">非特化版本，当</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">N</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">大于</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">4</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">时调用</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; long N &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct advance_backward</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename Iterator &gt; struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">利用上述特化的最大值进行大块（</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">chunk</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">）移动，</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"courier=\"\" mso-bidi-font-family:=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">使之尽快接近目的地</span></i><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 73.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 10.5pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">typedef typename apply_wrap1&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;advance_backward&lt;4&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, Iterator</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;::type chunk_result_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef typename apply_wrap1&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;advance_backward&lt;(</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(N - 4) &lt; 0</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? 0: N - 4)&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, chunk_result_</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;::type type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">advance_forward</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">做法类似，在此不再列举了。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">（五）</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">序列的内部元函数</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">1</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．元函数和元函数类</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">上文提到的所有元函数，本质上都是一个类模板。上文分析过，这种简单的做法实际上隐藏着一个问题，由于</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">严格区分类和模板，迫使模板无法直接传入另一个模板作为类型参数，除非使用限制比较大的“类模板的模板参数”。</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的作者巧妙地解决了这个问题，方法是使用元函数类（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Metafunction Class</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）。一个元函数类总是用一个类来包装一个命名为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">apply</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的模板，而这个</span><span lang=\"EN-US\"><font face=\"Times New Roman\">apply</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">模板中必须包括一个返回值</span><span lang=\"EN-US\"><font face=\"Times New Roman\">type</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，代码类似于：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct function_name</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;template &lt;typename t1, typename t2,...&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></i><i><span courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\";=\"\" mso-bidi-font-family:=\"\" \"courier=\"\" new\"\"=\"\" style=\"font-family: 宋体;\">要执行的操作</span></i><i><span lang=\"EN-US\" courier=\"\" new\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" new=\"\" roman\"\"=\"\"></span></i></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></i><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">typedef ... type;</span></font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">元函数类的好处是有效地包装了元函数的功能，使得元函数可以像一个普通类一样使用，同时规定了</span><span lang=\"EN-US\" courier=\"\" new\"\"=\"\">::apply&lt;&gt;::type</span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">风格的统一接口，使得元函数类很容易进行组合，与</span><span lang=\"EN-US\"><font face=\"Times New Roman\">STL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的仿函数用法十分相近。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">2</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．序列内部元函数的机制</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">序列内部的元函数指的就是上文提及的序列支持的各类操作，这些操作在名称上完全仿照</span><span lang=\"EN-US\"><font face=\"Times New Roman\">STL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，但</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">与</span><span lang=\"EN-US\"><font face=\"Times New Roman\">STL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的差别在于，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">STL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">容器的操作通常是作为容器成员函数定义和使用的。在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中，这些操作定义在序列的外部，无论使用任何一个操作都必须包含一个声明这个操作的头文件，比如要使用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">at</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这个元函数，就必须包含</span><span lang=\"EN-US\"><font face=\"Times New Roman\">at.hpp</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">文件。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">使用通用的接口必然要求对类型进行识别，不幸的是，类模板无法（联系到不定序列的组织形式，或者也可以说是不便）提供像</span><span lang=\"EN-US\"><font face=\"Times New Roman\">C++</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">类成员函数那样的重载和匹配参数的能力，为了使用通用的接口，唯一的方案就是用一些预定义的标记来识别，在</span><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中，每个标记实际上都是一个类。利用这种机制实现的元函数称作标记分派元函数（</span><span lang=\"EN-US\"><font face=\"Times New Roman\">Tag Dispatched Metafunction</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">）。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">每一个标记分派元函数总是包含</span><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">个部分：一个元函数（作为外部的通用接口）、一个相关联的产生标记的元函数（区分实体类型）和底层实现（以元函数类的形式出现）。通过标记的判断，外层结构选择相应的底层实现来执行具体的操作，达到一种重载的效果。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">MPL</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">中大多数与序列和迭代器打交道的元函数都遵循标记分派元函数的机制来实现。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font face=\"Times New Roman\" size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">3</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">．源代码分析</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\"><font size=\"2\">由于序列的元函数为数甚多，每一个元函数又包括了好几个实现版本，本文将不逐一分析每一个实现，仅挑选具有代表性的元函数进行分析，以了解它们的概貌和内在的关系。</font></span></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">序列的内部元函数与迭代器关系十分密切，常常相互作用，以</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">为例，元函数</span><span lang=\"EN-US\"><font face=\"Times New Roman\">begin</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的接口和实现代码分别是：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename Sequence=na</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct begin</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename sequence_tag&lt;Sequence&gt;::type tag_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename begin_impl&lt; tag_ &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::template apply&lt; Sequence &gt;::type type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct begin_impl&lt; aux::vector_tag &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename Vector &gt; struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef v_iter&lt;Vector,0&gt; type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">这段代码非常典型，首先它体现出标记分派机制的作用，模板的特化能力令编译器能够找到适合的</span><span lang=\"EN-US\"><font face=\"Times New Roman\">begin_impl</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">版本；另一方面，它又是元函数类的一个典型例子。可以看到，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">begin</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">返回了一个指向</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">头部的迭代器，然而从上文的分析又可以知道，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_iter</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">内部实际上还是调用了</span><span lang=\"EN-US\"><font face=\"Times New Roman\">at</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的底层实现。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">对序列进行删除的操作时会使用到</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的另外一个底层结构</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename Base</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;, int at_front</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct v_mask</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;: Base</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename prior&lt;typename Base::upper_bound_&gt;::type index_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef index_ upper_bound_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename prior&lt;typename Base::size&gt;::type size;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef Base base;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;static aux::type_wrapper&lt;void_&gt; item_(index_);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;using Base::item_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typename Base</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct v_mask&lt;Base,1&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;: Base</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename Base::lower_bound_ index_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename next&lt;index_&gt;::type lower_bound_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef typename prior&lt;typename Base::size&gt;::type size;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;typedef Base base;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\">&nbsp;</font></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;static aux::type_wrapper&lt;void_&gt; item_(index_);</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;using Base::item_;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">其定义与</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_item</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">非常相似，当需要用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">pop_front</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">进行头部的删除时，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">便会被使用了：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct pop_front_impl&lt; aux::vector_tag &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;template&lt; typename Vector &gt; struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef v_mask&lt;Vector,1&gt; type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">pop_front</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">调用的是</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的特化版本，当</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的第二个模板参数被设定为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">1</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">时，表示从头部删除，否则将表示从尾部删除。事实上</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">并没有真正删除一个类型，它所做的事情只是屏蔽了第一个或最后一个元素。类似地</span><span lang=\"EN-US\"><font face=\"Times New Roman\">pop_back</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">也使用</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_mask</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，差异仅仅是第二个参数改为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">0</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">而已。</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span lang=\"EN-US\"><font face=\"Times New Roman\">push_front</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">和</span><span lang=\"EN-US\"><font face=\"Times New Roman\">push_back</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">使用的仍然是</span><span lang=\"EN-US\"><font face=\"Times New Roman\">vector</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的最基础设施</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_item</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">，其桥梁作用使得在头尾插入异常简单：</span></font></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt;&gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct push_front_impl&lt; aux::vector_tag &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">template&lt; typename Vector, typename T &gt;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 21pt; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">struct apply</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;{</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typedef v_item&lt;T,Vector,1&gt; type;</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">&nbsp;&nbsp;&nbsp;&nbsp;};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt 31.5pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><span lang=\"EN-US\" courier=\"\" new\"\"=\"\"><font size=\"2\">};</font></span></p><p style=\"margin: 20px 0px; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"></p><p class=\"MsoNormal\" style=\"margin: 0cm 0cm 0pt; padding: 0px; line-height: 24px; color: rgb(92, 92, 92); text-indent: 2em; word-break: break-all;\"><font size=\"2\"><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">相应地，</span><span lang=\"EN-US\"><font face=\"Times New Roman\">push_back</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的实现中需要把</span><span lang=\"EN-US\"><font face=\"Times New Roman\">v_item</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">的第三个参数改为</span><span lang=\"EN-US\"><font face=\"Times New Roman\">0</font></span><span times=\"\" new=\"\" roman\";=\"\" mso-hansi-font-family:=\"\" \"times=\"\" roman\"\"=\"\" style=\"font-family: 宋体;\">。</span></font></p></div></div>"
    }
  ]
}
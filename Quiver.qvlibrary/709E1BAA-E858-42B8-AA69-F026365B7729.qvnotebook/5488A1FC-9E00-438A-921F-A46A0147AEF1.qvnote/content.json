{
  "title": "利用 gprof2dot 和graphviz 图形化定位linux c/c++系统性能瓶颈",
  "cells": [
    {
      "type": "text",
      "data": "<span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span style=\"font-family: 宋体;\"><font size=\"3\">1 下载</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span style=\"font-family: 宋体;\"></span>&nbsp;</p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\"><a href=\"http://code.google.com/p/jrfonseca/wiki/Gprof2Dot\">http://code.google.com/p/jrfonseca/wiki/Gprof2Dot</a></font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><a href=\"http://jrfonseca.googlecode.com/svn/trunk/gprof2dot/gprof2dot.py\"><font face=\"Times New Roman\" size=\"3\">http://jrfonseca.googlecode.com/svn/trunk/gprof2dot/gprof2dot.py</font></a><font face=\"Times New Roman\" size=\"3\">&nbsp;&nbsp;</font></span><font size=\"3\"><span style=\"font-family: 宋体;\">下载</span><span lang=\"EN-US\"><font face=\"Times New Roman\"><a target=\"_self\"><u><strong>gprof2dot</strong></u></a>.py</font></span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font><a href=\"http://www.graphviz.org/Download_source.php\"><font face=\"Times New Roman\" size=\"3\">http://www.graphviz.org/Download_source.php</font></a></span><span style=\"font-family: 宋体;\"><font size=\"3\">下载源代码</font></span><span lang=\"EN-US\" style=\"font-size: 10pt; line-height: 20px;\"><a href=\"http://www.graphviz.org/pub/graphviz/ARCHIVE/graphviz-2.18.tar.gz\"><font face=\"Times New Roman\">graphviz-2.18.tar.gz</font></a></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span style=\"font-family: 宋体;\"><font size=\"3\">2&nbsp; 环境</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">[admin@b2bsearch80 bin]$ python&nbsp;-V</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font size=\"3\"><font face=\"Times New Roman\">Python2.3.4</font></font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">[admin@b2bsearch80 bin]$&nbsp;<a target=\"_self\"><u><strong>gcc</strong></u></a>&nbsp;-v</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">Reading specs from /usr/lib/gcc/i386-redhat-linux/3.4.6/specs</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=i386-redhat-linux</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">Thread model: posix</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">gcc version 3.4.6 20060404 (Red Hat3.4.6-3)</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">[admin@b2bsearch80 bin]$ uname -a</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\"><a target=\"_self\"><u><strong>Linux</strong></u></a>&nbsp;b2bsearch802.6.9-42.ELsmp #1 SMP Wed Jul 12 23:27:17 EDT 2006 i686 i686 i386 GNU/Linux</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span style=\"font-family: 宋体;\"><font size=\"3\">3&nbsp; 安装</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">Chmod&nbsp;744 gprof2dot.py</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><font face=\"Times New Roman\"><span lang=\"EN-US\"><font size=\"3\">Tar&nbsp;-zxvf&nbsp;</font></span><span lang=\"EN-US\" style=\"font-size: 10pt; line-height: 20px;\"><a href=\"http://www.graphviz.org/pub/graphviz/ARCHIVE/graphviz-2.18.tar.gz\">graphviz-2.18.tar.gz</a></span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 20pt;\"><span lang=\"EN-US\" style=\"font-size: 10pt; line-height: 20px;\"><font face=\"Times New Roman\">&nbsp;&nbsp;./configure</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 20pt;\"><span lang=\"EN-US\" style=\"font-size: 10pt; line-height: 20px;\"><font face=\"Times New Roman\">&nbsp;make</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 20pt;\"><span lang=\"EN-US\" style=\"font-size: 10pt; line-height: 20px;\"><font face=\"Times New Roman\">&nbsp;&nbsp;su&nbsp;&nbsp;-</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font size=\"3\"><font face=\"Times New Roman\">&nbsp;make install</font></font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><font size=\"3\"><span lang=\"EN-US\"><font face=\"Times New Roman\">4&nbsp; &nbsp;</font></span><span style=\"font-family: 宋体;\">编译代码</span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">gcc -pg&nbsp;-g&nbsp;-o&nbsp;uniqueCoreDump&nbsp;uniqueCoreDump.c</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><font size=\"3\"><span lang=\"EN-US\"><font face=\"Times New Roman\">5&nbsp; 执行</font></span></font>代码生成gmon.out</p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\">&nbsp;</p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><font size=\"3\"><span lang=\"EN-US\"><font face=\"Times New Roman\">&nbsp;</font>&nbsp;</span><span style=\"font-family: 宋体;\">执行命令产生</span><span lang=\"EN-US\"><font face=\"Times New Roman\">gmon.out</font></span><span style=\"font-family: 宋体;\">文件</span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp; ./uniqueCoreDump</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">ll gmon.out</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><font size=\"3\"><span style=\"font-family: 宋体;\">如果</span><span lang=\"EN-US\"><font face=\"Times New Roman\">gprof&nbsp;./uniqueCoreDump</font></span><span style=\"font-family: 宋体;\">有：</span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">gmon.out file is missing call-graph data</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><font size=\"3\"><span style=\"font-family: 宋体;\">则表示没有正确的编译选项或者只有一个</span><span lang=\"EN-US\"><font face=\"Times New Roman\">main</font></span><span style=\"font-family: 宋体;\">函数</span></font></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp;</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 36pt;\"><span style=\"font-family: 宋体;\"><font size=\"3\">6&nbsp; 生成图片</font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font size=\"3\"><font face=\"Times New Roman\">&nbsp;gprof&nbsp;./uniqueCoreDump&nbsp;&nbsp;| ./gprof2dot.py -n0 -e0 | dot -Tpng -o output.png</font></font></span></p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"></span>&nbsp;</p><p class=\"MsoNormalIndent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; margin: 0cm 0cm 0pt; text-indent: 24pt;\"><span lang=\"EN-US\"><font face=\"Times New Roman\" size=\"3\">&nbsp; sz&nbsp; output.png&nbsp;</font></span></p>"
    }
  ]
}
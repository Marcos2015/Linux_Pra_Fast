{
  "title": "MAC下vim插件YouCompleteMe和HomeBrew python不兼容的解决方法",
  "cells": [
    {
      "type": "text",
      "data": "<div><div><p>今天配置了mac的vim，说到vim优化，肯定少不了大牛Valloric的YouCompleteMe插件，这个插件主要服务于vim各种语言的自动补全，速度很快很优雅，所以就必须要装啦。具体安装方法见大牛的github:<br>\n<a href=\"https://link.jianshu.com?t=https://github.com/Valloric/YouCompleteMe.git\" target=\"_blank\" rel=\"nofollow\">https://github.com/Valloric/YouCompleteMe.git</a></p>\n<p>安装以后打开vim发现各种报错。 这是咋回事呢？ 原来是这个插件和mac homebrew安装的python并不兼容，具体报错信息见：</p>\n<pre class=\"hljs shell\"><code class=\"shell\">importerror: dlopen(/usr/local/cellar/python/2.7.13/frameworks/python.framework/versions/2.7/lib/python2.7/lib-dynload/_io.so, 2): symbol not found: __pycodecinfo_getincrementaldecoder referenced\n</code></pre>\n<p>针对这个问题，网上主流的解决方法是重装macvim和python，或者brew unlink python<br>\n但是试了一下重装并没有解决这个问题，而且也不能因为vim优化让系统python退化为mac默认的2.6吧。所以就去翻出了大牛的源码，发现这个问题主要还是和python各个版本的_io.so不一样有关系，而且很多人在装图像处理的包时也会报类似的错误。<br>\n所以就实验了一下用旧版本的io源文件替换2.7.13版本的io文件，发现问题解决！</p>\n<p>下面放解决方法：</p>\n<p>首先在终端里运行：</p>\n<pre class=\"hljs shell\"><code class=\"shell\">sudo find / -name _io.so\n</code></pre>\n<p>会把系统下所有名字带_io.so的文件路径都列出来，下面是我的：<br>\n/Applications/Google Drive.app/Contents/Resources/lib/python2.7/lib-dynload/_io.so<br>\n/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so<br>\n/Users/Nico/macports/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so<br>\n/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so</p>\n<p>然后备份2.7.13的io文件到桌面</p>\n<pre class=\"hljs shell\"><code class=\"shell\">cd Desktop\nmkdir backup_python\ncp /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so backup_python/2.7.13_io.so\n</code></pre>\n<p>然后用老文件替换2.7.13的文件</p>\n<pre class=\"hljs shell\"><code class=\"shell\">cp /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n</code></pre>\n<p>然后YouCompleteMe就可以完美的工作啦！<br></p></div>作者：Nico_Zheng<br>链接：https://www.jianshu.com/p/2c252e422275<br>來源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div>"
    }
  ]
}
{
  "title": "vi 技巧和诀窍：令人刮目相看的 10 个超酷命令 成为 vi 编辑专家",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(34, 34, 34); font-family: Arial, sans-serif; font-size: 1.166em; line-height: 1.5em;\">在使用 vi 编辑器时 — 无论是初次使用的用户，还是有经验的用户 — 大多数人往往只掌握核心命令集，这些命令可以执行最常用的功能：导航或保存文件；插入、更新、删除或搜索数据；退出但不保存修改。</span><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">但是，vi 编辑器极其强大，特性和功能非常丰富。即使在多年使用 vi 之后，您仍然可能会发现有不知道的新命令。本文讨论的命令就属于不太为人所知的命令，但是它们可以简化您目前采用的操作方法，让您的工作方式更高效，或者让您能够完成原来不知道可以用 vi 完成的操作。</p><h2 id=\"line_numbering\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">打开和关闭行号</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">vi 编辑器的许多选项可以控制编辑会话的外观和感觉。使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set</code>&nbsp;命令修改 vi 中的会话设置。按 Escape 键进入命令模式之后，可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set all</code>&nbsp;命令显示选项和设置的列表。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">可以设置的选项之一是&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">number</code>，它的作用是打开和关闭行号（见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list1\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 1</a>）。</p><h5 id=\"list1\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 1. 打开行号之前</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">#\n# Internet host table\n#\n::1     localhost\n127.0.0.1       localhost       loghost\n192.168.0.6     centos5\n192.168.0.10    appserv\n192.168.0.11    webserv\n192.168.0.12    test\n192.168.0.5     solaris10       # Added by DHCP\n~\n~\n~\n:set number</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">这个命令让 vi 在当前编辑的文件中的每个记录上显示行号。让 vi 进入命令模式之后，可以输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set number</code>&nbsp;并按回车来打开行号（见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list2\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 2</a>）。</p><h5 id=\"list2\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 2. 打开行号之后</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">     1  #\n     2  # Internet host table\n     3  #\n     4  ::1     localhost\n     5  127.0.0.1       localhost       loghost\n     6  192.168.0.6     centos5\n     7  192.168.0.10    appserv\n     8  192.168.0.11    webserv\n     9  192.168.0.12    test\n    10  192.168.0.5     solaris10       # Added by DHCP \n~\n~\n~\n:set number</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set nonumber</code>&nbsp;命令关闭行号。还可以使用这个命令和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set number</code>&nbsp;命令的简写，即&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set nu</code>&nbsp;和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set nonu</code>。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">如果需要快速计算要用 vi 函数处理的行数，显示行号会非常有帮助。当行数很多，可能跨多个屏幕时，行号尤其有用。另外，有时候您知道要处理的行范围，但是需要查明要在 vi 命令中使用的初始和结束行号。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">如果希望每次进入 vi 会话时都显示行号，那么在主目录中的 .exrc 文件中添加&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">set number</code>&nbsp;行。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"auto-indentation\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">自动缩进</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">在用某些编程语言编写代码时，缩进是样式的重要部分，可以确保代码的可读性更好。如果需要，可以在 vi 编辑器中根据编程语言的样式设置自动缩进。使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">autoindent</code>&nbsp;打开或关闭自动缩进（见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list3\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 3</a>）。</p><h5 id=\"list3\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 3. 打开自动缩进</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">#!/bin/ksh\n#\n#\nfor file in /etc/*\ndo\n        if [[ -f ${file}  ]] ; then\n                 echo \"${file} is a file\"\n\n~\n~\n~\n~\n~\n:set autoindent</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">在此之后，如果在一行的开头输入空格或制表符，那么后续的新行将会缩进到相同的位置。在命令模式下，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set autoindent</code>，然后按回车打开自动缩进。通过设置&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">shiftwidth</code>&nbsp;确定缩进级别。例如，<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set shiftwidth=4</code>&nbsp;把每级缩进设置为四个空格（见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list4\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 4</a>）。</p><h5 id=\"list4\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 4. 设置缩进级别</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">#!/bin/ksh\n#\n#\nfor file in /etc/*\ndo\n    if [[ -f ${file}  ]] ; then\n        echo \"${file} is a file\"\n    elif [[ -d ${file} ]] ; then\n        echo \"${file} is a directory\"\n    fi\ndone \n~\n~\n:set shiftwidth=4</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">在命令模式下，可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">&gt;&gt;</code>&nbsp;命令让现有的一行增加一级缩进，使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">&lt;&lt;</code>&nbsp;命令减少一级缩进。在这些命令前面加上一个整数，即可让多行增加或减少一级缩进。例如，把游标放在&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list4\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 4</a>&nbsp;中第 6 行的开头，进入命令模式之后，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">5&gt;&gt;</code>&nbsp;就会让下面五行增加一级缩进。<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list5\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 5</a>&nbsp;显示结果。</p><h5 id=\"list5\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 5. 缩进代码块</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">#!/bin/ksh\n#\n#\nfor file in /etc/*\ndo\n        if [[ -f ${file}  ]] ; then\n            echo \"${file} is a file\"\n        elif [[ -d ${file} ]] ; then\n            echo \"${file} is a directory\"\n        fi\ndone \n~\n~</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set noautoindent</code>&nbsp;命令关闭自动缩进。还可以使用这个命令和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">autoindent</code>&nbsp;命令的简写，即&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set ai</code>&nbsp;和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set noai</code>。还可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set ai sw=4</code>&nbsp;在一个命令中打开缩进并设置缩进级别。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">如果希望每次启动 vi 会话时都启用自动缩进并把缩进级别设置为四个空格，那么在主目录中的 .exrc 文件中添加&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">set ai sw=4</code>&nbsp;行。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"ignore_case\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">在搜索时不区分大小写</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">如您所知，在 UNIX® 中执行搜索时，模式匹配是区分大小写的。但是，如果希望 vi 不区分大小写，那么可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set ignorecase</code>&nbsp;命令。使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set noignorecase</code>&nbsp;恢复区分大小写。还可以使用简写（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set ic</code>&nbsp;和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:set noic</code>）。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">如果希望每次进入 vi 会话时都启用不区分大小写的搜索，那么在主目录中的 .exrc 文件中添加&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">set ignorecase</code>&nbsp;行。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"compound_searches\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">复合搜索</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">在 vi 中，可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/</code>&nbsp;命令搜索字符串，这需要以字面字符串或正则表达式的形式指定要匹配的模式。例如，要想在文件中搜索单词&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">echo</strong>，只需进入命令模式，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/echo</code>，然后按回车。这个命令会找到&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list6\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 6</a>&nbsp;所示文件的第 3 行的第一个单词。</p><h5 id=\"list6\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 6. 复合搜索</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">     1  #!/bin/ksh\n     2  #\n     3  echo \"Starting\"\n     4  file=${1}\n     5\n     6  echo ${file}\n     7\n     8  if [[ ${file} = 1 ]] ; then\n     9          ((file=${file}+1))\n    10          echo \"Adding one gives \" \\\n    11                  ${file}\n    12  fi\n    13  echo \"Ending\"\n    14  exit\n~\n~</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">可以使用简单的正则表达式指定寻找包含某一单词而且后面有另一个单词的行。例如，要想寻找包含字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">echo</code>、后面有零个或更多字符、之后是字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">file</code>&nbsp;的第一行，应该使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/echo.*file</code>。在&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list6\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 6</a>&nbsp;所示的文件中，这个命令会找到第 6 行的第一个单词。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">但是，只有这两个字符串出现在同一行上，这个命令才认为是匹配的。如果希望搜索出现在另一个模式或字符串后面的某个模式或字符串，不管这两个模式或字符串是否在同一行上，那么可以指定由分号 (<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">;</code>) 分隔的两个搜索命令，从而执行复合搜索。例如，要想搜索出现在字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">{file}+1</code>&nbsp;后面的字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">echo</code>，应该使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/{file}+1/;/echo/</code>。在&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list6\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 6</a>&nbsp;所示的文件中，这个命令会找到第 10 行的第一个单词。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">复合搜索对于寻找代码中出现在另一个命令后面的某个命令尤其有用 — 例如，在设置某个变量之后调用函数的地方。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"replaying\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">重放搜索模式</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">当在文件中搜索要替换的模式时，可以让 vi 把要匹配的任何模式保存在缓冲区中；然后，在执行替换时，可以用缓冲区引用号重放它们。方法是把模式放在&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">\\(</code>&nbsp;和&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">\\)</code>&nbsp;之间，这会指示 vi 把模式放在编号的缓冲区（1 到 9）中。在执行替换时，可以用缓冲区引用号&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">\\1</code>&nbsp;到&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">\\9</code>&nbsp;引用这些缓冲区。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">例如，假设要在&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list7\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 7</a>&nbsp;所示的文件中搜索以单词&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">Martin</strong>&nbsp;开头的行并对每个匹配添加前缀&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">Mr</strong>&nbsp;和后缀&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">Wicks</strong>，那么进入命令模式，输入 vi 命令&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:%s/^\\(Martin\\)/Mr \\1 Wicks/g</code>，然后按回车。</p><h5 id=\"list7\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 7. 重放搜索模式（之前）</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">Martin is an IT consultant. Martin likes\nsnowboarding and mountain biking. Martin has\nworked on UNIX systems for over 15 years. Martin also\nworked for many years before that on mainframes.\nMartin lives in London.\n~\n~\n~\n~\n:%s/^\\(Martin\\)/Mr \\1 Wicks/g</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">下面把这个命令分解开解释一下：</p><ul class=\"ibm-bullet-list\" style=\"border: 0px; outline: 0px; font-size: 1.166em; vertical-align: baseline; list-style: none; margin: 0px; padding: 0px 0px 8px; color: rgb(51, 51, 51); line-height: 1.5em; font-family: Arial, sans-serif;\"><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:%s</code></strong>&nbsp;— 指示 vi 执行替换。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/</code></strong>&nbsp;— 模式分隔符。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">^\\(Martin\\)</code></strong>&nbsp;— 寻找以字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">Martin</code>&nbsp;开头的行并把这个字符串保存在缓冲区 1 中。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/</code></strong>&nbsp;— 模式分隔符。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">Mr \\1 Wicks</code></strong>&nbsp;— 把找到的字符串替换为字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">Mr</code>，加上缓冲区 1 中的内容，再加上字符串&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">Wicks</code>。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/</code></strong>&nbsp;— 模式分隔符。</li><li style=\"margin: 0px; padding: 5px 0px 5px 11px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; background-image: url(http://1.www.s81c.com/i/v17/bullets/ibm_lg_bullet_grey_on.gif); height: 22px; clear: left; background-position: 0px 13px; background-repeat: no-repeat no-repeat;\"><strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\"><code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">g</code></strong>&nbsp;— 全局修改（即修改所有匹配的地方）。</li></ul><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">在搜索和替换字符串中都可以使用缓冲区引用。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">修改的结果见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list8\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 8</a>。</p><h5 id=\"list8\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 8. 重放搜索模式（之后）</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">Mr Martin Wicks is an IT consultant. Martin likes\nsnowboarding and mountain biking. Martin has\nworked on UNIX systems for over 15 years. Martin also\nworked for many years before that on mainframes.\nMr Martin Wicks lives in London.\n~\n~\n~\n~\n:%s/^\\(Martin\\)/Mr \\1 Wicks/g</pre></div><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"bookmarks\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">书签</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">可以让 vi 在文件中的特定位置放上书签。方法是按 Escape 键，再按 M 键，然后输入另一个表示书签引用的字母表字符。因此，最多可以有 26 个书签，分别名为&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">a</strong>&nbsp;到&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">z</strong>。要返回到上一书签，按 Escape 键，再按反撇号（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">`</code>），然后输入书签引用字符。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">例如，按 Escape 之后按 M 和 A 键，就会把当前游标位置保存在书签&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">a</strong>&nbsp;中。在编辑会话中，以后希望返回到这个游标位置时，只需按 Escape，然后输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">`A</code>。可以使用双反撇号（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">``</code>）命令在当前书签和前一个书签之间切换。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"find\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">查找、更新、查找下一个、重复</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">在 vi 编辑器中，最有用的搜索/替换特性之一是查找与某个模式匹配的字符串，更新它，然后继续搜索下一个匹配的字符串，然后选择是否以相同方式更新它。这与 Microsoft® Word 中的查找下一个/替换功能很相似。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">您可能已经知道可以在 vi 中搜索字符串模式，方法是进入命令模式，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">/<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; font-family: Arial, sans-serif;\">search_pattern</strong></code>（其中的&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">search_pattern</strong>&nbsp;是字符串或正则表达式），然后按回车。这样做就会找到与指定的模式匹配的第一个字符串。在此之后，可以在找到的文本上执行任何操作。例如，按 Escape，再按 C 和 W 键，再输入更多文本，就会把找到的字符串替换为另一个单词。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">要想快速地找到与模式匹配的下一个地方，应该按 Escape，然后按 N 键。在找到下一个匹配时，可以使用点号键（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">.</code>）在这个位置重复最近的文本操作，比如前一个示例中使用的修改单词（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">cw</code>）操作。然后，可以使用这些键继续寻找其他匹配（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">n</code>）并选择重复文本操作（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">.</code>），操作方式与使用 Word 中的查找下一个/替换功能很相似。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"switch_case\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">切换大小写</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">在 vi 中，可以切换游标下的字母字符的大小写，方法是按 Escape，然后按波浪号键（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">~</code>）。这会在小写和大写之间来回切换。按着这个键，移动游标经过行中的每个字符，就会切换遇到的每个字母字符的大小写。可以在波浪号前面输入一个数字，表示希望改变多少个字母字符的大小写。</p><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"filtering\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">筛选</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">您可能知道，在 vi 中按 Escape，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:!<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; font-family: Arial, sans-serif;\">command</strong></code>（其中的&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">command</strong>&nbsp;是要执行的 UNIX 命令），然后按回车，就可以在 shell 中执行命令。例如，<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:!pwd</code>&nbsp;显示编辑会话当前的工作目录。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">但是，还可以把文件的一部分作为标准输入发送给 UNIX 命令，并用产生的输出替换编辑缓冲区中的相同部分。例如，如果希望在 vi 会话内对&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list9\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 9</a>&nbsp;所示的整个文件进行排序，可以按 Escape，输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:1,$!sort</code>&nbsp;并按回车，这让 vi 把从第一行到文件末尾（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">$</code>）的所有内容传递给&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">sort</code>命令，用输出替换指定的部分。</p><h5 id=\"list9\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 9. 在 vi 会话内执行文件排序（排序之前）</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">5\n4\n3\n2\n7\n6\n5\n4\n8\n9\n6\n3\n1\n3\n4\n~\n~\n:1,$!sort</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list10\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 10</a>&nbsp;显示&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">sort</code>&nbsp;操作的结果。</p><h5 id=\"list10\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 10. 在 vi 会话内执行文件排序（排序之后）</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">1\n2\n3\n3\n3\n4\n4\n4\n5\n5\n6\n6\n7\n8\n9\n~\n~\n:1,$!sort</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">另外，还可以在 shell 命令前面加上从当前游标位置开始希望操作的行数。方法是按 Escape，然后输入指定行数的数字，然后输入两个惊叹号（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">!!</code>），最后输入 UNIX 命令。</p><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">例如，把游标放在&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list9\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 9</a>&nbsp;中第 4 行的开头，按 Escape，然后输入：</p><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">4!!awk '{print \"New text\",$0}'</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">再按回车，就会在第 4 到第 7 行（含）上加上前缀文本&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">New text</code>，见&nbsp;<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list11\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 11</a>。</p><h5 id=\"list11\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 11. 在多个代码行前面加上新文本</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">5\n4\n3\nNew text 2\nNew text 7\nNew text 6\nNew text 5\n4\n8\n9\n6\n3\n1\n3\n4\n~\n~\n!awk '{print \"New text\",$0}'</pre></div><p style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; font-size: 1.166em !important;\">可以使用管道分隔符（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">|</code>）把 UNIX 命令连接在一起，从而在 vi 会话中执行复杂强大的筛选。例如，假设要把当前 vi 会话的编辑缓冲区中的文件内容替换为每行的第一个空格分隔的字段，按升序排序并转换为大写，那么在按 Escape 之后输入：</p><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">:1,$!awk '{print $1}' | sort | tr [:lower:] [:upper:]</pre></div><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"save\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">保存部分内容</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">可以保存当前编辑的文件的部分内容，方法是按 Escape，然后输入&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">:<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; font-family: Arial, sans-serif;\">start</strong>,<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; font-family: Arial, sans-serif;\">end</strong>w&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; font-family: Arial, sans-serif;\">file</strong></code>，其中的&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">start</strong>&nbsp;是当前文件中要保存的第一行，<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">end</strong>&nbsp;是要保存的最后一行，<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">w</code>&nbsp;表示希望写到另一个文件中（或者覆盖现有的文件），<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">file</strong>&nbsp;是指定的部分要保存到的文件。对于最后一行，可以使用&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">$</code>&nbsp;表示文件的末尾。可以在&nbsp;<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">w</code>&nbsp;后面使用两个大于号（<code style=\"padding-top: 0px; padding-bottom: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; line-height: 1.5em; font-size: 0.95em !important; color: rgb(0, 0, 0) !important;\">&gt;&gt;</code>）表示希望把内容附加到文件中而不是覆盖文件。<a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#list12\" style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133);\">清单 12</a>&nbsp;中的示例把第 6 到第 9 行（含）附加到文件&nbsp;<strong style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: inherit; vertical-align: baseline;\">/tmp/newfile</strong>&nbsp;中。</p><h5 id=\"list12\" style=\"color: rgb(0, 0, 0); margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">清单 12. 把文件的部分内容保存到另一个文件中（附加而不是覆盖）</h5><div class=\"codesection\" style=\"color: rgb(0, 0, 0); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; line-height: 15px;\"><pre class=\"displaycode\" style=\"margin-top: 0px; border: 1px solid rgb(204, 204, 204); outline: 0px; font-size: 11px; vertical-align: baseline; width: 780px; font-family: 'Andale Mono', 'Lucida Console', Monaco, Liberation, fixed, monospace; overflow: auto; clear: right; margin-bottom: 6px !important; padding: 5px 10px 5px 3px !important; background-color: rgb(247, 247, 247) !important;\">     1  #\n     2  # Internet host table\n     3  #\n     4  ::1     localhost\n     5  127.0.0.1       localhost       loghost\n     6  192.168.0.6     centos5\n     7  192.168.0.10    appserv\n     8  192.168.0.11    webserv\n     9  192.168.0.12    test\n    10  192.168.0.5     solaris10       # Added by DHCP \n~\n~\n~\n:6,9w &gt;&gt; /tmp/newfile</pre></div><div class=\"ibm-alternate-rule\" style=\"color: rgb(0, 0, 0); margin: 10px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; background-color: rgb(204, 204, 204); height: 1px; clear: both; line-height: 15px;\"></div><p class=\"ibm-ind-link ibm-back-to-top\" style=\"margin: 0px; padding: 6px 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); clear: both; text-align: right; height: 22px; line-height: 1.5em; font-size: 1.166em !important;\"><a href=\"http://www.ibm.com/developerworks/cn/aix/library/au-vitips.html#ibm-pcon\" class=\"ibm-anchor-up-link\" style=\"margin: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; border-width: 0px; border-bottom-style: none; outline: 0px; font-size: inherit; vertical-align: baseline; color: rgb(116, 82, 133); opacity: 0.8; display: inline; text-decoration: none; line-height: 1.065em; font-weight: bold; padding-left: 16px !important; background-image: url(http://1.www.s81c.com/i/v17/icons/ibm_sprite_arrow_blue_ON.png) !important; background-position: 0px -401px; background-repeat: no-repeat no-repeat;\">回页首</a></p><h2 id=\"N10272\" style=\"color: rgb(0, 0, 0); margin: 5px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: HelveticaNeue-Light, 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial; font-size: 1.6em !important;\">结束语</h2><p style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; color: rgb(34, 34, 34); line-height: 1.5em; margin-top: 5px !important; padding-top: 0px !important; font-size: 1.166em !important;\">vi 编辑器是一个极其强大的工具，本文提供了一些技巧和诀窍，希望能够帮助您更高效地编辑文件。请记住，vi 还有更多不太为人所知的特性。祝工作愉快！</p>"
    }
  ]
}
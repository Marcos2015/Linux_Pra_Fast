{
  "title": "vi/Vim + Cscope/Ctags",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><font face=\"Arial\"><span style=\"font-size: 14px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></font><span style=\"color: rgb(46, 34, 86); font-family: 'Noto Serif', serif; font-size: 17px; font-style: inherit;\">使用vim + cscope/ctags，就可以实现SourceInsight的功能，以后可以不再用盗版SouceInsight读代码了。</span><div class=\"entry-content\" style=\"color: rgb(0, 0, 0); font-family: inherit; font-style: inherit; box-sizing: inherit; border: 0px; font-size: 17px; margin: 0px; outline: 0px; padding: 0px 69.640625px 69.640625px; vertical-align: baseline; -webkit-hyphens: auto; word-wrap: break-word;\"><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">按照vim里cscope的参考手册(在vim中执行”:help cscope”命令)，把cscope功能加到.vimrc里后(需要你的vim在编译时选择了”–enable-cscope”选项，否则你需要重新编译vim)，配置就算完成了。然后用下面的命令生成代码的符号索引文件：</p><div style=\"box-sizing: inherit; border: 0.5pt solid windowtext; font-family: 'Noto Serif', serif; margin: 0px; outline: 0px; padding: 4px 5.4pt; vertical-align: baseline; color: rgb(46, 34, 86); background-image: none; background-attachment: scroll; background-color: rgb(230, 230, 230); width: 529.328125px; background-position: 0% 50%; background-repeat: repeat repeat;\"><div style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 255);\">cscope</span>&nbsp;-Rbkq</span></div></div><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\"><br style=\"box-sizing: inherit;\">这个命令会生成三个文件：cscope.out,&nbsp;<a href=\"http://cscope.in/\">cscope.in</a>.out, cscope.po.out。<br style=\"box-sizing: inherit;\">其中cscope.out是基本的符号索引，后两个文件是使用”-q”选项生成的，可以加快cscope的索引速度。<br style=\"box-sizing: inherit;\">上面所用到的命令参数，含义如下：</p><div style=\"box-sizing: inherit; border: 0.5pt solid windowtext; font-family: 'Noto Serif', serif; margin: 0px; outline: 0px; padding: 4px 5.4pt; vertical-align: baseline; color: rgb(46, 34, 86); background-image: none; background-attachment: scroll; background-color: rgb(230, 230, 230); width: 529.328125px; background-position: 0% 50%; background-repeat: repeat repeat;\"><div style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\"><img src=\"quiver-image-url/A6339EE3E57D1D52BC7D02B338E15A60.gif\" alt=\"\" align=\"top\" style=\"box-sizing: inherit; border: 0px; vertical-align: middle;\" width=\"11\" height=\"16\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 255);\">-R</span>:&nbsp;在生成索引文件时，搜索子目录树中的代码<br style=\"box-sizing: inherit;\"><img src=\"quiver-image-url/A6339EE3E57D1D52BC7D02B338E15A60.gif\" alt=\"\" align=\"top\" style=\"box-sizing: inherit; border: 0px; vertical-align: middle;\" width=\"11\" height=\"16\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 255);\">-b</span>:&nbsp;只生成索引文件，不进入cscope的界面<br style=\"box-sizing: inherit;\"><img src=\"quiver-image-url/A6339EE3E57D1D52BC7D02B338E15A60.gif\" alt=\"\" align=\"top\" style=\"box-sizing: inherit; border: 0px; vertical-align: middle;\" width=\"11\" height=\"16\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 255);\">-k</span>:&nbsp;在生成索引文件时，不搜索</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">/</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">usr</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">/</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">include目录<br style=\"box-sizing: inherit;\"><img src=\"quiver-image-url/A6339EE3E57D1D52BC7D02B338E15A60.gif\" alt=\"\" align=\"top\" style=\"box-sizing: inherit; border: 0px; vertical-align: middle;\" width=\"11\" height=\"16\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 255);\">-q</span>:&nbsp;生成cscope</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">.</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">in</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">.</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">out和cscope</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">.</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">po</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">.</span><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(0, 0, 0);\">out文件，加快cscope的索引速度</span></div></div><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">接下来，就可以在vim里读代码了。<br style=\"box-sizing: inherit;\">不过在使用过程中，发现无法找到C++的类、函数定义、调用关系。仔细阅读了cscope的手册后发现，原来cscope在产生索引文件时，只搜索类型为C, lex和yacc的文件(后缀名为.c, .h, .l, .y)，C++的文件根本没有生成索引。不过按照手册上的说明，cscope支持c++和Java语言的文件。<br style=\"box-sizing: inherit;\">于是按照cscope手册上提供的方法，先产生一个文件列表，然后让cscope为这个列表中的每个文件都生成索引。<br style=\"box-sizing: inherit;\">为了方便使用，编写了下面的脚本来更新cscope和ctags的索引文件：</p><pre class=\"programinglist\" style=\"box-sizing: inherit; border: 1px solid rgba(46, 34, 86, 0.0980392); font-family: Inconsolata, monospace; margin-top: 0px; margin-bottom: 1.6471em; outline: 0px; padding: 0.8em; vertical-align: baseline; -webkit-hyphens: none; background-color: rgba(0, 0, 0, 0.00784314); line-height: 1.2353; max-width: 100%; overflow: auto; color: rgb(46, 34, 86);\">#!/bin/sh\n\nfind . -name \"*.h\" -o -name \"*.c\"-o -name \"*.cc\" &gt; cscope.files\ncscope -bkq -i cscope.files\nctags -R\n</pre><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\"><br style=\"box-sizing: inherit;\">这个脚本，首先使用find命令，查找当前目录及子目录中所有后缀名为”.h”, “.c”和”.cc”的文件，并把查找结果重定向到文件cscope.files中。<br style=\"box-sizing: inherit;\">然后cscope根据cscope.files中的所有文件，生成符号索引文件。<br style=\"box-sizing: inherit;\">最后一条命令使用ctags命令，生成一个tags文件，在vim中执行”:help tags”命令查询它的用法。它可以和cscope一起使用。</p><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">目前只能在unix系列操作系统下使用cscope，虽然也有windows版本的cscope，不过还有很多bug。在Linux技术中坚站上看到有作者在win2000上成功运行了gvim + cscope，详情可以参阅：<br style=\"box-sizing: inherit;\">　　<a href=\"http://www.chinalinuxpub.com/bbs/showthread.php?t=30185\" target=\"_blank\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://www.chinalinuxpub.com/bbs/showthread.php?t=30185</a><br style=\"box-sizing: inherit;\">(2009/04/06更新)网友<a href=\"http://sf.net/projects/mslk\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">mslk</a>提供了cscope 15.7的win32编译版本下载，下载地址：<br style=\"box-sizing: inherit;\"><a href=\"http://sourceforge.net/project/showfiles.php?group_id=196604&amp;package_id=232374\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://sourceforge.net/project/showfiles.php?group_id=196604&amp;package_id=232374</a><br style=\"box-sizing: inherit;\">感谢他的辛勤工作，大家有时间去他的<a href=\"http://sf.net/projects/mslk\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">MSLK</a>项目看看，这个项目目的是为Linux下的工具提供预编译的windows版本。</p><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">在vim的网站上，也有人在cygwin中成功运行了vim + cscope，详情请参阅：<br style=\"box-sizing: inherit;\">　　<a href=\"http://vim.sourceforge.net/tips/tip.php?tip_id=338\" target=\"_blank\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://vim.sourceforge.net/tips/tip.php?tip_id=338</a><br style=\"box-sizing: inherit;\">另外，还有人在windows上安装了XFree86包，然后在Xwindow中运行gvim + cscope。这同样可以在上面的网页中看到。</p><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">cscope的主页在：<a href=\"http://cscope.sourceforge.net/\" target=\"_blank\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://cscope.sourceforge.net/</a></p><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">在vim的网站上，有很多和cscope相关的插件，可以去找一下你有没有所感兴趣的。搜索结果在这里：　<a href=\"http://www.vim.org/scripts/script_search_results.php?keywords=cscope&amp;script_type=&amp;order_by=rating&amp;direction=descending&amp;search=search\" target=\"_blank\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">点这里</a></p><p style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\">另外，我的<a href=\"http://easwy.com/blog/archives/advanced-vim-skills-catalog/\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">vim使用进阶</a>系列文章介绍了vim的更多特性。</p><div class=\"posturl\" style=\"box-sizing: inherit; border: 0px; font-family: 'Noto Serif', serif; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86);\"><p style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline;\"><span class=\"bold\" style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\">原创文章，请阅读页脚的<a href=\"http://easwy.com/blog/archives/vim-cscope-ctags/#license\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">许可方式</a>，转载请注明：</span></span>转载自<a class=\"link\" href=\"http://easwy.com/blog/\" target=\"_top\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">易水博客</a>&nbsp;[&nbsp;<a class=\"link\" href=\"http://easwy.com/blog/\" target=\"_top\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://easwy.com/blog/</a>&nbsp;]</p><p style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px 0px 1.6471em; outline: 0px; padding: 0px; vertical-align: baseline;\"><span class=\"bold\" style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\"><span style=\"box-sizing: inherit; border: 0px; font-family: inherit; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;\">本文链接地址:</span></span>&nbsp;<a class=\"link\" href=\"http://easwy.com/blog/archives/vim-cscope-ctags/\" target=\"_top\" style=\"box-sizing: inherit; border-width: 0px 0px 1px; border-bottom-style: solid; border-color: rgb(46, 34, 86); font-family: inherit; font-style: inherit; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline; color: rgb(46, 34, 86); text-decoration: none;\">http://easwy.com/blog/archives/vim-cscope-ctags/</a></p></div></div>"
    }
  ]
}
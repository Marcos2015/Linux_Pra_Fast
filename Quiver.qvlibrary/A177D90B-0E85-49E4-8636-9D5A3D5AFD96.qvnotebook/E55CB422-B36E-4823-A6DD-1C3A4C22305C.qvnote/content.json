{
  "title": "C语言操作MySQL数据库",
  "cells": [
    {
      "type": "text",
      "data": "<h1 style=\"color: rgb(0, 0, 0); font-family: Arial;\"><span class=\"link_title\"><a href=\"http://blog.csdn.net/andy_yf/article/details/7487307\">C语言操作MySQL数据库</a></span></h1><div class=\"article_manage\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span class=\"link_categories\">分类：&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/category/1131241\">MySQL</a>&nbsp;</span><span class=\"link_postdate\">2012-04-22 19:51</span>&nbsp;<span class=\"link_view\" title=\"阅读次数\">1776人阅读</span>&nbsp;<span class=\"link_comments\" title=\"评论次数\"><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#comments\">评论</a>(0)</span>&nbsp;<span class=\"link_collect\"><a title=\"收藏\">收藏</a></span>&nbsp;<span class=\"link_report\"><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#report\" title=\"举报\">举报</a></span></div><div class=\"tag2box\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><a href=\"http://www.csdn.net/tag/mysql\" target=\"_blank\">mysql</a><a href=\"http://www.csdn.net/tag/%e8%af%ad%e8%a8%80\" target=\"_blank\">语言</a><a href=\"http://www.csdn.net/tag/c\" target=\"_blank\">c</a><a href=\"http://www.csdn.net/tag/%e6%95%b0%e6%8d%ae%e5%ba%93\" target=\"_blank\">数据库</a><a href=\"http://www.csdn.net/tag/null\" target=\"_blank\">null</a><a href=\"http://www.csdn.net/tag/query\" target=\"_blank\">query</a></div><span style=\"font-size: 12px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">1.连接数据库。<br>&nbsp;&nbsp;&nbsp; 从C语言连接MySQL数据库包含两个步骤：<br>&nbsp;&nbsp;&nbsp; a）初始化连接句柄结构；<br>&nbsp;&nbsp;&nbsp; b）实际创建连接。&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; 首先使用mysql_init初始化连接句柄：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL&nbsp;*&nbsp;mysql_init&nbsp;（MYSQL&nbsp;*）;&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 通常传递一个空指针给mysql_init这个函数，它会返回一个指向新分配的连接句柄结构的指针。如果传递一个已有的结构，他将被重新初始化。如果出错，返回NULL。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 初始化成功后，则使用mysql_real_connect来创建一个实际的连接：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL&nbsp;*&nbsp;mysql_real_connect(MYSQL&nbsp;*&nbsp;connection,&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*&nbsp;server_host,&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*&nbsp;sql_user_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*&nbsp;sql_password,&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*db_name,&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;port_number,&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*&nbsp;unix_socket_name,&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;flags);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; connection必须是已经初始化的连接句柄结构，server_host可以是主机名，也可以是IP地址，如果仅仅连接到本机，可以使用 localhost来优化连接类型。port_number和unix_socket_name应该分别为0和NULL，除非改变了MYSQL安装的默认 设置。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp; 如果无法连接，返回NULL。完成连接后，在程序正常退出前，应该使用mysql_close关闭这个连接句柄。&nbsp;&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">void&nbsp;mysql_close(MYSQL&nbsp;*&nbsp;connection);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 现在我们试图调用以上函数来建立一个对以上已经建好的数据库的访问，程序为connect1.c。内容如下：</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">#include&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">stdlib.h</span><span class=\"tag\">&gt;</span>&nbsp;&nbsp;</li><li class=\"\">#include&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">stdio.h</span><span class=\"tag\">&gt;</span>&nbsp;&nbsp;</li><li class=\"alt\">#include&nbsp;\"mysql.h\"&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">int&nbsp;main&nbsp;(int&nbsp;argc,&nbsp;char&nbsp;*argv[])&nbsp;&nbsp;</li><li class=\"\">{&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;*conn_ptr;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">conn_ptr</span>=<span class=\"attribute-value\">mysql_init</span>(NULL);&nbsp;//连接初始化&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!conn_ptr){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"mysql_init&nbsp;failed\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_FAILURE;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">conn_ptr</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_real_connect</span>(conn_ptr,&nbsp;\"localhost\",&nbsp;\"moldao\",\"newpassword\",\"moldao_test\",&nbsp;0,&nbsp;NULL,&nbsp;0);&nbsp;//建立实际连接&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//参数分别为：初始化的连接句柄指针，主机名（或者IP），用户名，密码，数据库名，0，NULL，0）后面三个参数在默认安装mysql<span class=\"tag\">&gt;</span>的情况下不用改&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(conn_ptr){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Connection&nbsp;success\\n\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Connection&nbsp;failed\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(conn_ptr);&nbsp;//关闭连接&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_SUCCESS;&nbsp;&nbsp;</li><li class=\"alt\">}&nbsp;&nbsp;</li></ol></div><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(51, 51, 51); font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS';\">&nbsp; &nbsp; 然后编译：</span><span style=\"color: rgb(51, 51, 51); font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS';\">&nbsp; &nbsp;&nbsp;</span></p><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">＃gcc&nbsp;-I/usr/include/mysql&nbsp;connect1.c&nbsp;-lmysqlclient&nbsp;-o&nbsp;connect1&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp;connect1.c:4:19: 错误：mysql.h：没有那个文件或目录</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 提示是没有找到mysql.h，产生这个错误的原因是没有mysql.h文件，它在mysql-devel包中，需要安装这个包：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">sudo&nbsp;yum&nbsp;install&nbsp;mysql-devel&nbsp;-y&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 然后找一下：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">＃locate&nbsp;mysql.h&nbsp;&nbsp;</li><li class=\"\">/usr/include/mysql/mysql.h&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 这样就可以找到这个头文件了（-I的含义是在指定位置搜索头文件，参见man gcc）。再次尝试编译：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">＃&nbsp;gcc&nbsp;-I/usr/include/mysql&nbsp;connect1.c&nbsp;-lmysqlclient&nbsp;-o&nbsp;connect1&nbsp;&nbsp;</li><li class=\"\">/usr/bin/ld:&nbsp;cannot&nbsp;find&nbsp;-lmysqlclient&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp;collect2: ld 返回 1</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 链接库有问题，找不到mysqlclient链接库，man gcc发现可以在后面用-L指定搜索位置，于是我们先找到mysqlclient库的位置：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">locate&nbsp;*mysqlclient*&nbsp;&nbsp;</li><li class=\"\">/usr/lib/mysql/libmysqlclient.a&nbsp;&nbsp;</li><li class=\"alt\">/usr/lib/mysql/libmysqlclient.so&nbsp;&nbsp;</li><li class=\"\">/usr/lib/mysql/libmysqlclient.so.15&nbsp;&nbsp;</li><li class=\"alt\">/usr/lib/mysql/libmysqlclient.so.15.0.0&nbsp;&nbsp;</li><li class=\"\">/usr/lib/mysql/libmysqlclient_r.a&nbsp;&nbsp;</li><li class=\"alt\">/usr/lib/mysql/libmysqlclient_r.so&nbsp;&nbsp;</li><li class=\"\">/usr/lib/mysql/libmysqlclient_r.so.15&nbsp;&nbsp;</li><li class=\"alt\">/usr/lib/mysql/libmysqlclient_r.so.15.0.0&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 这样找到位置就可以编译了：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">gcc&nbsp;-I/usr/include/mysql&nbsp;connect1.c&nbsp;-lmysqlclient&nbsp;-L/usr/lib/mysql&nbsp;-o&nbsp;connect1&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 编译成功，于是就可以运行了，在此之前，确保mysqld已经在运行了：&nbsp; &nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">sudo&nbsp;/etc/rc.d/init.d/mysqld&nbsp;restart&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 然后执行生成的可执行文件:&nbsp; &nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">./connect1&nbsp;&nbsp;</li><li class=\"\">&nbsp;Connection&nbsp;success&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 打印出了我们设计好了的连接成功的打印信息。这样就通过C语言进入了MySQL数据库了。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">2. 操作数据库 &nbsp;&nbsp;</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp; 进入数据库中之后，就可以开始对数据库进行读写操作了。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 数据库的主要操作包括select, insert, update, delete四种。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">a）sql语句的嵌入：</strong><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 执行SQL语句的主要API函数是：&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">int&nbsp;mysql_query(MYSQL&nbsp;*connection,&nbsp;const&nbsp;char&nbsp;*&nbsp;query)&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; &nbsp; &nbsp; 接受已经建立的连接结构指针和文本字符串形式的有效SQL语句（句末不用分号）。成功返回0。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 还有一个比较重要的函数，mysql_affected_rows(),他返回无符号类型，当使用printf时，推荐使用%lu格式将其转换为无符号长 整型。此函数返回受之前执行的update,delete,insert等查询影响的行数。&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">my_ulonglong&nbsp;mysql_affected_rows(MYSQL&nbsp;*connection)；&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; &nbsp; &nbsp; MySQL返回被一个更新操作修改的行数，但其他许多数据库将仅仅因为记录匹配where字句而把它视为已经更新过。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 通常对于mysql_函数，返回值0表示没有行受到影响，正数则是实际的结果，一般表示受语句影响的行数。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">b）select语句的使用：</strong><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; select语句是SQL语句中使用最频繁的操作。 &nbsp;&nbsp;&nbsp;</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 一个完整的提取数据过程应该包含以下四个步骤：执行查询，提取数据，处理数据，清理。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 使用mysql_query来发送SQL语句，使用mysql_store_result或者mysql_use_result来提取数据。然后使用 mysql_fetch_row调用来处理数据，最后，使用mysql_free_result来释放查询占用的内存资源。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; mysql_use_result和mysql_store_result都是返回一个指向结果集结构（result set structure）的指针，如果失败则返回NULL。区别在于store将查询到的数据库中的结果直接放在这个结果集中，而use则不直接将最终数据库 的数据结果放在这个结果集中。store其实就是把数据直接读到本地内存中，因此它比较适合数据量较小的查询。use则类似于一种流的操作，并不是一次就 返回所有的结果。因此，对于这个结果集，必须反复调用mysql_fetch_row直到提取所有的数据。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 1）一次获取所有的数据：&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL_RES&nbsp;*mysql_store_result(MYSQL&nbsp;*connection);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 在成功调用mysql_query之后使用此函数，将立即保存在客户端中返回的所有数据，并将指向此结果集的指针返回。如果失败则返回NULL。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 成功之后，可以用mysql_num_rows来得到返回记录的数目，一般应该是个正数，若没有返回行匹配，则返回0.&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">my_ulonglong&nbsp;mysql_num_rows(MYSQL_RES&nbsp;*result);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 现在得到来数据，可使用mysql_fetch_row来处理它，也可以使用mysql_data_seek,mysql_row_seek和mysql_row_tell在数据集中来回移动。&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL_ROW&nbsp;mysql_fetch_row(MYSQL_RES&nbsp;*result);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 此函数从上面得到的结果集中提取一行，并把它放在一个行结构中。当数据用完或者出错时返回NULL。&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">void&nbsp;mysql_data_seek(MYSQL_RES&nbsp;*result,&nbsp;my_ulonglong&nbsp;offset);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 此函数允许结构集当前指针的跳转，设置会被下一个mysql_fetch_row操作返回的行。offset是行号，在0到总行数减1的范围内。传递0，则返回初始位置。&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL_ROW_OFFSET&nbsp;mysql_row_tell(MYSQL_RES&nbsp;*result);&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp; 此函数返回结果集的当前位置。不能把它用于mysql_data_seek。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 完成来对数据的所有操作之后，必须调用mysql_free_result来让MYSQL数据库完成善后处理。&nbsp; &nbsp;&nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">void&nbsp;mysql_free_result(MYSQL_RES&nbsp;*result);&nbsp;&nbsp;</li></ol></div><p style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(51, 51, 51); font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS';\">使用范例:</span></p><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 12px;\"><span style=\"font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\"></span></span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL&nbsp;my_connection;&nbsp;&nbsp;</li><li class=\"\">MYSQL_RES&nbsp;*res_ptr;&nbsp;&nbsp;</li><li class=\"alt\">MYSQL_ROW&nbsp;sqlrow;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;mysql_init(&amp;my_connection);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;if(mysql_real_connect(&amp;my_connection,&nbsp;\"localhost\",&nbsp;\"moldao\",\"password\",\"moldao_test\",&nbsp;0,&nbsp;NULL,&nbsp;0)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Connection&nbsp;success\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">res</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_query</span>(&amp;my_connection,&nbsp;\"select&nbsp;*&nbsp;from&nbsp;children&nbsp;where&nbsp;age&nbsp;<span class=\"tag\">&lt;</span>&nbsp;<span class=\"tag-name\">10</span>\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(res){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"select&nbsp;error:&nbsp;%s\\n\",&nbsp;mysql_error(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">res_ptr</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_store_result</span>(&amp;my_connection);&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(res_ptr){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Retrieved&nbsp;%lu&nbsp;rows\\n\",&nbsp;(unsigned&nbsp;long)mysql_num_rows&nbsp;(res_ptr));&nbsp;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<span class=\"attribute\">sqlrow</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_fetch_row</span>(res_ptr)){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;field_count;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">field_count</span>&nbsp;=<span class=\"attribute-value\">0</span>;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(field_count&nbsp;<span class=\"tag\">&lt;</span>&nbsp;<span class=\"tag-name\">mysql_field_count</span>(&amp;my_connection)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"%s&nbsp;\",&nbsp;sqlrow[field_count]);field_count++;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mysql_errno(&amp;my_connection)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Retrive&nbsp;error&nbsp;:&nbsp;%s\\n\",&nbsp;mysql_error(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_free_result(res_ptr);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;mysql_close(&amp;my_connection);&nbsp;&nbsp;</li></ol></div><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; 2）一次提取一行数据</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">&nbsp;&nbsp;&nbsp; 建议使用这种提取数据的方式。它能取得更好的网络负载平衡，以及减少大数据集可能造成的存储过载。但是它也增加来时延，并且在特殊的情况下，比如网络链接在操作中途失败时，可能会得到不完整的数据甚至造成混乱。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">&nbsp;&nbsp; 此时依靠mysql_use_result：</span><span style=\"font-size: 14px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">&nbsp; &nbsp;</span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">MYSQL_RES&nbsp;*mysql_use_result（MYSQL&nbsp;*&nbsp;connection）;&nbsp;&nbsp;</li></ol></div><span style=\"font-size: 14px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">&nbsp; &nbsp; 与store一样，出错返回NULL，成功则返回指向结果集对象的指针。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 12px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">使用范例:<br></span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">//这里只写取数据的部分&nbsp;&nbsp;</li><li class=\"\"><span class=\"attribute\">res_ptr</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_store_result</span>(&amp;my_connection);&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;if(res_ptr){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<span class=\"attribute\">sqlrow</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_fetch_row</span>(res_ptr)){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//display_row_or_dealwith_row_here;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">c)update,insert,和delete语句的使用</strong><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp; update, insert和delete这三个操作是不用返回任何数据的语句，他们都是使用mysql_query来执行语句。 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 12px; font-family: Tahoma, Arial, 宋体, 新宋体, 'Comic Sans MS'; color: rgb(51, 51, 51);\">使用范例:<br></span><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">int&nbsp;<span class=\"attribute\">res</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_query</span>(&amp;my_connection,&nbsp;\"SQL语句\");&nbsp;&nbsp;</li><li class=\"\">if(!res){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"operation&nbsp;success\\naffected&nbsp;%lu&nbsp;rows\\n\",&nbsp;(unsigned&nbsp;long)mysql_affected_row&nbsp;(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"\">}&nbsp;&nbsp;</li><li class=\"alt\">else{&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"failed&nbsp;error:&nbsp;%d:&nbsp;%s\",&nbsp;mysql_errno(&amp;my_connection),&nbsp;mysql_error(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"alt\">}&nbsp;&nbsp;</li></ol></div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp; &nbsp;注意的是mysql_affected_row返回的是真正受到影响或者说是被改变的行数，而不仅仅是匹配where字句的行数。</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">3. 一个完整的显示数据库中元数据和数据的例子：</span><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"dp-highlighter bg_html\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div class=\"bar\"><div class=\"tools\"><b>[html]</b>&nbsp;<a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"ViewSource\" title=\"view plain\">view plain</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"CopyToClipboard\" title=\"copy\">copy</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"PrintSource\" title=\"print\">print</a><a href=\"http://blog.csdn.net/Andy_YF/article/details/7487307#\" class=\"About\" title=\"?\">?</a></div></div><ol class=\"dp-xml\" start=\"1\"><li class=\"alt\">#include&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">stdlib.h</span><span class=\"tag\">&gt;</span>&nbsp;&nbsp;</li><li class=\"\">#include&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">stdio.h</span><span class=\"tag\">&gt;</span>&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">#include&nbsp;\"mysql.h\"&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">MYSQL&nbsp;my_connection;&nbsp;&nbsp;</li><li class=\"alt\">MYSQL_RES&nbsp;*res_ptr;&nbsp;&nbsp;</li><li class=\"\">MYSQL_ROW&nbsp;sqlrow;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">void&nbsp;display_header();&nbsp;&nbsp;</li><li class=\"alt\">void&nbsp;display_row();&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">int&nbsp;main&nbsp;(int&nbsp;argc,&nbsp;char&nbsp;*argv[])&nbsp;&nbsp;</li><li class=\"\">{&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;<span class=\"attribute\">first_row</span>&nbsp;=<span class=\"attribute-value\">1</span>;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;res;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_init(&amp;my_connection);&nbsp;//连接初始化&nbsp;&nbsp;</li><li class=\"\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!conn_ptr){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"mysql_init&nbsp;failed\\n\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_FAILURE;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">*/&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mysql_real_connect(&amp;my_connection,&nbsp;\"localhost\",&nbsp;\"moldao\",\"savage\",\"moldao_test\",&nbsp;0,&nbsp;NULL,&nbsp;0)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Connection&nbsp;success\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">res</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_query</span>(&amp;my_connection,&nbsp;\"select&nbsp;*&nbsp;from&nbsp;children&nbsp;where&nbsp;age&nbsp;<span class=\"tag\">&gt;</span>&nbsp;4\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(res){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"Select&nbsp;error&nbsp;:&nbsp;%s\\n\",&nbsp;mysql_error(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else{&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">res_ptr</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_use_result</span>(&amp;my_connection);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(res_ptr){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_header();&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while((<span class=\"attribute\">sqlrow</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_fetch_row</span>(res_ptr))){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(first_row){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_header();&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">first_row</span>&nbsp;=&nbsp;<span class=\"attribute-value\">0</span>;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_row();&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mysql_errno(&amp;my_connection)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"Retrive&nbsp;error:&nbsp;%s\\n\",&nbsp;mysql_error(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_free_result(res_ptr);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(&amp;my_connection);&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,\"Connection&nbsp;failed\\n\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mysql_errno(&amp;my_connection)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;\"Connection&nbsp;error&nbsp;%d:&nbsp;%s\\n\",&nbsp;mysql_errno(&amp;my_connection),&nbsp;mysql_error&nbsp;(&amp;my_connection));&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_SUCCESS;&nbsp;&nbsp;</li><li class=\"alt\">}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">void&nbsp;display_header(){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_FIELD&nbsp;*field_ptr;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Column&nbsp;details:&nbsp;\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while((<span class=\"attribute\">field_ptr</span>&nbsp;=&nbsp;<span class=\"attribute-value\">mysql_fetch_field</span>(res_ptr))!=&nbsp;NULL){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\t&nbsp;Name:&nbsp;%s\\n\",&nbsp;field_ptr-<span class=\"tag\">&gt;</span>name);&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\t&nbsp;Type:&nbsp;\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(IS_NUM(field_ptr-<span class=\"tag\">&gt;</span>type)){&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Numeric&nbsp;field\\n\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(field_ptr-<span class=\"tag\">&gt;</span>type){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;FIELD_TYPE_VAR_STRING:&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"VARCHAR\\n\");break;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;FIELD_TYPE_LONG:&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"LONG\\n\");break;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"Type&nbsp;is&nbsp;%d,&nbsp;check&nbsp;in&nbsp;mysql_com.h\\n\",&nbsp;field_ptr-<span class=\"tag\">&gt;</span>type);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\t&nbsp;Max&nbsp;width&nbsp;%ld\\n\",&nbsp;field_ptr&nbsp;-<span class=\"tag\">&gt;</span>length);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(field_ptr-<span class=\"tag\">&gt;</span>flags&nbsp;&amp;&nbsp;AUTO_INCREMENT_FLAG)&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\t&nbsp;Auto&nbsp;increment\\n\");&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\n\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">}&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">void&nbsp;display_row(){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;field_count;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">field_count</span>&nbsp;=&nbsp;<span class=\"attribute-value\">0</span>;&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(field_count&nbsp;<span class=\"tag\">&lt;</span>&nbsp;<span class=\"tag-name\">mysql_field_count</span>(&amp;my_connection)){&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sqlrow[field_count])&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"%s&nbsp;\",&nbsp;sqlrow[field_count]);&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;printf(\"NULL\");&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field_count++;&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;</li><li class=\"alt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li><li class=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(\"\\n\");&nbsp;&nbsp;</li><li class=\"alt\">}&nbsp;</li></ol></div>"
    }
  ]
}
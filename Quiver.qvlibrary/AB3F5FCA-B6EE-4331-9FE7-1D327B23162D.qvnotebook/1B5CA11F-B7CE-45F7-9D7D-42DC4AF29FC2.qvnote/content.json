{
  "title": "linux中某个端口拒绝远程主机连接原因及解决方法",
  "cells": [
    {
      "type": "text",
      "data": "<span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">&nbsp;</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; font-family: 微软雅黑; font-size: 14px; line-height: 21px; background-color: rgb(146, 208, 80);\">问题描述：</span><span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\">比如在本机telent到<span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">192.168.8.170 主机的9000<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">&nbsp;端口，被拒绝。</span></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">[<a target=\"_blank\" href=\"mailto:zhu@hadoop\" style=\"box-sizing: border-box; color: rgb(202, 12, 22); text-decoration: none; margin: 0px; padding: 0px; outline: none; background-position: initial initial; background-repeat: initial initial;\">zhu@hadoop</a>&nbsp;log]$ telnet 192.168.8.170 9000&nbsp;<br style=\"box-sizing: border-box;\">Trying 192.168.8.170...&nbsp;<br style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(255, 0, 0);\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(255, 255, 255);\"></span></span></div></div><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); color: rgb(255, 0, 0); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\">telnet: connect to address 192.168.8.170: Connection refused&nbsp;</span><span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\"><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"></div></div><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; font-family: 微软雅黑; font-size: 14px; line-height: 21px; background-color: rgb(146, 208, 80);\">原因：原因有两个</span><span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\"><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><ul style=\"box-sizing: border-box; margin: 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"box-sizing: border-box; margin: 0px 0px 0px 40px; padding: 0px; list-style: disc;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">一个是被防火墙拦截</span></li><li style=\"box-sizing: border-box; margin: 0px 0px 0px 40px; padding: 0px; list-style: disc;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">或者该端口的监听地址为本机(127.0.0.1)，如果这样的话，只有从本机发起的对端口的访问被允许，而外部主机访问被拒绝。可以通过“<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(112, 48, 160);\">netstat -anp | grep 9000</span></span></span>”命令查看该端口的监听地址：</span></li></ul></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">&nbsp; &nbsp; &nbsp;&nbsp;<span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">&nbsp;<span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">[</span><a target=\"_blank\" href=\"mailto:zhu@hadoop\" style=\"box-sizing: border-box; color: rgb(202, 12, 22); text-decoration: none; margin: 0px; padding: 0px; outline: none; line-height: 1.5; background-position: initial initial; background-repeat: initial initial;\">zhu@hadoop</a><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">&nbsp;log]$ netstat -anp | grep 9000&nbsp;</span></span></div></div><blockquote style=\"box-sizing: border-box; padding-right: 0px; padding-left: 0px; margin-left: 40px; border: none; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\"><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">(Not all processes could be identified, non-owned process info</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">will not be shown, you would have to be root to see it all.)</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:9000 :::* LISTEN 6614/java</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:46722 ::ffff:127.0.0.1:9000 TIME_WAIT -</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:46729 ::ffff:127.0.0.1:9000 TIME_WAIT -</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:46723 ::ffff:127.0.0.1:9000 ESTABLISHED 6733/java</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:46726 ::ffff:127.0.0.1:9000 TIME_WAIT -</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:46730 ::ffff:127.0.0.1:9000 ESTABLISHED 6976/java</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:9000 ::ffff:127.0.0.1:46730 ESTABLISHED 6614/java</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\">tcp 0 0 ::ffff:127.0.0.1:9000 ::ffff:127.0.0.1:46723 ESTABLISHED 6614/java</span></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; background-color: rgb(238, 236, 225);\"></span></div></blockquote><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\">有上图可知，9000端口监听的地址为本地地址（127.0.0.1）</span><span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\"><br style=\"box-sizing: border-box;\"></div><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; font-family: 微软雅黑; font-size: 14px; line-height: 21px; background-color: rgb(146, 208, 80);\">解决方法：</span><span style=\"color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></span><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\"><ul style=\"box-sizing: border-box; margin: 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"box-sizing: border-box; margin: 0px 0px 0px 40px; padding: 0px; list-style: disc;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">如果防火墙过滤了访问该端口的请求则设置过滤规则，放行该端口或者关闭防火墙</span></li><li style=\"box-sizing: border-box; margin: 0px 0px 0px 40px; padding: 0px; list-style: disc;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; line-height: 1.5;\">如果监听地址为本机地址则修改其监听地址为真是ip地址（如192.168.8.119）。</span></li></ul></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-family: 微软雅黑; font-size: 14px; line-height: 21px;\">比如在hadoop中，可以更改本机地址（eg：localhost——&gt;hadoop）,然后在/etc/hosts配置文件中加入主机hadoop和ip 192.168.8.119的映射关系，然后修改core-site.xml中fs.default.name的值为\"<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">hdfs://hadoop:9000</span>\"。</div><br style=\"box-sizing: border-box; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p>"
    }
  ]
}
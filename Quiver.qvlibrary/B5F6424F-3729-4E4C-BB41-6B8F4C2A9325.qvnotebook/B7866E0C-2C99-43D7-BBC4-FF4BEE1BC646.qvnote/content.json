{
  "title": "在CentOS或Fedora上运行Docker容器的方法与步骤",
  "cells": [
    {
      "type": "text",
      "data": "<div><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">来源：互联网</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">作者：佚名</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">时间：10-15 17:56:11</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">【</span><a style=\"font-family: Arial; font-size: 14px;\">大</a><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><a style=\"font-family: Arial; font-size: 14px;\">中</a><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">&nbsp;</span><a style=\"font-family: Arial; font-size: 14px;\">小</a><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\">】</span><br></div><div><div id=\"content\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div id=\"art_desc\">最近，炙手可热Docker已俨然成为将应用程序部署到云环境的一种关键技术，在本教程中，我将介绍如何在CentOS或Fedora上创建和管理Docker容器，需要的朋友可以参考一下</div><div id=\"con_all\"></div><p>最近，炙手可热Docker已俨然成为将应用程序部署到云环境的一种关键技术。相比传统的硬件虚拟化技术，基于 Docker的容器沙箱为应用程序部署环境提供了许多优点，比如轻型隔离、部署的应用程序便于移植、易于维护等。现在，红帽公司正在引领开源社区，竭力简 化管理和部署Docker容器的任务。</p><div class=\"content bgF8F8F8 f14\"><div id=\"content\"><p>Docker不仅仅适用于云环境，它对最终用户来说也相当有用，如果你想在特定的Linux环境下测试某一款软件，更是如此。你可以为目标环境轻松 构建Docker容器，在里面安装和测试软件，然后一旦完成工作，就可以扔掉这个容器。从头到尾的整个过程相当高效而便捷，可以始终避免把你的终端系统弄 得乱七八糟。</p><p>在本教程中，我将介绍如何在CentOS或Fedora上创建和管理Docker容器。请注意：眼下Docker只在64位主机系统上得到支持。如 果你想在Ubuntu上试一试Docker，请参阅这篇教程：http://xmodulo.com/manage-linux-containers- docker-ubuntu.html</p><p><strong>将Docker安装到CentOS或Fedora上</strong></p><p>要将Docker安装到CentOS上，首先启用EPEL软件库，然后使用yum命令：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___0nbsp;sudo&nbsp;yum&nbsp;install&nbsp;docker-io &nbsp;___FCKpd___0nbsp;sudo&nbsp;service&nbsp;docker&nbsp;start &nbsp;</li><li class=\"alt\">___FCKpd___0nbsp;sudo&nbsp;chkconfig&nbsp;docker&nbsp;on&nbsp;&nbsp;</li></ol></pre><p>要将Docker安装到Fedora上，使用下面这些命令：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___1nbsp;sudo&nbsp;yum&nbsp;install&nbsp;docker-io &nbsp;___FCKpd___1nbsp;sudo&nbsp;systemctl&nbsp;start&nbsp;docker.service &nbsp;</li><li class=\"alt\">___FCKpd___1nbsp;sudo&nbsp;systemctl&nbsp;enable&nbsp;docker.service&nbsp;&nbsp;</li></ol></pre><p><span style=\"color: rgb(255, 0, 0);\">将Docker安装到CentOS或Fedora上后，你需要将自己添加到docker群组，那样才能以非root用户的身份来运行Docker。为此，使用这个命令：</span></p><pre><ol class=\"dp-xml\"><li class=\"alt\"><span style=\"color: rgb(255, 0, 0);\">___FCKpd___2nbsp;sudo&nbsp;usermod&nbsp;-a&nbsp;-G&nbsp;docker&nbsp;$USER&nbsp;&nbsp;</span></li></ol></pre><p><span style=\"color: rgb(0, 255, 0);\">退出，重新登录，以激活群组变更。</span></p><p>至此，你应该能够以非特权用户的身份来运行docker命令了。</p><p><strong>Docker的基本用法</strong></p><p>你想启动一个新的Docker容器，就需要确定为容器使用哪个Docker映像。你可以搜索官方的Docker映像索引 （https://index.docker.io），上面列出了公开可用的Docker映像。Docker索引包括：Docker团队管理的Linux 基本映像（比如Ubuntu、Debian、Fedora和 CentOS），以及用户贡献的自定义映像（比如MySQL、Redis和WordPress）。</p><p>比如说，想在交互模式开启动一个Ubuntu容器，就要运行下面这个命令。容器一启动，最后的变量“/bin/bash”就在容器里面执行。</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___3nbsp;docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;ubuntu&nbsp;/bin/bash&nbsp;&nbsp;</li></ol></pre><p>你头一次运行上面这个命令时，它会通过网络下载可用的一个或多个Ubuntu docker映像，然后使用该映像，启动Docker容器。Ubuntu容器会立马启动，你会看到容器里面的控制台提示符。你可以访问容器沙箱里面的功能完备的Ubuntu操作系统。</p><p><img alt=\"\" src=\"quiver-image-url/49B10FA60D4BFFC2EA388DE2532D8C39.jpg\" width=\"640\" height=\"598\"></p><p>如果你在提示符处键入“exit”，就会退出容器，容器会被停止。</p><p>想列出所有的容器（包括已停止的容器），运行这个命令：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___4nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;ps&nbsp;-a&nbsp;&nbsp;</span></li></ol></pre><pre><ol class=\"dp-xml\"><li class=\"alt\">CONTAINER&nbsp;ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PORTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAMES &nbsp;6a08a0b2bb4c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ubuntu:14.04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/bin/bash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;About&nbsp;a&nbsp;minute&nbsp;ago&nbsp;&nbsp;&nbsp;Exit&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cocky_ritchie&nbsp;</li></ol></pre><p>想在守护进程模式下重新启动某个已停止的容器：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___6nbsp<span style=\"color: rgb(255, 0, 0);\">;docker&nbsp;start&nbsp;[container-id]&nbsp;&nbsp;</span></li></ol></pre><p>想移除某个已停止的容器：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___7nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;rm&nbsp;[container-id]&nbsp;</span></li></ol></pre><p>想连接到后台运行的容器，以便查看容器或与之交互：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___8nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;attach&nbsp;[container-id]&nbsp;</span></li></ol></pre><p><img alt=\"\" src=\"quiver-image-url/340495A6C49AC81D2D6529A21549F936.jpg\" width=\"640\" height=\"384\"></p><p>你可以随意定制某个运行中的容器（比如安装新软件）。如果你想把变更内容保存在当前容器中，先要在提示符处键入“exit”，退出容器的交互模式。然后使用这个命令，将已变更的映像保存为不同的映像：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___9nbsp;docker&nbsp;commit&nbsp;[container-id]&nbsp;[new-image-name]&nbsp;</li></ol></pre><p>想获得你容器的容器ID，可以使用之前描述的“docker ps –a”命令。</p><p><img alt=\"\" src=\"quiver-image-url/7128F48B6E5A760A1FEA4A9D73945DCA.jpg\" width=\"640\" height=\"460\"></p><p>一旦你已构建了像这样的新映像，就可以借助该映像启动一个新的容器了。</p><p>你还可以下载任何公开的容器映像（比如ubuntu，bowery/mysql），将它们保存到本地软件库中，如下所示。</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___10nbsp;docker&nbsp;pull&nbsp;[image&nbsp;name]&nbsp;</li></ol></pre><p>想查看所有本地下载/保存的容器映像：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___11nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;images&nbsp;</span></li></ol></pre><p>你可以选择从哪个特定的映像来启动容器：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___12nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;run&nbsp;-i&nbsp;-t&nbsp;[image-id]&nbsp;/bin/bash&nbsp;&nbsp;</span></li></ol></pre><p><img alt=\"\" src=\"quiver-image-url/0E192A0E94A204B048490C50836F0FD8.jpg\" width=\"640\" height=\"506\"></p><p>想从本地软件库移除某个容器映像：</p><pre><ol class=\"dp-xml\"><li class=\"alt\">___FCKpd___13nbsp;<span style=\"color: rgb(255, 0, 0);\">docker&nbsp;rmi&nbsp;[image-id]&nbsp;</span></li></ol></pre><p><img alt=\"\" src=\"quiver-image-url/2B16F31943747FB189518FC0B50C32C7.jpg\" width=\"640\" height=\"371\"></p><p>英文：<a target=\"_blank\" href=\"http://xmodulo.com/docker-containers-centos-fedora.html\">http://xmodulo.com/docker-containers-centos-fedora.html</a></p></div></div></div></div>"
    }
  ]
}
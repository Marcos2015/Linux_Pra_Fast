{
  "title": "解决安装Parallels Desktop 6后在系统中出现奇怪的vnic网卡的情况",
  "cells": [
    {
      "type": "text",
      "data": "<font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">前些日子遇到一个情况：</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">&nbsp; &nbsp; 安装了Parallels Desktop 6之后，给虚拟机的windows上共享过网卡，并且在windows里面的网卡上设置了固定IP。</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">&nbsp; &nbsp; 等我将这个windows上的虚拟ip去掉之后，很不幸的事情发生了。虽然这个虚拟ip在PD中已经消除，但是只要在Mac OS上的终端敲入ifconfig就能看见之前虚拟的那个ip还在，并且还多出了一个我没有设置过的ip地址，猜测这个ip应该是用来和虚拟机内部的网卡进行交换的。例子如下：</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><br style=\"word-wrap: break-word;\"><br style=\"word-wrap: break-word;\">MacBook-Air:~ test$ ifconfig<br style=\"word-wrap: break-word;\">lo0: flags=8049&amp;lt;UP,LOOPBACK,RUNNING,MULTICAST&amp;gt; mtu 16384<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; options=3&amp;lt;RXCSUM,TXCSUM&amp;gt;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fe80::10 prefixlen 64 scopeid 0x1&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet 127.0.0.1 netmask 0xff000000&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 ::1 prefixlen 128&nbsp;<br style=\"word-wrap: break-word;\">gif0: flags=8010&amp;lt;POINTOPOINT,MULTICAST&amp;gt; mtu 1280<br style=\"word-wrap: break-word;\">stf0: flags=0&amp;lt;&amp;gt; mtu 1280<br style=\"word-wrap: break-word;\">en0: flags=8863&amp;lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&amp;gt; mtu 1500<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; ether 60:c5:47:00:ca:da&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fe80::62c5:47ff:fe00:cada0 prefixlen 64 scopeid 0x4&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet 192.168.0.14 netmask 0xffffff00 broadcast 192.168.0.255<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; media: autoselect<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; status: active<br style=\"word-wrap: break-word;\">p2p0: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; mtu 2304<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; ether 02:c5:47:00:ca:da&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; media: autoselect<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; status: inactive<br style=\"word-wrap: break-word;\">vnic0: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; mtu 1500<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; options=3&amp;lt;RXCSUM,TXCSUM&amp;gt;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; ether 00:1c:42:00:00:08&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet 10.211.55.2 netmask 0xffffff00 broadcast 10.211.55.255<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fe80::21c:42ff:fe00:8ic0 prefixlen 64 scopeid 0x6&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fec0:0:0:fea9::2 prefixlen 64&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; media: autoselect<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; status: active<br style=\"word-wrap: break-word;\">vnic1: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; mtu 1500<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; options=3&amp;lt;RXCSUM,TXCSUM&amp;gt;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; ether 00:1c:42:00:00:09&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet 10.37.129.2 netmask 0xffffff00 broadcast 10.37.129.255<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fe80::21c:42ff:fe00:9ic1 prefixlen 64 scopeid 0x7&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fec0:0:0:feaa::2 prefixlen 64&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; media: autoselect<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; status: active<br style=\"word-wrap: break-word;\">en2: flags=8863&amp;lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&amp;gt; mtu 1500<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; ether 00:80:c9:00:03:ec&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet6 fe80::280:c9ff:fe00:3ec2 prefixlen 64 scopeid 0x8&nbsp;<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; inet 192.168.0.26 netmask 0xffffff00 broadcast 192.168.0.255<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; media: autoselect (1000baseT &amp;lt;full-duplex,flow-control&amp;gt;)<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; status: active<br style=\"word-wrap: break-word;\">MacBook-Air:~ test$&nbsp;<br style=\"word-wrap: break-word;\"></font><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><br style=\"word-wrap: break-word;\"></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">可以看出已经除了eth0和en2之外还多出了vnic0与vnic1这两个网卡。这个可能在个人家里没有关系，但是如果连入企业内网的话就会被IT查出有非DNS指定的ip出现。这时候就要将这两个虚拟网卡删掉。</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><br style=\"word-wrap: break-word;\"></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">查了查，发现在PD的论坛上已经有工程师回答了这个解决办法（<a href=\"http://forum.parallels.com/showthread.php?t=99408\" target=\"_blank\" style=\"word-wrap: break-word; color: rgb(51, 102, 153);\">解决方法原文</a>(<a href=\"https://forum.parallels.com/threads/how-to-create-or-modify-vnic.99408/\">https://forum.parallels.com/threads/how-to-create-or-modify-vnic.99408/</a>)），这里大致说一下：</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">首先启动终端，在这里：<font face=\"verdana,\" style=\"word-wrap: break-word;\">&nbsp;/Application/Utilities/Terminal</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font face=\"arial\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word;\">在进行之后操作的时候一定要在虚拟机停止的情况下进行了。</font></font><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">（以下部分涉及到类unix中的命令行编辑器vim的使用，对于这个不太熟悉的可以寻找相应的图形工具来进行编辑修改。）</font><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><br style=\"word-wrap: break-word;\"></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">1. sudo vim /Library/Preferences/Parallels/network.desktop.xml&nbsp; &nbsp; ＃命令行敲入前面的部分，意思是编辑这个文件，这时候需要你输入自己的mac用户密码来进行权限的确认。</font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\">2、在这个文件中找到如下的字段<font face=\"verdana,\" style=\"word-wrap: break-word;\">&amp;lt;Description&amp;gt;Shared Networking&amp;lt;/Description&amp;gt; 将这行下面那行中的 &amp;lt;Enabled&amp;gt;1&amp;lt;/Enabled&amp;gt; 改为</font><font face=\"verdana,\" style=\"word-wrap: break-word;\">&amp;lt;Enabled&amp;gt;0&amp;lt;/Enabled&amp;gt;。</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font face=\"verdana,\" style=\"word-wrap: break-word;\">3、接下来修改</font><font face=\"verdana,\" style=\"word-wrap: break-word;\">对这端&amp;lt;Description&amp;gt;Host Only Networking&amp;lt;/Description&amp;gt;进行同样的操作，</font><font face=\"verdana,\" style=\"word-wrap: break-word;\">将这行下面那行中的 &amp;lt;Enabled&amp;gt;1&amp;lt;/Enabled&amp;gt; 改为</font><font face=\"verdana,\" style=\"word-wrap: break-word;\">&amp;lt;Enabled&amp;gt;0&amp;lt;/Enabled&amp;gt;。</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font face=\"verdana,\" style=\"word-wrap: break-word;\">4、退出这个文件。</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font face=\"verdana,\" style=\"word-wrap: break-word;\">5、通过命令行重启PD的守护进程。</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word;\">&nbsp; &nbsp; sudo launchctl stop com.parallels.desktop.launchdaemon<br style=\"word-wrap: break-word;\">&nbsp; &nbsp; sudo launchctl start com.parallels.desktop.launchdaemon</font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word;\"><br style=\"word-wrap: break-word;\"></font></font><br style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font style=\"word-wrap: break-word; color: rgb(17, 17, 17); font-family: 微软雅黑, Arial, HELVETICA; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(254, 254, 254);\"><font size=\"2\" style=\"word-wrap: break-word;\">至此，问题解决。希望能帮到有遇到这个问题的朋友。</font></font>"
    }
  ]
}
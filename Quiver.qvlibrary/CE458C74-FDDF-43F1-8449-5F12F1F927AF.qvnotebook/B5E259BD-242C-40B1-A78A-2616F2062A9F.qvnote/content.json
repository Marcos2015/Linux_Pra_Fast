{
  "title": "CentOS7上用owncloud搭建私有云",
  "cells": [
    {
      "type": "text",
      "data": "<br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><a href=\"http://www.centoscn.com/CentosServer/www/2015/0421/5228.html#rd?sukey=39297060d6d3d5578126d157f67c5376187bfbf8734d68ad30568f4609e1ce8ce915292b51068013aa57d97f87de7425\" style=\"font-family: Arial; font-size: 14px;\">http://www.centoscn.com/CentosServer/www/2015/0421/5228.html#rd?sukey=39297060d6d3d5578126d157f67c5376187bfbf8734d68ad30568f4609e1ce8ce915292b51068013aa57d97f87de7425</a><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><br style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div id=\"isForwardContent\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><div style=\"line-height: 1.7; color: rgb(0, 0, 0);\">今天尝试了下在linux搭建私有云，百度了几个教程，只有一个是成功安装的，其实过程还蛮简单的，感觉功能和windows下的局域网共享差不多。<br>我系统用的是centos 7。<br>第一步、搭建LAMP<br>1、owncloud主要是由用php进行开发的，所以当然我们需要在linux上先搭建LAMP了，也就是linux+apache+mysql+php。（不得不说php和mysql是最合适的一对了...）<br>在shell下用下面语句即可一条语句安装全部：<br>[plain] view plaincopy<br>yum install httpd php php-mysqlmariadb-server mariadb sqlite php-dom php-mbstring php-gd php-pdo wget vim &nbsp;<br>2、然后设置SELinux允许owncloud写数据，SELinux 是 Linux中提供的强制访问控制(MAC）系统，当然如果你关闭了就不需要输入这条了，查看自己的linux有没有开启的方法是，sell输入 /usr/sbin/sestatus -v ，如果SELinux status参数为enabled即为开启状态。<br>[plain] view plaincopy<br>setsebool -P httpd_unified 1 &nbsp;<br><br>3、设置防火墙设置<br>[plain] view plaincopy<br>firewall-cmd --state //查看防火墙是已经开启 &nbsp;<br>firewall-cmd --permanent --zone=public--add-service=http //&nbsp; 配置防火墙在public区域永久开放http服务 &nbsp;<br>firewall-cmd --permanent --zone=public--add-service=https&nbsp; 配置防火墙在public区域永久开放https服务 &nbsp;<br>firewall-cmd --reload //防火墙策略配置后重新载入 &nbsp;<br>4、启动服务<br>[plain] view plaincopy<br>使用下面的命令启动Apache： &nbsp;<br>systemctl start httpd.service &nbsp;<br>通过此命令启动MariaDB： &nbsp;<br>systemctl start mariadb.service &nbsp;<br>自动启动的服务在系统启动： &nbsp;<br>systemctl enable httpd.service &nbsp;<br>systemctl enable mariadb.service &nbsp;<br><br>5、安装owncloud<br>我们需要从官方网站下载owncloud。运行以下命令（也可以下载其他版本）：<br>[plain] view plaincopy<br><a href=\"wgethttps://download.owncloud.org/community/owncloud-7.0.0.tar.bz2\">wgethttps://download.owncloud.org/community/owncloud-7.0.0.tar.bz2</a>&nbsp;&nbsp;<br>&nbsp;解压文件： &nbsp;<br>tar -jxvf owncloud-7.0.0.tar.bz2 -C/var/www/html/ &nbsp;<br>为Web服务器上文件目录设置读写权限： &nbsp;<br>chown -R apache.apache/var/www/html/owncloud/ &nbsp;<br><br><br>6、数据库配置<br>配置MariaDB实例：<br>mysql_secure_installation;<br>在设置过程这都输入Y并回车。<br>创建 owncloud 数据库和用户。<br>登录到MySQL服务器，使用以下命令:<br>mysql -u root -p<br>接下来，我们需要创建owncloud用户和权限:<br>[plain] view plaincopy<br>mysql&gt; create database owncloud; &nbsp;<br>mysql&gt; CREATE USER 'owncloud'@'localhost'IDENTIFIED BY 'owncloud'; &nbsp;<br>mysql&gt; grant all privileges onowncloud.* to 'owncloud'@localhost identified by 'ownclound'; &nbsp;<br>mysql&gt; flush privileges; &nbsp;<br>mysql&gt; quit; &nbsp;<br><br><br>如果要检查apache有没有安装，可以用命令检查apache的安装包是否安装上。<br># rpm -qa | grep httpd<br>&nbsp;如果想看安装的运行级别。<br># chkconfig --list httpd<br>&nbsp;如果想看有没有启动。<br># service httpd status<br>etc/httpd是apache的安装目录，<br>Apache服务器配置<br>打开你最喜爱的编辑器编辑　owncloud　外部配置文件，我用vim:<br>&nbsp;<br>vim /etc/httpd/conf.d/owncloud.conf<br>&nbsp;<br>在配置文件中添加以下行：<br>Alias /owncloud /var/www/html/owncloud<br>&nbsp;<br>&nbsp;<br>Options Indexes FollowSymLinks<br>AllowOverride All<br>Order allow,deny<br>allow from all<br>&nbsp;<br>启动Apache和MariaDB服务：<br>&nbsp;<br>systemctl start httpd.service<br>systemctl start mariadb.service<br>&nbsp;<br>owncloud配置<br>打开浏览器即可访问　<a href=\"http://xn--ip-0p3ck01akcu41v/owncloud\">http://你的ip地址/owncloud</a>（本机和局域网设备访问）或者localhost/owncloud(本机访问)它将显示初始owncloud设置页。<br>&nbsp;<br>如果发现有.htaccess设置不正确的提示，可以这样：<br>打开httpd.conf(在那里? APACHE目录的CONF目录里面),用vim打开后,查找<br>Options FollowSymLinks<br>AllowOverride None<br>改为<br>Options FollowSymLinks<br>AllowOverride All<br>&nbsp;<br>然后去掉下面的注释<br>LoadModule rewrite_modulemodules/mod_rewrite.so<br>&nbsp;<br>.htaccess可以更改上传文件大小，默认的是2M</div></div>"
    }
  ]
}
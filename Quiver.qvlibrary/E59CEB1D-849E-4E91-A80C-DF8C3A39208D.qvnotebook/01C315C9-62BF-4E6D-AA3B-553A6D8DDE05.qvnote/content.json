{
  "title": "如何假装成很懂互联网的样子，TCP/IP的故事",
  "cells": [
    {
      "type": "text",
      "data": "<div style=\"text-align: start;\"><span style=\"text-align: center; font-size: 14px;\"><font face=\"Arial\">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></span><span style=\"font-family: 'Microsoft YaHei', 宋体, 'Myriad Pro', Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; text-align: center;\">我们生活在这样一个时代：只要连上网络，就可以和他人交流，无论距离有多远；也可以网购商品，发誓剁手都无济于事；还可以点评正在发生的热点事件，像皇上批阅奏章一样日理万机。用我们这一行的表达方式，可以说现代人的生活是基于网络的。</span></div><div class=\"entry\" style=\"border: 0px; margin: 0px; padding: 0px 5px; font-size: 15px; color: rgb(46, 46, 46); line-height: 1.6; word-break: break-all; font-family: 'Microsoft YaHei', 宋体, 'Myriad Pro', Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;\"><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">网络的流行很大一部分要归功于Vinton Cerf和Robert Kahn这对老搭档。他们在70年代设计的TCP/IP协议奠定了网络的基石，也因此获得计算机界的最高荣誉——图灵奖。其实TCP/IP项目还不是这两位互联网之父的第一次合作。在此之前他们一起参与了阿帕网的开发。阿帕网是现代网络的前身。当时谁也没有想到，不久之后他们就会设计一套全新的协议来取代自己设计的阿帕网。</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><a href=\"http://jbcdn2.b0.upaiyun.com/2013/09/vinton-rogert.png\" rel=\"lightbox[47270]\" title=\"如何假装成很懂互联网的样子，TCP/IP的故事\" class=\"cboxElement\" style=\"border: 0px; margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 153, 204);\"><img class=\"aligncenter size-full wp-image-47271\" alt=\"vinton &amp; rogert\" src=\"quiver-image-url/1FA016DB94812756B1DBBCFF046CDE26.png\" style=\"border: 0px; margin: auto; padding: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center; display: block; clear: both;\" width=\"64\" height=\"40\"></a></p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; Robert为人低调，每次接受采访都一本正经。而Vinton热情外露，关于他的趣事很多。他的妻子是一位画家，他们第一次约会时去了艺术博物馆。技术男Vinton在一幅大型作品前伫立良久，最后冒出一句：“这画真像一只巨大的新鲜汉堡包”。在他们的婚礼上，录音机突然卡壳。Vinton终于发挥了特长，和伴郎一起到小房间修录音机了。互联网造福了世界，当然也包括Vinton自己的生活。因为夫妻俩都有听力缺陷，电子邮件就为他们带来不少便利。</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">现在人们说到TCP/IP时，指的已经不只是TCP和IP两个协议，而是包括了Application Layer、Transport Layer、Internet Layer和Network Access Layer的四层模型。TCP处于Transport Layer，而IP处于Internet Layer。鲜为人知的是，刚开始这两个协议并没有分层，而是结合在一起。计算机科学家Jon Postel对此批评说：</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">We are screwing up in our design of internet protocols by violating the principle of layering. Specifically we are trying to use TCP to do two things: serve as a host level end to end protocol, and to serve as an internet packaging and routing protocol. These two things should be provided in a layered and modular way. I suggest that a new distinct internetwork protocol is needed, and that TCP be used strictly as a host level end to end protocol.</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">（由于违背层级原理，我们设计的互联网协议已经一团糟。特别是我们试图使用TCP协议做下面二件事情：1、用作主机层级的端到端协议。2、用作网络包和路由协议。这二项服务应该通过层级和模块化的方式完成。我建议建立一个新的互联网网络协议，在这个协议中TCP层只用作主机层级的端到端服务。）</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">– Jon Postel, IEN 2, 1977</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">这个建议一年后被采纳了，第三版的协议决定把TCP和IP分离开来，并且延续至今。Jon的另一个身份是Vinton的高中同学。他在1998年去世时，Vinton为他写了一篇感人至深的讣告，并且作为RFC 2468发布。这对一位科学家来说也许是最有意义的纪念方式。我们今天还可以通过<a href=\"http://tools.ietf.org/html/rfc2468\" target=\"_blank\" style=\"border: 0px; margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 153, 204);\">http://tools.ietf.org/html/rfc2468</a>访问到它。</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">TCP/IP的设计堪称完美。三十年来底层的带宽、延时、还有介质都发生了翻天覆地的变化，顶层也多了很多应用，但TCP/IP却安如泰山。它不但战胜了国际标准化组织的OSI&nbsp;七层模型，而且目前还看不到被其他方案取代的可能。第一代从事TCP/IP工作的工程师，到了退休年龄也在做着朝阳产业。</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><a href=\"http://jbcdn2.b0.upaiyun.com/2013/09/OSI+vs.+TCP+IP+-+paddy.png\" rel=\"lightbox[47270]\" title=\"如何假装成很懂互联网的样子，TCP/IP的故事\" class=\"cboxElement\" style=\"border: 0px; margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 153, 204);\"><img class=\"aligncenter size-full wp-image-47272\" alt=\"OSI+vs.+TCP+IP+-+paddy\" src=\"quiver-image-url/1FA016DB94812756B1DBBCFF046CDE26.png\" style=\"border: 0px; margin: auto; padding: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center; display: block; clear: both;\" width=\"64\" height=\"40\"></a></p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">令人费解的是，现在的大学课程还在介绍早已淘汰的OSI七层模型。它和TCP/IP模型的对应关系如左图所示。因为层数太多，很多学生根本理解不了，甚至连排序都不会。老师就用“All People Seem To Need Data Processing”来帮助记忆，因为这七个单词的首字母和OSI模型每一层的首字母是一样的。大学的应试教育由此可见一斑。更奇怪的是学生们走出校园后，会发现这个笨重的七层模型早已不复存在。虽然它得到过官方的大力支持，但是市场明显更青睐轻盈的TCP/IP四层模型。</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">按理说OSI是权威组织，七层模型应该是科学的。为什么反而会不受欢迎呢？普度大学的特聘教授Douglas Comer在他的文章里这样说过：</p><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><a href=\"http://jbcdn2.b0.upaiyun.com/2013/09/OSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%B7%A5%E4%BD%9C%E5%B0%8F%E7%BB%84%E7%9A%84%E5%90%88%E5%BD%B1.png\" rel=\"lightbox[47270]\" title=\"如何假装成很懂互联网的样子，TCP/IP的故事\" class=\"cboxElement\" style=\"border: 0px; margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 153, 204);\"><img class=\"aligncenter size-full wp-image-47273\" alt=\"OSI七层模型工作小组的合影\" src=\"quiver-image-url/1FA016DB94812756B1DBBCFF046CDE26.png\" style=\"border: 0px; margin: auto; padding: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center; display: block; clear: both;\" width=\"64\" height=\"40\"></a></p><blockquote style=\"border-width: 0px 0px 0px 5px; border-left-color: rgb(238, 238, 238); margin-bottom: 10px; padding: 10px 20px; color: rgb(94, 94, 94);\"><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">“（研究人员）最近有了一些惊人的发现：我们都知道这个七层模型是一个小组完成的，但我们不知道的是，这个小组深夜在酒吧里谈论美国的娱乐八卦。后来他们把迪斯尼电影里7个小矮人的名字写在餐巾纸上，有个人开玩笑说7对于网络分层是个好数字。第二天上午在标准化委员会的会议上，他们传阅了那张餐巾纸，然后一致同意他们昨晚喝醉时的重大发现。那天结束时，他们又给七个层次重新起了听上去更科学的名字，于是模型就诞生了。</p><p style=\"border: 0px; margin: 0px; padding: 0px;\">（下表是Douglas对这个小组的极尽嘲讽，我翻译不出其中的神韵，所以干脆贴出原文。）</p></blockquote><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border: 1px solid rgb(232, 232, 232); margin-right: 0px; margin-bottom: 20px; margin-left: 0px; padding: 0px 5px; width: 599px;\"><tbody style=\"border: 0px; margin: 0px; padding: 0px;\"><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><strong style=\"border: 0px; margin: 0px; padding: 0px;\">Layer</strong></p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><strong style=\"border: 0px; margin: 0px; padding: 0px;\">Dwarf</strong></p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><strong style=\"border: 0px; margin: 0px; padding: 0px;\">Name</strong></p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\"><strong style=\"border: 0px; margin: 0px; padding: 0px;\">Explanations</strong></p></td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">1</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Sleepy</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Physical</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">The group new that physical connections are boring, and figured it might as well assign the physical layer to dwarf “Sleepy”. As it happens, a Layer 1 protocol specification does indeed put everyone to sleep (just try reading one late at night).</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">2</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Sneezy</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Link</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">If you monitor a network and watch the pattern of packets emitted by a computer, you’ll immediately understand the relationship between link-layer protocols and “Sneezy”.</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">3</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Happy</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Network</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">Everyone’s happy with the network layer. Well… to be honest, the only network layer protocol that makes everyone’s happy is the Internet Protocol. Unfortunately, the Internet protocol isn’t part of OSI, and wasn’t really built to follow the OSI model (the model didn’t include internetworking). But, the designers had good intentions.</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">4</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Doc</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Transport</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">This one’s obvious — it definitely takes a Ph.D. to understand the subtleties of a transport layer protocol.</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">5</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Dopey</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Session</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">Yep, even the designers realized that having a separate session layer is a dopey idea. They decided to follow Disney’s approach of adding comic relief, so they stuck in a completely unnecessary layer and laughed about it.</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">6</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Bashful</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Presentation</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">Another little joke. The designers realized that sooner or later someone would create a presentation layer protocol. However, the group decided to classify such protocols as too “bashful” to appear in public. So, even if a presentation protocol is produced, no one gets to see it.</td></tr><tr style=\"border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(232, 232, 232); margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"49\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">7</p></td><td valign=\"top\" width=\"66\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Grumpy</p></td><td valign=\"top\" width=\"102\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\"><p align=\"center\" style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Application</p></td><td valign=\"top\" width=\"421\" style=\"border: 0px; margin: 0px; padding: 5px; vertical-align: middle; text-align: center;\">Programmers who design network applications are incredibly grumpy — they complain about the efficiency of other layers, the fundamental abstractions of the network, the long hours, the difficulty of debugging, and the API they are forced to use. And users add to the grumpiness because users never complain about protocols at other layers; they only complain about applications.</td></tr></tbody></table><blockquote style=\"border-width: 0px 0px 0px 5px; border-left-color: rgb(238, 238, 238); margin-bottom: 10px; padding: 10px 20px; color: rgb(94, 94, 94);\"><p style=\"border: 0px; margin: 0px; padding: 0px;\"><span style=\"border: 0px; margin: 0px; padding: 0px; font-size: 20px; font-family: 'Noticia Text', Georgia, serif; font-style: italic; line-height: 32px;\">这个故事告诉我们：如果你是标准委员会中的工程师，不要和同事喝酒——深夜在酒吧里开的一个拙劣玩笑，却可能成为业界几十年挥之不去的噩梦。”</span></p></blockquote><p style=\"border: 0px; margin: 0px 0px 20px; padding: 0px;\">Douglas是网络界德高望重的前辈。他回到普度大学之前曾是Cisco的Vice President of Research，同时更是久负盛名的技术作家，所以我愿意相信他的说法。而业界普遍对待OSI模型的抵触态度，更是一个有力的佐证。幸好到了今天，OSI模型已经名存实亡了，它对人类的影响只停留在还没来得及更新的教科书上。</p></div>"
    }
  ]
}
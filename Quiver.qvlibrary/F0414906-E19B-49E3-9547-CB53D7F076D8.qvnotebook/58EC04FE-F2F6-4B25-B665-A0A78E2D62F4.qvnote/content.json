{
  "title": "get√ 关闭线程的正确姿势，实现“优雅”的中断",
  "cells": [
    {
      "type": "text",
      "data": "<blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); letter-spacing: 2px; background-color: rgb(255, 255, 255); font-size: 12px;\"><br class=\"Apple-interchange-newline\">链接：jianshu.com/p/613286f4245e</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); letter-spacing: 2px; background-color: rgb(255, 255, 255); font-size: 12px;\">来源：简书<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">著作权归作者所有，已授权原创，禁止私自转载</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">线程在启动之后，正常的情况下会运行到任务完成，但是有的情况下会需要提前结束任务，如用户取消操作等。可是，让线程安全、快速和可靠地停止并不是件容易的事情，因为Java中没有提供安全的机制来终止线程。虽然有 Thread.stop/suspend 等方法，但是这些方法存在缺陷，不能保证线程中共享数据的一致性，所以应该避免直接调用。</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">线程在终止的过程中，应该先进行操作来清除当前的任务，保持<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">共享数据的一致性</strong>，然后再停止。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">庆幸的是，Java中提供了中断机制，来让多线程之间相互协作，由一个进程来安全地终止另一个进程。</span></p><section class=\"\" data-mpa-template-id=\"584056\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t10\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; text-align: center;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 10px 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79);\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 16px;\"><strong mpa-from-tpl=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); letter-spacing: 2px;\">一、任务的取消</span></strong></span></p></section><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">如果外部的代码能在某个操作正常完成之前将其设置为完成状态，则该操作为<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">可取消的</strong>（Cancellable）。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">操作被取消的原因有很多，比如超时，异常，请求被取消等等。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">一个可取消的任务要求必须设置<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">取消策略</strong>，即如何取消，何时检查取消命令，以及接收到取消命令之后如何处理。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">最简单的取消办法就是利用<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">取消标志位</strong>，如下所示：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 270px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 92px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">PrimeGenerator</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 65px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">implements</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Runnable</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> ExecutorService exec = Executors.newCachedThreadPool();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> List&lt;BigInteger&gt; primes<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ArrayList&lt;BigInteger&gt;();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 73px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//取消标志位</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">volatile</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">boolean</span> cancelled;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;BigInteger p = BigInteger.ONE;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 217px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//每次在生成下一个素数时坚持是否取消</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 109px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//如果取消，则退出</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">while</span> (!cancelled) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;p = p.nextProbablePrime();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;primes.add(p);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 139px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">cancel</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;cancelled = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 284px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 80px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> List&lt;BigInteger&gt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">get</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ArrayList&lt;BigInteger&gt;(primes);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 462px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> List&lt;BigInteger&gt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 98px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">aSecondOfPrimes</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;PrimeGenerator generator = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> PrimeGenerator();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;exec.execute(generator);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SECONDS.sleep(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">1</span>);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;generator.cancel();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> generator.get();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">这段代码用于生成素数，并在任务运行一秒钟之后终止。其取消策略为：通过改变取消标志位取消任务，任务在每次生成下一随机素数之前检查任务是否被取消，被取消后任务将退出。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">然而，该机制的最大的问题就是无法应用于<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">拥塞方法</strong>。假设在循环中调用了拥塞方法，任务可能因拥塞而永远不会去检查取消标志位，甚至会造成永远不能停止。</span></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">1.1</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">中断</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">为了解决拥塞方法带来的问题，就需要使用中断机制来取消任务。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">虽然在Java规范中，线程的取消和中断没有必然联系，但是在实践中发现：中断是取消线程的最合理的方式。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">Thread类中和中断相关的方法如下：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 86px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 92px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 中断当前线程</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 60px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">interrupt</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span></span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 判断当前线程是否被中断</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 178px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> boolen <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 72px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">isInterrupt</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span></span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 248px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 清除当前线程的中断状态，并返回之前的值</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 211px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> boolen <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">interrupt</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span></span>; &nbsp; <br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">调用Interrupt方法并不是意味着要立刻停止目标线程，而只是传递请求中断的消息。所以对于中断操作的正确理解为：正在运行的线程收到中断请求之后，在下一个<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">合适的时刻</strong>中断自己。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">使用中断方法改进素数生成类如下：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 231px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 85px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">PrimeProducer</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">extends</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> BlockingQueue&lt;BigInteger&gt; queue;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.queue = queue;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BigInteger p = BigInteger.ONE;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 157px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//使用中断的方式来取消任务</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">while</span> (!Thread.currentThread().isInterrupted())<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 177px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//put方法会隐式检查并响应中断</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;queue.put(p = p.nextProbablePrime());<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (InterruptedException consumed) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 112px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">/* 允许任务退出 */</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 139px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">cancel</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;interrupt();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">代码中有两次检查中断请求：</span></p><ul class=\"list-paddingleft-2\" style=\"margin: 0px; padding: 0px 0px 0px 30px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">第一次是在循环开始前，显示检查中断请求；</span></p></li><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">第二次是在put方法，该方法为拥塞的，会隐式坚持当前线程是否被中断；</span></p></li></ul><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">1.2</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">中断策略</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">和取消策略类似，可以被中断的任务也需要有<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">中断策略：</strong></span><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">即如何中断，合适检查中断请求，以及接收到中断请求之后如何处理。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">由于每个线程拥有各自的中断策略，因此除非清楚中断对目标线程的含义，否者不要中断该线程。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">正是由于以上原因，大多数拥塞的库函数在检测到中断都是抛出中断异常（InterruptedException）作为中断响应，让线程的所有者去处理，而不是去真的中断当前线程。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">虽然有人质疑Java没有提供抢占式的中断机制，但是开发人员通过处理中断异常的方法，可以定制更为灵活的中断策略，从而在响应性和健壮性之间做出合理的平衡。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">一般情况的中断响应方法为：</span></p><ol class=\"list-paddingleft-2\" style=\"margin: 0px; padding: 0px 0px 0px 30px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">传递异常：收到中断异常之后，直接将该异常抛出；</span></p></li><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">回复中断状态：即再次调用Interrupt方法，恢复中断状态，让调用堆栈的上层能看到中断状态进而处理它。</span></p></li></ol><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">切记，只有实现了线程中断策略的代码才能屏蔽中断请求，在常规的任务和库代码中都不应该屏蔽中断请求。中断请求是线程中断和取消的基础。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"></span></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">1.3</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">定时运行</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">定时运行一个任务是很常见的场景，很多问题是很费时间的，就需在规定时间内完成，如果没有完成则取消任务。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">以下代码就是一个定时执行任务的实例：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">TimedRun1</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> ScheduledExecutorService cancelExec = Executors.newScheduledThreadPool(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">1</span>);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 403px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 52px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">timedRun</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Runnable r,<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">long</span> timeout, TimeUnit unit)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Thread taskThread = Thread.currentThread();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;cancelExec.schedule(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Runnable() {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 80px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 中断线程，</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 284px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 违规，不能在不知道中断策略的前提下调用中断，</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 176px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 该方法可能被任意线程调用。</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;taskThread.interrupt();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}, timeout, unit);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;r.run();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">很可惜，这是反面的例子，因为timedRun方法在不知道Runnable对象的中断策略的情况下，就中断该任务，这样会承担很大的风险。而且如果Runnable对象不支持中断， 则该定时模型就会失效。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">为了解决上述问题，就需要执行任务都线程有自己的中断策略，如下：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 105px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LaunderThrowable</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 403px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> RuntimeException <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 105px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">launderThrowable</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 86px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Throwable t)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (t <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">instanceof</span> RuntimeException)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> (RuntimeException) t;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">else</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (t <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">instanceof</span> Error)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> (Error) t;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">else</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> IllegalStateException(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(230, 219, 116); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">\"Not unchecked\"</span>, t);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">TimedRun2</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> ScheduledExecutorService cancelExec = newScheduledThreadPool(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">1</span>);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 52px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">timedRun</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Runnable r,<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">long</span> timeout, TimeUnit unit)</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 277px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">RethrowableTask</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">implements</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Runnable</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">volatile</span> Throwable t;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;r.run();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (Throwable t) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 217px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//中断策略，保存当前抛出的异常，退出</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.t = t;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 92px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 再次抛出异常</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">rethrow</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (t != <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">null</span>)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> launderThrowable(t);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;RethrowableTask task = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> RethrowableTask();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Thread taskThread = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Thread(task);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 97px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//开启任务子线程</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;taskThread.start();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 121px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//定时中断任务子线程</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;cancelExec.schedule(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Runnable() {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;taskThread.interrupt();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}, timeout, unit);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 169px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//限时等待任务子线程执行完毕</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;taskThread.join(unit.toMillis(timeout));<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 195px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//尝试抛出task在执行中抛出到异常</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;task.rethrow();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">无论Runnable对象是否支持中断，RethrowableTask对象都会记录下来发生的异常信息并结束任务，并将该异常再次抛出。</span></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">1.4</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">通过Future取消任务</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">Future用来管理任务的生命周期，自然也可以来取消任务，调用Future.cancel方法就是用中断请求结束任务并退出，这也是Executor的默认中断策略。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">用Future实现定时任务的代码如下：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 52px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">TimedRun</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> ExecutorService taskExec = Executors.newCachedThreadPool();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 52px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">timedRun</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Runnable r,<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">long</span> timeout, TimeUnit unit)</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;Future&lt;?&gt; task = taskExec.submit(r);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;task.get(timeout, unit);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (TimeoutException e) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 116px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 因超时而取消任务</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (ExecutionException e) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 176px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 任务异常，重新抛出异常信息</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> launderThrowable(e.getCause());<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 200px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 如果该任务已经完成，将没有影响</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 236px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 如果任务正在运行，将因为中断而被取消</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;task.cancel(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>); <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// interrupt if running</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">1.5</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">不可中断的拥塞</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">一些的方法的拥塞是不能响应中断请求的，这类操作以I/O操作居多，但是可以让其抛出类似的异常，来停止任务：</span></p><ul class=\"list-paddingleft-2\" style=\"margin: 0px; padding: 0px 0px 0px 30px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">Socket I/O: 关闭底层socket，所有因执行读写操作而拥塞的线程会抛出SocketException；</span></p></li><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">同步 I/O：大部分Channel都实现了InterruptiableChannel接口，可以响应中断请求，抛出异常ClosedByInterruptException;</span></p></li><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">Selector的异步 I/O：Selector执行select方法之后，再执行close和wakeUp方法就会抛出异常ClosedSelectorException。</span></p></li></ul><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">以套接字为例，其利用关闭socket对象来响应异常的实例如下：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 224px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">ReaderThread</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">extends</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">int</span> BUFSZ = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">512</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Socket socket;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> InputStream in;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 356px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 80px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">ReaderThread</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 98px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Socket socket)</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> IOException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.socket = socket;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.in = socket.getInputStream();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 159px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 60px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">interrupt</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 80px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 关闭套接字</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 150px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 此时in.read会抛出异常</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;socket.close();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (IOException ignored) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 80px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 正常的中断</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">super</span>.interrupt();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">byte</span>[] buf = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">byte</span>[BUFSZ];<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">while</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">int</span> count = in.read(buf);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (count &lt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 6px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">0</span>)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">break</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">else</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (count &gt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 6px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">0</span>)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;processBuffer(buf, count);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (IOException e) { <br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 262px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 如果socket关闭，in.read方法将会抛出异常</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 188px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 借此机会，响应中断，线程退出</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 323px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 86px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">processBuffer</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">byte</span>[] buf, <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">int</span> count)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"></span></p><section class=\"\" data-mpa-template-id=\"584056\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t10\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; text-align: center;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 10px 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79);\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 16px;\"><strong mpa-from-tpl=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); letter-spacing: 2px;\">二</span></strong></span><strong mpa-from-tpl=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 16px;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); letter-spacing: 2px;\">、停止基于线程的服务</span></strong></p></section><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">一个应用程序是由多个服务构成的，而每个服务会拥有多个线程为其工作。当应用程序关闭服务时，由服务来关闭其所拥有的线程。服务为了便于管理自己所拥有的线程，应该<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">提供生命周期</strong>方来关闭这些线程。对于ExecutorService，其包含线程池，是其下属线程的拥有者，所提供的生命周期方法就是shutdown和shutdownNow方法。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><blockquote style=\"padding-right: 0px; padding-left: 10px; max-width: 100%; border-left-width: 3px; border-left-color: rgb(219, 219, 219); color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">如果服务的生命周期大于所创建线程的生命周期，服务就应该提供生命周期方法来管理线程。</span></p></blockquote><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">2.1</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">强行关闭和平缓关闭</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">我们以日志服务为例，来说明两种关闭方式的不同。首先，如下代码是不支持关闭的日志服务，其采用多生产者-单消费者模式，生产者将日志消息放入拥塞队列中，消费者从队列中取出日志打印出来。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LogWriter</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 128px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 拥塞队列作为缓存区</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> BlockingQueue&lt;String&gt; queue;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 68px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 日志线程</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> LoggerThread logger;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 68px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 队列大小</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">int</span> CAPACITY = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">1000</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 211px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 60px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LogWriter</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Writer writer)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.queue = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> LinkedBlockingQueue&lt;String&gt;(CAPACITY);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.logger = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> LoggerThread(writer);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 132px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">start</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;logger.start();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 370px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">log</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(String msg)</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;queue.put(msg);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 224px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LoggerThread</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">extends</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 109px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//线程安全的字节流</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> PrintWriter writer;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 230px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LoggerThread</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Writer writer)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.writer = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> PrintWriter(writer, <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>); <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// autoflush</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 118px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">while</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;writer.println(queue.take());<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (InterruptedException ignored) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;writer.close();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">如果没有终止操作，以上任务将无法停止，从而使得JVM也无法正常退出。但是，让以上的日志服务停下来其实并非难事，因为拥塞队列的take方法支持响应中断，这样直接关闭服务的方法就是<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">强行关闭</strong>，强行关闭的方式不会去处理已经提交但还未开始执行的任务。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">但是，关闭日志服务前，拥塞队列中可能还有没有及时打印出来的日志消息，所以强行关闭日志服务并不合适，需要等队列中已经存在的消息都打印完毕之后再停止，这就是<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">平缓关闭</strong>，也就是在关闭服务时会等待已提交任务全部执行完毕之后再退出。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">除此之外，在取消生产者-消费者操作时，还需要同时告知消费者和生产者相关操作已经被取消。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">平缓关闭的日志服务如下，其采用了类似信号量的方式记录队列中尚未处理的消息数量。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 112px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LogService</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> BlockingQueue&lt;String&gt; queue;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> LoggerThread loggerThread;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> PrintWriter writer;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">@GuardedBy</span>(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(230, 219, 116); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">\"this\"</span>) <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">boolean</span> isShutdown;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 207px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 信号量 用来记录队列中消息的个数</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">@GuardedBy</span>(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(230, 219, 116); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">\"this\"</span>) <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">int</span> reservations;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 218px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LogService</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Writer writer)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.queue = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> LinkedBlockingQueue&lt;String&gt;();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.loggerThread = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> LoggerThread();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.writer = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> PrintWriter(writer);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 132px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">start</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;loggerThread.start();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 126px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">stop</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isShutdown = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;loggerThread.interrupt();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 370px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">log</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(String msg)</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 205px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//同步方法判断是否关闭和修改信息量</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (isShutdown) <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 355px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 如果已关闭，则不再允许生产者将消息添加到队列，会抛出异常</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> IllegalStateException(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">/*...*/</span>);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 169px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//如果在工作状态，信号量增加</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;++reservations;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 91px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 消息入队列；</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;queue.put(msg);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 224px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">LoggerThread</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">extends</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 118px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">while</span> (<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">true</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 181px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//同步方法读取关闭状态和信息量</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> (LogService.<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 313px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//如果进程被关闭且队列中已经没有消息了，则消费者退出</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (isShutdown &amp;&amp; reservations == <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 6px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">0</span>)<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">break</span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 68px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 取出消息</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;String msg = queue.take();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 消费消息前，修改信号量</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">synchronized</span> (LogService.<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>) {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--reservations;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;writer.println(msg);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">catch</span> (InterruptedException e) { <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 72px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">/* retry */</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;writer.close();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section class=\"\" data-mpa-template-id=\"750128\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t11\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-align: start; align-items: flex-start; -webkit-box-pack: start; justify-content: flex-start;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; color: rgb(79, 79, 79); box-sizing: border-box !important; word-wrap: break-word !important;\">2.2</section></section><section data-mid=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 37px; height: 2px; background-color: rgb(72, 185, 88); opacity: 0.5;\"></section><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 30px 0px 5px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79); opacity: 0.5;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">关闭ExecutorService</span></p></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">在ExecutorService中，其提供了shutdown和shutdownNow方法来分别实现平缓关闭和强制关闭：</span></p><ul class=\"list-paddingleft-2\" style=\"margin: 0px; padding: 0px 0px 0px 30px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">shutdownNow：强制关闭，响应速度快，但是会有风险，因为有任务肯执行到一半被终止；</span></p></li><li style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">shutdown：平缓关闭，响应速度较慢，会等到全部已提交的任务执行完毕之后再退出，更为安全。</span></p></li></ul><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">这里还需要说明下shutdownNow方法的局限性，因为强行关闭直接关闭线程，所以无法通过常规的方法获得哪些任务还没有被执行。这就会导致我们无纺知道线程的工作状态，就需要服务自身去记录任务状态。如下为示例代码：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 363px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 105px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">TrackingExecutor</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">extends</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">AbstractExecutorService</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> ExecutorService exec;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 109px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">//被取消任务的队列</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">private</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Set&lt;Runnable&gt; tasksCancelledAtShutdown =<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Collections.synchronizedSet(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> HashSet&lt;Runnable&gt;());<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 304px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">TrackingExecutor</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 145px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(ExecutorService exec)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">this</span>.exec = exec;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">shutdown</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;exec.shutdown();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 238px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> List&lt;Runnable&gt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 73px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">shutdownNow</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> exec.shutdownNow();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 185px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">boolean</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">isShutdown</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> exec.isShutdown();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 198px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">boolean</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 79px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">isTerminated</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> exec.isTerminated();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 422px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">boolean</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">awaitTermination</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 191px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">long</span> timeout, TimeUnit unit)</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throws</span> InterruptedException </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> exec.awaitTermination(timeout, unit);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 277px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> List&lt;Runnable&gt; <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 112px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">getCancelledTasks</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 14px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (!exec.isTerminated())<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">throw</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> IllegalStateException(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">/*...*/</span>);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">return</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ArrayList&lt;Runnable&gt;(tasksCancelledAtShutdown);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 297px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 47px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">execute</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 164px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">final</span> Runnable runnable)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;exec.execute(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Runnable() {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 119px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">try</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;runnable.run();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 46px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">finally</span> {<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 356px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 如果当前任务被中断且执行器被关闭，则将该任务加入到容器中</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">if</span> (isShutdown()<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;&amp; Thread.currentThread().isInterrupted())<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tasksCancelledAtShutdown.add(runnable);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;});<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><section class=\"\" data-mpa-template-id=\"584056\" data-mpa-color=\"null\" data-mpa-category=\"fav\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"t10\" style=\"margin: 20px 0px 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: flex; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center;\"><section data-mid=\"\" style=\"margin: 0px; padding: 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; text-align: center;\"><section data-preserve-color=\"t\" data-mid=\"\" style=\"margin: 0px; padding: 0px 10px 0px 30px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 14px; color: rgb(79, 79, 79);\"><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; clear: both; min-height: 1em;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 16px;\"><strong mpa-from-tpl=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); letter-spacing: 2px;\">三、处理非正常线程终止</span></strong></span></p></section><section data-mid=\"\" data-contenteditable=\"false\" style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section><section data-mid=\"\" style=\"margin: 0px 0px 0px 12px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; display: inline-block; width: 12px; height: 2px; transform: rotate(-45deg); background-color: rgb(55, 166, 168); opacity: 0.5;\"></section></section></section></section></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255); color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px;\">导致线程非正常终止的主要原因就是RuntimeException，其表示为不可修复的错误。一旦子线程抛出异常，该异常并不会被父线程捕获，而是会直接抛出到控制台。所以要认真处理线程中的异常，尽量设计完备的try-catch-finally代码块。</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">当然，异常总是会发生的，为了处理能主动解决未检测异常问题，Thread.API提供了接口&nbsp;<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">UncaughtExceptionHandler</strong>。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 231px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">interface</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 158px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">UncaughtExceptionHandler</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 297px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 112px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">uncaughtException</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Thread t, Throwable e)</span></span>;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">如果JVM发现一个线程因未捕获异常而退出，就会把该异常交个Thread对象设置的UncaughtExceptionHandler来处理，如果Thread对象没有设置任何异常处理器，那么默认的行为就是上面提到的抛出到控制台，在System.err中输出。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">Thread对象通过<strong style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">&nbsp;setUncaughtExceptionHandler&nbsp;</strong>方法来设置UncaughtExceptionHandler，比如这样：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 165px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 112px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">WitchCaughtThread</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 290px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">main</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(String args[])</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;</span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;Thread thread = <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Thread(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 19px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> Task()); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;thread.setUncaughtExceptionHandler(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ExceptionHandler()); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;thread.start(); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 396px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 106px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">ExceptionHandler</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">implements</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 158px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">UncaughtExceptionHandler</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 60px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">@Override</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 383px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 113px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">uncaughtException</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 151px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Thread t, Throwable e)</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;</span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(230, 219, 116); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">\"==Exception: \"</span>+e.getMessage()); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\">&nbsp;</p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">同样可以为所有的Thread设置一个默认的UncaughtExceptionHandler，通过调用Thread.setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler eh)方法，这是Thread的一个static方法。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">下面是一个例子，即发生为捕获异常时将异常写入日志：</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 389px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 59px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">UEHLogger</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 65px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">implements</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Thread</span>.<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 159px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">UncaughtExceptionHandler</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 164px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">// 将未知的错误计入到日志中</span><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 350px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 113px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">uncaughtException</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 151px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(Thread t, Throwable e)</span> </span>{<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;Logger logger = Logger.getAnonymousLogger();<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;logger.log(Level.SEVERE, <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(230, 219, 116); display: inline; width: 237px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">\"Thread terminated with exception: \"</span> + t.getName(), e);<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;}<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code></pre></section><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">在Executor框架中，需要将异常的捕获封装到Runnable或者Callable中并通过execute提交的任务，才能将它抛出的异常交给UncaughtExceptionHandler，而通过submit提交的任务，无论是抛出的未检测异常还是已检查异常，都将被认为是任务返回状态的一部分。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(89, 89, 89); font-size: 15px; letter-spacing: 2px; background-color: rgb(255, 255, 255);\">如果一个由submit提交的任务由于抛出了异常而结束，那么这个异常将被Future.get封装在ExecutionException中重新抛出。</span></p><p style=\"margin: 0px; padding: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></p><section data-mpa-preserve-tpl-color=\"t\" data-mpa-template=\"t\" class=\"\" mpa-preserve=\"t\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;\"><pre style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; background-image: none; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><code class=\"\" style=\"margin-right: 0.15em; margin-left: 0.15em; padding: 6px; max-width: 100%; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-size: 0.85em; min-width: 400px; background-color: rgb(35, 36, 31); color: rgb(248, 248, 242); display: block; overflow-x: auto; box-sizing: border-box !important; word-wrap: break-word !important;\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 39px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 139px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 85px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">ExecuteCaught</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 290px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">static</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 26px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">main</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 99px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">(String[] args)</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;</span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;ExecutorService exec = Executors.newCachedThreadPool(); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;exec.execute(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ThreadPoolTask()); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;exec.shutdown(); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 277px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 33px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">class</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 93px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">ThreadPoolTask</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 66px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">implements</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 53px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">Runnable</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"></span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(117, 113, 94); display: inline; width: 60px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">@Override</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 152px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\"><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 40px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">public</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 27px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">void</span> <span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(166, 226, 46); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">run</span><span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(248, 248, 242); display: inline; width: 13px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">()</span> &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;</span>{ &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;Thread.currentThread().setUncaughtExceptionHandler(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(249, 38, 114); display: inline; width: 20px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">new</span> ExceptionHandler()); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">3</span>/<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">2</span>); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">3</span>/<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">0</span>); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">3</span>/<span class=\"\" style=\"margin: 0px; padding: 0px; max-width: 100%; color: rgb(174, 129, 255); display: inline; width: 7px; box-sizing: border-box !important; word-wrap: break-word !important; background-position: initial initial; background-repeat: initial initial;\">1</span>); &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\"> &nbsp; &nbsp;} &nbsp;<br style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;\">}</span></code><div><span style=\"margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important; font-size: 10px;\"><br></span></div></pre></section>"
    }
  ]
}
{
  "title": "Unicode 和 UTF-8 是什么关系？",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-size: 14px; font-family: Tahoma, Helvetica, SimSun, sans-serif; line-height: 2em;\">绝大多数程序员都听说过&nbsp;</span><a href=\"https://zh.wikipedia.org/wiki/Unicode\" target=\"_blank\" class=\"ext\" rel=\"external nofollow\" style=\"font-size: 14px; font-family: Tahoma, Helvetica, SimSun, sans-serif; line-height: 2em; word-wrap: break-word; color: rgb(77, 138, 216); text-decoration: none;\">Unicode</a><span style=\"color: rgb(0, 0, 0); font-size: 14px; font-family: Tahoma, Helvetica, SimSun, sans-serif; line-height: 2em;\">&nbsp;和&nbsp;</span><a href=\"https://zh.wikipedia.org/wiki/UTF-8\" target=\"_blank\" class=\"ext\" rel=\"external nofollow\" style=\"font-size: 14px; font-family: Tahoma, Helvetica, SimSun, sans-serif; line-height: 2em; word-wrap: break-word; color: rgb(77, 138, 216); text-decoration: none;\">UTF-8</a><span style=\"color: rgb(0, 0, 0); font-size: 14px; font-family: Tahoma, Helvetica, SimSun, sans-serif; line-height: 2em;\">，但是清楚它们之间关系的人就不多了，关于这个问题，与其苍白的陈述它们的概念，不如举例子说明来得自然。</span><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\"><img src=\"quiver-image-url/37073E0A96D5F5193DBFE926DA3E4FBA.jpg\" alt=\"\" style=\"word-wrap: break-word; max-width: 95%; margin: 10px 15px;\" width=\"450\" height=\"337\"></p><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">我前些天碰到一个需求：随机生成几个汉字。原本我便对编码之类的问题发怵，所以完全搞不清楚状况，无奈之下我便上网搜索了一个 PHP 版本的实现：</p><pre class=\"prettyprint linenums prettyprinted\" style=\"font-size: 14px; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 170, 255); line-height: 25px;\"><ol class=\"linenums\" style=\"word-wrap: break-word; padding: 1px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(0, 153, 0); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); color: rgb(174, 174, 174); margin: 1em !important;\"><li class=\"L0\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">&lt;?</span><span class=\"pln\" style=\"word-wrap: break-word;\">php</span></code></li><li class=\"L1\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pln\" style=\"word-wrap: break-word;\">$zh </span><span class=\"pun\" style=\"word-wrap: break-word;\">=</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">''</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span></code></li><li class=\"L2\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"kwd\" style=\"word-wrap: break-word; color: rgb(226, 137, 100);\">for</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">$i </span><span class=\"pun\" style=\"word-wrap: break-word;\">=</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"lit\" style=\"word-wrap: break-word; color: rgb(51, 135, 204);\">0</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span><span class=\"pln\" style=\"word-wrap: break-word;\"> $i </span><span class=\"pun\" style=\"word-wrap: break-word;\">&lt;</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"lit\" style=\"word-wrap: break-word; color: rgb(51, 135, 204);\">3</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span><span class=\"pln\" style=\"word-wrap: break-word;\"> $i</span><span class=\"pun\" style=\"word-wrap: break-word;\">++)</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"pun\" style=\"word-wrap: break-word;\">{</span></code></li><li class=\"L3\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pln\" style=\"word-wrap: break-word;\">    $zh </span><span class=\"pun\" style=\"word-wrap: break-word;\">.=</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">'&amp;#'</span><span class=\"pun\" style=\"word-wrap: break-word;\">.</span><span class=\"pln\" style=\"word-wrap: break-word;\"> rand</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"lit\" style=\"word-wrap: break-word; color: rgb(51, 135, 204);\">19968</span><span class=\"pun\" style=\"word-wrap: break-word;\">,</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"lit\" style=\"word-wrap: break-word; color: rgb(51, 135, 204);\">40869</span><span class=\"pun\" style=\"word-wrap: break-word;\">)</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"pun\" style=\"word-wrap: break-word;\">.</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">';'</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span></code></li><li class=\"L4\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">}</span></code></li><li class=\"L5\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"kwd\" style=\"word-wrap: break-word; color: rgb(226, 137, 100);\">echo</span><span class=\"pln\" style=\"word-wrap: break-word;\"> mb_convert_encoding</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">$zh</span><span class=\"pun\" style=\"word-wrap: break-word;\">,</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">'UTF-8'</span><span class=\"pun\" style=\"word-wrap: break-word;\">,</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">'HTML-ENTITIES'</span><span class=\"pun\" style=\"word-wrap: break-word;\">);</span></code></li><li class=\"L6\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">?&gt;</span></code></li></ol></pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">不过代码里的「<strong style=\"word-wrap: break-word; color: rgb(196, 15, 15);\">19968</strong>」和「<strong style=\"word-wrap: break-word; color: rgb(196, 15, 15);\">40869</strong>」是什么玩意？这又牵扯到 Unicode code points，为了更好的说明问题，我们需要把如上十进制转换成十六进制：</p><pre style=\"font-size: 14px; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 0, 0); line-height: 25px;\">shell&gt; php -r 'echo dechex(19968);'\n4e00\n\nshell&gt; php -r 'echo dechex(40908);'\n9fcc</pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">在 Unicode 官方网站，我们能查到&nbsp;<a href=\"http://www.unicode.org/charts/unihangridindex.html\" target=\"_blank\" class=\"ext\" rel=\"external nofollow\" style=\"word-wrap: break-word; color: rgb(77, 138, 216); text-decoration: none;\">Unihan Grid Index</a>，其中&nbsp;CJK Unified Ideographs 部分包含了大部分的汉字，其&nbsp;code points 恰恰是从 U+4E00 到 U+9FCC！</p><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">单单上面一个例子还不足以说明问题，下面我们挑选一个「<a href=\"http://www.unicode.org/cgi-bin/GetUnihanData.pl?codepoint=535A&amp;useutf8=true\" target=\"_blank\" class=\"ext\" rel=\"external nofollow\" style=\"word-wrap: break-word; color: rgb(77, 138, 216); text-decoration: none;\">博</a>」字深入说明一下：</p><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\"><a href=\"https://dn-linuxcn.qbox.me/data/attachment/album/201510/14/100852ezgsvsm8yemf8791.jpg\" class=\"ext\" rel=\"external nofollow\" style=\"word-wrap: break-word; color: rgb(77, 138, 216); text-decoration: none;\"><img class=\"size-full wp-image-473\" src=\"quiver-image-url/1A490BC12D3540B1A49DF60750E1E2EA.jpg\" alt=\"Unicode\" width=\"700\" height=\"410\" style=\"word-wrap: break-word; border: 1px solid rgb(204, 204, 204); max-width: 95%; margin: 10px 15px; padding: 5px;\"></a></p><p class=\"wp-caption-text\" style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\"><span style=\"word-wrap: break-word; color: rgb(161, 201, 86);\">Unicode</span></p><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">因为我们编码是 UTF-8，所以就先看看「博」字的 UTF-8 编码是什么：</p><pre class=\"prettyprint linenums prettyprinted\" style=\"font-size: 14px; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 170, 255); line-height: 25px;\"><ol class=\"linenums\" style=\"word-wrap: break-word; padding: 1px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(0, 153, 0); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); color: rgb(174, 174, 174); margin: 1em !important;\"><li class=\"L0\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">&lt;?</span><span class=\"pln\" style=\"word-wrap: break-word;\">php</span></code></li><li class=\"L1\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pln\" style=\"word-wrap: break-word;\">$string </span><span class=\"pun\" style=\"word-wrap: break-word;\">=</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"str\" style=\"word-wrap: break-word; color: rgb(101, 176, 66);\">\"博\"</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span></code></li><li class=\"L2\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"kwd\" style=\"word-wrap: break-word; color: rgb(226, 137, 100);\">for</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">$i </span><span class=\"pun\" style=\"word-wrap: break-word;\">=</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"lit\" style=\"word-wrap: break-word; color: rgb(51, 135, 204);\">0</span><span class=\"pun\" style=\"word-wrap: break-word;\">;</span><span class=\"pln\" style=\"word-wrap: break-word;\"> $i </span><span class=\"pun\" style=\"word-wrap: break-word;\">&lt;</span><span class=\"pln\" style=\"word-wrap: break-word;\"> strlen</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">$string</span><span class=\"pun\" style=\"word-wrap: break-word;\">);</span><span class=\"pln\" style=\"word-wrap: break-word;\"> $i</span><span class=\"pun\" style=\"word-wrap: break-word;\">++)</span><span class=\"pln\" style=\"word-wrap: break-word;\"> </span><span class=\"pun\" style=\"word-wrap: break-word;\">{</span></code></li><li class=\"L3\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pln\" style=\"word-wrap: break-word;\">    </span><span class=\"kwd\" style=\"word-wrap: break-word; color: rgb(226, 137, 100);\">echo</span><span class=\"pln\" style=\"word-wrap: break-word;\"> dechex</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">ord</span><span class=\"pun\" style=\"word-wrap: break-word;\">(</span><span class=\"pln\" style=\"word-wrap: break-word;\">$string</span><span class=\"pun\" style=\"word-wrap: break-word;\">[</span><span class=\"pln\" style=\"word-wrap: break-word;\">$i</span><span class=\"pun\" style=\"word-wrap: break-word;\">]));</span></code></li><li class=\"L4\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">}</span></code></li><li class=\"L5\" style=\"word-wrap: break-word; margin: 0px; padding: 0px 0px 0px 28px; text-indent: -28px; list-style-type: decimal; line-height: 1.5em !important;\"><code style=\"word-wrap: break-word; background-image: none; text-shadow: rgb(0, 0, 0) 0px 1px 1px; color: rgb(184, 255, 184); padding-top: 0px !important; padding-bottom: 0px !important; padding-left: 10px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; margin-top: 1em !important; margin-bottom: 1em !important; border: none !important;\"><span class=\"pun\" style=\"word-wrap: break-word;\">?&gt;</span></code></li></ol></pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">代码看上去有点冗长，实际上利用 pack/unpack 函数可以很简单的实现类似的逻辑：</p><pre style=\"font-size: 14px; background-color: rgb(17, 17, 17); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 0, 0); line-height: 25px;\">shell&gt; php -r 'var_dump(unpack(\"H6\", \"博\"));'\narray(1) {\n  [\"codes\"]=&gt;\n  string(6) \"e58d9a\"\n}</pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">于是乎「博」字的 UTF-8 编码是「e58d9a」，再看怎么得到 unicode code point：</p><pre style=\"font-size: 14px; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 0, 0); line-height: 25px;\">shell&gt; php -r 'echo base_convert(\"e58d9a\", 16, 2);'\n111001011000110110011010</pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">如上拿到了「博」字的二进制表示，实际上其&nbsp;unicode code point 就隐藏在这里。通常汉字用 UTF-8 表示时是三个字节，格式为「<code style=\"word-wrap: break-word; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; padding: 2px 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-right: 4px; margin-left: 4px; color: rgb(184, 255, 184);\">111XXXXX</code>&nbsp;<code style=\"word-wrap: break-word; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; padding: 2px 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-right: 4px; margin-left: 4px; color: rgb(184, 255, 184);\">10XXXXXX</code>&nbsp;<code style=\"word-wrap: break-word; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; padding: 2px 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-right: 4px; margin-left: 4px; color: rgb(184, 255, 184);\">10XXXXXX</code>」，除掉标志位，把剩余对应位置上的数据抽取出来连接在一起，就得到了 Unicode code point，也就是「<code style=\"word-wrap: break-word; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; padding: 2px 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-right: 4px; margin-left: 4px; color: rgb(184, 255, 184);\">00101001101011010</code>」，剩下的就简单了，把它从二进制转换成十六进制即可：</p><pre style=\"font-size: 14px; background-color: rgb(22, 27, 32); background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAICAYAAAA4GpVBAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90GBgMqHcZ0EYUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAF0lEQVQI12NgYGAwZsAECDEWBgYGBgYACpwAazfG694AAAAASUVORK5CYII=); text-shadow: rgb(0, 0, 0) 0px 1px 1px; border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px; color: rgb(184, 255, 184); margin: 10px; padding: 1em 1em 1em 2em; border: 2px solid rgb(0, 0, 0); line-height: 25px;\">shell&gt; php -r 'echo base_convert(\"00101001101011010\", 2, 16);'\n535a</pre><p style=\"color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word; margin: 10px 0px; padding: 0px; line-height: 2em; font-family: Tahoma, Helvetica, SimSun, sans-serif;\">需要说明的是，如果你仅仅看「博」字，会发现其 Unicode code point 和 UTF-16 是一样的，很容易据此认为它们是等同的概念，实际上这个结论仅仅在双字节时成立，一旦大于两个字节，就不成立了，对应的例子可以参照「</p>"
    }
  ]
}
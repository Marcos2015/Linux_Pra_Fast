{
  "title": "通过传递数组名参数到子函数中，使用sizeof以获得数组长度是不可行的",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14px; color: rgb(69, 69, 69); font-family: arial, 宋体, sans-serif, tahoma, 'Microsoft YaHei'; line-height: 24px;\">c语言中，定义数组后可以用sizeof命令获得数组的长度（可容纳元素个数）</span><div class=\"quality-content-detail content\" style=\"font-size: 14px; word-wrap: break-word; word-break: break-all; color: rgb(69, 69, 69); margin: 10px 0px; font-family: arial, 宋体, sans-serif, tahoma, 'Microsoft YaHei'; line-height: 24px;\"><p style=\"margin: 0px; padding: 0px;\">如：</p><pre t=\"code\" l=\"cpp\" style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; font-family: arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei';\">{<br>int&nbsp;data[4];<br>int&nbsp;length;<br>length=sizeof(data)/sizeof(data[0]);&nbsp;&nbsp;//数组占内存总空间，除以单个元素占内存空间大小<br>printf(\"length&nbsp;of&nbsp;data[4]=%d\",&nbsp;length&nbsp;);&nbsp;//输出length&nbsp;of&nbsp;data[4]=4<br>}</pre><p style=\"margin: 0px; padding: 0px;\">但，通过传递数组名参数到子函数中，以获得数组长度是不可行的。如：<br></p><pre t=\"code\" l=\"cpp\" style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; font-family: arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei';\">int&nbsp;getLength(int[]&nbsp;a){<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;length;<br>&nbsp;&nbsp;&nbsp;&nbsp;length=sizeof(a)/sizeof(a[0]);&nbsp;//这样是错误的，得到的结果永远是1<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;length;<br>}<br>因为，a是函数参数，到了本函数中，a只是一个指针（地址，系统在本函数运行时，是不知道a所表示的地址有多大的数据存储空间，这里只是告诉函数：一个数据存储空间首地址），所以，sizoef(a)的结果是指针变量a占内存的大小，一般在32位机上是4个字节。a[0]是int类型，sizeof(a[0])也是4个字节，所以，结果永远是1。</pre><p style=\"margin: 0px; padding: 0px;\">因此，获得数组长度，只能在数组定义所在的代码区中，采用以上方法，才可以达到效果。<br></p></div><div class=\"quality-content-meta line\" style=\"font-size: 14px; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, tahoma, 'Microsoft YaHei'; line-height: 24px;\"><div class=\"ft-info grid-r\" style=\"display: inline; float: right; text-align: right; font-size: 12px; color: rgb(165, 165, 165);\"><i style=\"width: 13px; height: 15px; display: inline-block; vertical-align: middle; background-image: url(http://cdn.iknow.bdimg.com/static/question/widget/css/img/i-quality-icon_be1295d.png?__sprite); margin-right: 3px; position: relative; top: -1px; background-position: 0px 0px; background-repeat: no-repeat no-repeat;\"></i></div></div>"
    }
  ]
}
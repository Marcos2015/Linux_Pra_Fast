{
  "title": "Linux环境下段错误的产生原因及调试方法小结",
  "cells": [
    {
      "type": "text",
      "data": "<embed id=\"xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd\" type=\"application/thunder_download_plugin\" height=\"0\" width=\"0\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"></span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"></span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"></span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"></span><span style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"></span><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: Verdana;\"><a href=\"http://www.cnblogs.com/panfeng412/archive/2011/11/06/segmentation-fault-in-linux.html\"><b><span style=\"font-size: 14pt; color: rgb(26, 37, 67); text-decoration: none;\">Linux</span></b><b><span lang=\"ZH-CN\" style=\"font-size: 14pt; font-family: 宋体; color: rgb(26, 37, 67); text-decoration: none;\">环境下段错误的产生原因及调试方法小结</span></b></a></span><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">最近在</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">Linux</span><span style=\"font-size: 14pt; font-family: 宋体;\">环境下做</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">C</span><span style=\"font-size: 14pt; font-family: 宋体;\">语言项目，由于是在一个原有项目基础之上进行二次开发，而且项目工程庞大复杂，出现了不少问题，其中遇到最多、花费时间最长的问题就是著名的</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">“</span><span style=\"font-size: 14pt; font-family: 宋体;\">段错误</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">”</span><span style=\"font-size: 14pt; font-family: 宋体;\">（</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">Segmentation Fault</span><span style=\"font-size: 14pt; font-family: 宋体;\">）。借此机会系统学习了一下，这里对</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">Linux</span><span style=\"font-size: 14pt; font-family: 宋体;\">环境下的段错误做个小结，方便以后同类问题的排查与解决。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">1.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">段错误是什么</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">一句话来说，段错误是指访问的内存超出了系统给这个程序所设定的内存空间，例如访问了不存在的内存地址、访问了系统保护的内存地址、访问了只读的内存地址等等情况。这里贴一个对于</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">“</span><span style=\"font-size: 14pt; font-family: 宋体;\">段错误</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">”</span><span style=\"font-size: 14pt; font-family: 宋体;\">的准确定义（参考</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><a href=\"http://answers.com/\">Answers.com</a></span><span style=\"font-size: 14pt; font-family: 宋体;\">）：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image002.png\" v:shapes=\"图片_x0020_1\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">A segmentation fault (often shortened to segfault) is a particular error condition that can occur during the operation of computer software. In short, a segmentation fault occurs&nbsp;<span style=\"color: blue;\">when</span>&nbsp;a program attempts to access a memory location that it is&nbsp;<span style=\"color: blue;\">not</span>&nbsp;allowed to access, or attempts to access a memory location in a way that is&nbsp;<span style=\"color: blue;\">not</span>&nbsp;allowed (e.g., attempts to write to a read-only location, or to overwrite part of the operating system). Systems based&nbsp;<span style=\"color: blue;\">on</span>processors like the Motorola 68000 tend to refer to these events as Address or Bus errors.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Segmentation is one approach to memory management and protection in the operating system. It has been superseded by paging&nbsp;<span style=\"color: blue;\">for</span>&nbsp;most purposes, but much of the terminology of segmentation is still used, \"segmentation fault\" being an example. Some operating systems still have segmentation at some logical level although paging is used as the main memory management policy.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">On</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;Unix-like operating systems, a process that accesses invalid memory receives the SIGSEGV signal.&nbsp;<span style=\"color: blue;\">On</span>&nbsp;Microsoft Windows, a process that accesses invalid memory receives the STATUS_ACCESS_VIOLATION exception.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image004.png\" v:shapes=\"图片_x0020_2\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">2.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">段错误产生的原因</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.1&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">访问不存在的内存地址</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image006.png\" v:shapes=\"图片_x0020_3\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdio.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdlib.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">void</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;main()<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">{<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">int</span>&nbsp;*ptr = NULL;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *ptr =&nbsp;<span style=\"color: rgb(107, 0, 109);\">0</span>;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">}<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image008.png\" v:shapes=\"图片_x0020_4\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.2&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">访问系统保护的内存地址</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image010.png\" v:shapes=\"图片_x0020_5\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdio.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdlib.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">void</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;main()<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">{<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">int</span>&nbsp;*ptr = (<span style=\"color: blue;\">int</span>&nbsp;*)<span style=\"color: rgb(107, 0, 109);\">0</span>;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *ptr =&nbsp;<span style=\"color: rgb(107, 0, 109);\">100</span>;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">}<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image012.png\" v:shapes=\"图片_x0020_6\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">访问只读的内存地址</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image014.png\" v:shapes=\"图片_x0020_7\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdio.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdlib.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;<span style=\"color: blue;\">string</span>.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">void</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;main()<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">{<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">char</span>&nbsp;*ptr =&nbsp;<span style=\"color: rgb(107, 0, 1);\">\"test\"</span>;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; strcpy(ptr,&nbsp;<span style=\"color: rgb(107, 0, 1);\">\"TEST\"</span>);<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">}<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image016.png\" v:shapes=\"图片_x0020_8\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.4&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">栈溢出</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image018.png\" v:shapes=\"图片_x0020_9\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdio.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#include&lt;stdlib.h&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">void</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;main()<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">{<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main();<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">}<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image020.png\" v:shapes=\"图片_x0020_10\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">等等其他原因。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">3.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">段错误信息的获取</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">程序发生段错误时，提示信息很少，下面有几种查看段错误的发生信息的途径。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3.1 dmesg<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">dmesg</span><span style=\"font-size: 14pt; font-family: 宋体;\">可以在应用程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">crash</span><span style=\"font-size: 14pt; font-family: 宋体;\">掉时，显示内核中保存的相关信息。如下所示，通过</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">dmesg</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令可以查看发生段错误的程序名称、引起段错误发生的内存地址、指令指针地址、堆栈指针地址、错误代码、错误原因等。以程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">为例：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ dmesg<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">[ 2329.479037] segfault3[2700]: segfault at 80484e0 ip 00d2906a sp bfbbec3c error 7 in libc-2.10.1.so[cb4000+13e000]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3.2 -g<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gcc</span><span style=\"font-size: 14pt; font-family: 宋体;\">编译程序的源码时，加上</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-g</span><span style=\"font-size: 14pt; font-family: 宋体;\">参数，这样可以使得生成的二进制文件中加入可以用于</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">调试的有用信息。以程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">为例：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ gcc -g -o segfault3 segfault3.c<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3.3 nm<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">nm</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令列出二进制文件中的符号表，包括符号地址、符号类型、符号名等，这样可以帮助定位在哪里发生了段错误。以程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">为例：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image022.png\" v:shapes=\"图片_x0020_11\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ nm segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f20 d _DYNAMIC<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049ff4 d _GLOBAL_OFFSET_TABLE_<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080484dc R _IO_stdin_used<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; w _Jv_RegisterClasses<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f10 d __CTOR_END__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f0c d __CTOR_LIST__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f18 D __DTOR_END__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f14 d __DTOR_LIST__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080484ec r __FRAME_END__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f1c d __JCR_END__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f1c d __JCR_LIST__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a014 A __bss_start<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a00c D __data_start<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048490 t __do_global_ctors_aux<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048360 t __do_global_dtors_aux<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a010 D __dso_handle<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; w __gmon_start__<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804848a T __i686.get_pc_thunk.bx<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f0c d __init_array_end<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049f0c d __init_array_start<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048420 T __libc_csu_fini<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048430 T __libc_csu_init<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; U __libc_start_main@@GLIBC_2.0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a014 A _edata<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a01c A _end<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080484bc T _fini<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080484d8 R _fp_hw<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080482bc T _init<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048330 T _start<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a014 b completed.6990<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a00c W data_start<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a018 b dtor_idx.6992<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080483c0 t frame_dummy<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">080483e4 T main<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; U memcpy@@GLIBC_2.0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image024.png\" v:shapes=\"图片_x0020_12\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3.4 ldd<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">ldd</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令查看二进制程序的共享链接库依赖，包括库的名称、起始地址，这样可以确定段错误到底是发生在了自己的程序中还是依赖的共享库中。以程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">为例：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ ldd ./segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp; linux-gate.so.1 =&gt;&nbsp; (0x00e08000)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp; libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0x00675000)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp; /lib/ld-linux.so.2 (0x00482000)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">4.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">段错误的调试方法</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.1&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">printf</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">输出信息</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">这个是看似最简单但往往很多情况下十分有效的调试方式，也许可以说是程序员用的最多的调试方式。简单来说，就是在程序的重要代码附近加上像</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">printf</span><span style=\"font-size: 14pt; font-family: 宋体;\">这类输出信息，这样可以跟踪并打印出段错误在代码中可能出现的位置。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">为了方便使用这种方法，可以使用条件编译指令</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">#ifdef DEBUG</span><span style=\"font-size: 14pt; font-family: 宋体;\">和</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">#endif</span><span style=\"font-size: 14pt; font-family: 宋体;\">把</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">printf</span><span style=\"font-size: 14pt; font-family: 宋体;\">函数包起来。这样在程序编译时，如果加上</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-DDEBUG</span><span style=\"font-size: 14pt; font-family: 宋体;\">参数就能查看调试信息；否则不加该参数就不会显示调试信息。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.2&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gcc</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">和</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.2.1&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">调试步骤</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">&nbsp;1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、为了能够使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">调试程序，在编译阶段加上</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-g</span><span style=\"font-size: 14pt; font-family: 宋体;\">参数，以程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">为例：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ gcc -g -o segfault3 segfault3.c<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令调试程序：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image026.png\" v:shapes=\"图片_x0020_13\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ gdb ./segfault3&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">GNU gdb (GDB) 7.0-ubuntu<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Copyright (C) 2009 Free Software Foundation, Inc.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">License GPLv3+: GNU GPL version 3 or later &lt;<a href=\"http://gnu.org/licenses/gpl.html\">http://gnu.org/licenses/gpl.html</a>&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">This is free software: you are free to change and redistribute it.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">There is NO WARRANTY, to the extent permitted by law.&nbsp;&nbsp;<span style=\"color: blue;\">Type</span>&nbsp;\"show copying\"<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">and \"show warranty\"&nbsp;<span style=\"color: blue;\">for</span>&nbsp;details.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">This GDB was configured as \"i486-linux-gnu\".<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">For</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;bug reporting instructions, please see:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&lt;<a href=\"http://www.gnu.org/software/gdb/bugs/\">http://www.gnu.org/software/gdb/bugs/</a>&gt;...<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Reading symbols from /home/panfeng/segfault/segfault3...done.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">(gdb)&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image028.png\" v:shapes=\"图片_x0020_14\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3</span><span style=\"font-size: 14pt; font-family: 宋体;\">、进入</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">后，运行程序：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image030.png\" v:shapes=\"图片_x0020_15\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">(gdb)&nbsp;<span style=\"color: blue;\">run</span><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Starting program: /home/panfeng/segfault/segfault3&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Program received signal SIGSEGV, Segmentation fault.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0x001a306a in memcpy () from /lib/tls/i686/cmov/libc.so.6<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">(gdb)&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image032.png\" v:shapes=\"图片_x0020_16\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">从输出看出，程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">收到</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">SIGSEGV</span><span style=\"font-size: 14pt; font-family: 宋体;\">信号，触发段错误，并提示地址</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">0x001a306a</span><span style=\"font-size: 14pt; font-family: 宋体;\">、调用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">memcpy</span><span style=\"font-size: 14pt; font-family: 宋体;\">报的错，位于</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">/lib/tls/i686/cmov/libc.so.6</span><span style=\"font-size: 14pt; font-family: 宋体;\">库中。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4</span><span style=\"font-size: 14pt; font-family: 宋体;\">、完成调试后，输入</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">quit</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令退出</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image034.png\" v:shapes=\"图片_x0020_17\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">(gdb) quit<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">A debugging session is active.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;&nbsp;&nbsp; Inferior 1 [process 3207] will be killed.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Quit anyway? (y or n) y<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image036.png\" v:shapes=\"图片_x0020_18\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.2.2&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">适用场景</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、仅当能确定程序一定会发生段错误的情况下使用。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、当程序的源码可以获得的情况下，使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-g</span><span style=\"font-size: 14pt; font-family: 宋体;\">参数编译程序。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3</span><span style=\"font-size: 14pt; font-family: 宋体;\">、一般用于测试阶段，生产环境下</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">会有副作用：使程序运行减慢，运行不够稳定，等等。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4</span><span style=\"font-size: 14pt; font-family: 宋体;\">、即使在测试阶段，如果程序过于复杂，</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">也不能处理。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.3&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">文件和</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">在</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.2</span><span style=\"font-size: 14pt; font-family: 宋体;\">节中提到段错误会触发</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">SIGSEGV</span><span style=\"font-size: 14pt; font-family: 宋体;\">信号，通过</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">man&nbsp;7&nbsp;signal</span><span style=\"font-size: 14pt; font-family: 宋体;\">，可以看到</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">SIGSEGV</span><span style=\"font-size: 14pt; font-family: 宋体;\">默认的</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">handler</span><span style=\"font-size: 14pt; font-family: 宋体;\">会打印段错误出错信息，并产生</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件，由此我们可以借助于程序异常退出时生成的</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件中的调试信息，使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">工具来调试程序中的段错误。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.3.1&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">调试步骤</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在一些</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">Linux</span><span style=\"font-size: 14pt; font-family: 宋体;\">版本下，默认是不产生</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件的，首先可以查看一下系统</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件的大小限制：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ ulimit -c<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、可以看到默认设置情况下，本机</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">Linux</span><span style=\"font-size: 14pt; font-family: 宋体;\">环境下发生段错误时不会自动生成</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件，下面设置下</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件的大小限制（单位为</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">KB</span><span style=\"font-size: 14pt; font-family: 宋体;\">）：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ ulimit -c 1024<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ ulimit -c<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">1024<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3</span><span style=\"font-size: 14pt; font-family: 宋体;\">、运行程序</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2.3</span><span style=\"font-size: 14pt; font-family: 宋体;\">，发生段错误生成</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ ./segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-family: 宋体;\">段错误</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;(core dumped)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4</span><span style=\"font-size: 14pt; font-family: 宋体;\">、加载</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件，使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">工具进行调试：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image038.png\" v:shapes=\"图片_x0020_19\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ gdb ./segfault3 ./core&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">GNU gdb (GDB) 7.0-ubuntu<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Copyright (C) 2009 Free Software Foundation, Inc.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">License GPLv3+: GNU GPL version 3 or later &lt;<a href=\"http://gnu.org/licenses/gpl.html\">http://gnu.org/licenses/gpl.html</a>&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">This is free software: you are free to change and redistribute it.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">There is NO WARRANTY, to the extent permitted by law.&nbsp;&nbsp;<span style=\"color: blue;\">Type</span>&nbsp;\"show copying\"<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">and \"show warranty\"&nbsp;<span style=\"color: blue;\">for</span>&nbsp;details.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">This GDB was configured as \"i486-linux-gnu\".<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New'; color: blue;\">For</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;bug reporting instructions, please see:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&lt;<a href=\"http://www.gnu.org/software/gdb/bugs/\">http://www.gnu.org/software/gdb/bugs/</a>&gt;...<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Reading symbols from /home/panfeng/segfault/segfault3...done.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">warning: Can't read pathname&nbsp;<span style=\"color: blue;\">for</span>&nbsp;load map:&nbsp;</span><span style=\"font-family: 宋体;\">输入</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">/</span><span style=\"font-family: 宋体;\">输出错误</span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Reading symbols from /lib/tls/i686/cmov/libc.so.6...(no debugging symbols found)...done.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Loaded symbols&nbsp;<span style=\"color: blue;\">for</span>&nbsp;/lib/tls/i686/cmov/libc.so.6<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Reading symbols from /lib/ld-linux.so.2...(no debugging symbols found)...done.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Loaded symbols&nbsp;<span style=\"color: blue;\">for</span>&nbsp;/lib/ld-linux.so.2<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Core was generated by `./segfault3'.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Program terminated with signal 11, Segmentation fault.<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">#0&nbsp; 0x0018506a in memcpy () from /lib/tls/i686/cmov/libc.6<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image040.png\" v:shapes=\"图片_x0020_20\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">从输出看出，同</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.2.1</span><span style=\"font-size: 14pt; font-family: 宋体;\">中一样的段错误信息。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">5</span><span style=\"font-size: 14pt; font-family: 宋体;\">、完成调试后，输入</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">quit</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令退出</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gdb</span><span style=\"font-size: 14pt; font-family: 宋体;\">：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">(gdb) quit<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.3.2&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">适用场景</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、适合于在实际生成环境下调试程序的段错误（即在不用重新发生段错误的情况下重现段错误）。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、当程序很复杂，</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件相当大时，该方法不可用。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.4&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">objdump<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.4.1&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">调试步骤</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">dmesg</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令，找到最近发生的段错误输出信息：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ dmesg<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">... ...<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">[17257.502808] segfault3[3320]: segfault at 80484e0 ip 0018506a sp bfc1cd6c error 7 in libc-2.10.1.so[110000+13e000]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">其中，对我们接下来的调试过程有用的是发生段错误的地址：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">80484e0</span><span style=\"font-size: 14pt; font-family: 宋体;\">和指令指针地址：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">0018506a</span><span style=\"font-size: 14pt; font-family: 宋体;\">。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、使用</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">objdump</span><span style=\"font-size: 14pt; font-family: 宋体;\">生成二进制的相关信息，重定向到文件中：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ objdump -d ./segfault3 &gt; segfault3Dump<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">其中，生成的</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">segfault3Dump</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件中包含了二进制文件的</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">segfault3</span><span style=\"font-size: 14pt; font-family: 宋体;\">的汇编代码。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">segfault3Dump</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件中查找发生段错误的地址：</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image042.png\" v:shapes=\"图片_x0020_21\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ grep -n -A 10 -B 10 \"80484e0\" ./segfault3Dump&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">121- 80483df:&nbsp;&nbsp;&nbsp; ff d0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">call</span>&nbsp;&nbsp; *%eax<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">122- 80483e1:&nbsp;&nbsp;&nbsp; c9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leave&nbsp;&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">123- 80483e2:&nbsp;&nbsp;&nbsp; c3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret&nbsp;&nbsp;&nbsp;&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">124- 80483e3:&nbsp;&nbsp;&nbsp; 90&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nop<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">125-<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">126-080483e4 &lt;main&gt;:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">127- 80483e4:&nbsp;&nbsp;&nbsp; 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push&nbsp;&nbsp; %ebp<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">128- 80483e5:&nbsp;&nbsp;&nbsp; 89 e5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp;&nbsp;&nbsp; %esp,%ebp<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">129- 80483e7:&nbsp;&nbsp;&nbsp; 83 e4 f0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and&nbsp;&nbsp;&nbsp; $0xfffffff0,%esp<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">130- 80483ea:&nbsp;&nbsp;&nbsp; 83 ec 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub&nbsp;&nbsp;&nbsp; $0x20,%esp<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">131: 80483ed:&nbsp;&nbsp;&nbsp; c7 44 24 1c e0 84 04&nbsp;&nbsp;&nbsp;&nbsp; movl&nbsp;&nbsp; $0x80484e0,0x1c(%esp)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">132- 80483f4:&nbsp;&nbsp;&nbsp; 08&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">133- 80483f5:&nbsp;&nbsp;&nbsp; b8 e5 84 04 08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp;&nbsp;&nbsp; $0x80484e5,%eax<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">134- 80483fa:&nbsp;&nbsp;&nbsp; c7 44 24 08 05 00 00&nbsp;&nbsp;&nbsp;&nbsp; movl&nbsp;&nbsp; $0x5,0x8(%esp)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">135- 8048401:&nbsp;&nbsp;&nbsp; 00&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">136- 8048402:&nbsp;&nbsp;&nbsp; 89 44 24 04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp;&nbsp;&nbsp; %eax,0x4(%esp)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">137- 8048406:&nbsp;&nbsp;&nbsp; 8b 44 24 1c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp;&nbsp;&nbsp; 0x1c(%esp),%eax<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">138- 804840a:&nbsp;&nbsp;&nbsp; 89 04 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp;&nbsp;&nbsp; %eax,(%esp)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">139- 804840d:&nbsp;&nbsp;&nbsp; e8 0a ff ff ff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">call</span>&nbsp;&nbsp; 804831c &lt;memcpy@plt&gt;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">140- 8048412:&nbsp;&nbsp;&nbsp; c9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leave&nbsp;&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">141- 8048413:&nbsp;&nbsp;&nbsp; c3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret&nbsp;&nbsp;&nbsp;&nbsp;<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image044.png\" v:shapes=\"图片_x0020_22\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span style=\"font-size: 14pt; font-family: 宋体;\">通过对以上汇编代码分析，得知段错误发生</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">main</span><span style=\"font-size: 14pt; font-family: 宋体;\">函数，对应的汇编指令是</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">movl $0x80484e0,0x1c(%esp)</span><span style=\"font-size: 14pt; font-family: 宋体;\">，接下来打开程序的源码，找到汇编指令对应的源码，也就定位到段错误了。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.4.2&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">适用场景</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、不需要</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-g</span><span style=\"font-size: 14pt; font-family: 宋体;\">参数编译，不需要借助于</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">core</span><span style=\"font-size: 14pt; font-family: 宋体;\">文件，但需要有一定的汇编语言基础。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、如果使用了</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">gcc</span><span style=\"font-size: 14pt; font-family: 宋体;\">编译优化参数（</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-O1</span><span style=\"font-size: 14pt; font-family: 宋体;\">，</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-O2</span><span style=\"font-size: 14pt; font-family: 宋体;\">，</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">-O3</span><span style=\"font-size: 14pt; font-family: 宋体;\">）的话，生成的汇编指令将会被优化，使得调试过程有些难度。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4.5&nbsp;</span></b><b><span style=\"font-size: 14pt; font-family: 宋体;\">使用</span></b><b><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">catchsegv<o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">catchsegv</span><span style=\"font-size: 14pt; font-family: 宋体;\">命令专门用来扑获段错误，它通过动态加载器（</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">ld-linux.so</span><span style=\"font-size: 14pt; font-family: 宋体;\">）的预加载机制（</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">PRELOAD</span><span style=\"font-size: 14pt; font-family: 宋体;\">）把一个事先写好的库（</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">/lib/libSegFault.so</span><span style=\"font-size: 14pt; font-family: 宋体;\">）加载上，用于捕捉断错误的出错信息。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image046.png\" v:shapes=\"图片_x0020_23\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">panfeng@ubuntu:~/segfault$ catchsegv ./segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Segmentation fault (core dumped)<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">*** Segmentation fault<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Register dump:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;EAX: 00000000&nbsp;&nbsp; EBX: 00fb3ff4&nbsp;&nbsp; ECX: 00000002&nbsp;&nbsp; EDX: 00000000<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;ESI: 080484e5&nbsp;&nbsp; EDI: 080484e0&nbsp;&nbsp; EBP: bfb7ad38&nbsp;&nbsp; ESP: bfb7ad0c<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;EIP: 00ee806a&nbsp;&nbsp; EFLAGS: 00010203<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;CS: 0073&nbsp;&nbsp; DS: 007b&nbsp;&nbsp; ES: 007b&nbsp;&nbsp; FS: 0000&nbsp;&nbsp; GS: 0033&nbsp;&nbsp; SS: 007b<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;Trap: 0000000e&nbsp;&nbsp; Error: 00000007&nbsp;&nbsp; OldMask: 00000000<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;ESP/signal: bfb7ad0c&nbsp;&nbsp; CR2: 080484e0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Backtrace:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">/lib/libSegFault.so[0x3b606f]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">??:0(??)[0xc76400]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xe89b56]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">/build/buildd/eglibc-2.10.1/csu/../sysdeps/i386/elf/<span style=\"color: blue;\">start</span>.S:122(_start)[0x8048351]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">Memory map:<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">&nbsp;</span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00258000-00273000 r-xp 00000000 08:01 157 /lib/ld-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00273000-00274000 r--p 0001a000 08:01 157 /lib/ld-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00274000-00275000 rw-p 0001b000 08:01 157 /lib/ld-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">003b4000-003b7000 r-xp 00000000 08:01 13105 /lib/libSegFault.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">003b7000-003b8000 r--p 00002000 08:01 13105 /lib/libSegFault.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">003b8000-003b9000 rw-p 00003000 08:01 13105 /lib/libSegFault.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00c76000-00c77000 r-xp 00000000 00:00 0 [vdso]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00e0d000-00e29000 r-xp 00000000 08:01 4817 /lib/libgcc_s.so.1<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00e29000-00e2a000 r--p 0001b000 08:01 4817 /lib/libgcc_s.so.1<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00e2a000-00e2b000 rw-p 0001c000 08:01 4817 /lib/libgcc_s.so.1<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00e73000-00fb1000 r-xp 00000000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00fb1000-00fb2000 ---p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00fb2000-00fb4000 r--p 0013e000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00fb4000-00fb5000 rw-p 00140000 08:01 1800 /lib/tls/i686/cmov/libc-2.10.1.so<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">00fb5000-00fb8000 rw-p 00000000 00:00 0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08048000-08049000 r-xp 00000000 08:01 303895 /home/panfeng/segfault/segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">08049000-0804a000 r--p 00000000 08:01 303895 /home/panfeng/segfault/segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">0804a000-0804b000 rw-p 00001000 08:01 303895 /home/panfeng/segfault/segfault3<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">09432000-09457000 rw-p 00000000 00:00 0 [heap]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">b78cf000-b78d1000 rw-p 00000000 00:00 0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">b78df000-b78e1000 rw-p 00000000 00:00 0<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-family: 'Courier New';\">bfb67000-bfb7c000 rw-p 00000000 00:00 0 [stack]<o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\"><a href=\"file:///javascript/void(0)%3B\"><span style=\"font-family: 'Courier New'; color: rgb(23, 63, 198); text-decoration: none;\"><img border=\"0\" width=\"22\" height=\"22\" src=\"file:///Users/Marcos/Library/Caches/TemporaryItems/msoclip/0clip_image048.png\" v:shapes=\"图片_x0020_24\"></span></a></span><span lang=\"EN-US\" style=\"font-family: 'Courier New';\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">5.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">一些注意事项</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、出现段错误时，首先应该想到段错误的定义，从它出发考虑引发错误的原因。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在使用指针时，定义了指针后记得初始化指针，在使用的时候记得判断是否为</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">NULL</span><span style=\"font-size: 14pt; font-family: 宋体;\">。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">3</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在使用数组时，注意数组是否被初始化，数组下标是否越界，数组元素是否存在等。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">4</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在访问变量时，注意变量所占地址空间是否已经被程序释放掉。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">5</span><span style=\"font-size: 14pt; font-family: 宋体;\">、在处理变量时，注意变量的格式控制是否合理等。</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><o:p></o:p></span></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\">6.&nbsp;</span></b><b><span style=\"font-size: 28pt; font-family: 宋体;\">参考资料列表</span></b><b><span lang=\"EN-US\" style=\"font-size: 28pt; font-family: Verdana;\"><o:p></o:p></span></b></p><p class=\"MsoNormal\" align=\"left\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">1</span><span style=\"font-size: 14pt; font-family: 宋体;\">、</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><a href=\"http://www.docin.com/p-105923877.html\">http://www.docin.com/p-105923877.html</a><o:p></o:p></span></p><p class=\"MsoNormal\" style=\"color: rgb(0, 0, 0); font-family: Arial; font-size: 14px;\"><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\">2</span><span style=\"font-size: 14pt; font-family: 宋体;\">、</span><span lang=\"EN-US\" style=\"font-size: 14pt; font-family: Verdana;\"><a href=\"http://blog.chinaunix.net/space.php?uid=317451&amp;do=blog&amp;id=92412\">http://blog.chinaunix.net/space.php?uid=317451&amp;do=blog&amp;id=92412</a></span></p>"
    }
  ]
}